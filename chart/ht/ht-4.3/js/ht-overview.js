!function(N,d){"use strict";var V="ht",j=V+".graph.",E=N[V],M=E.graph,G=E.Default,y=E.Color,L=null,b="px",h=G.getInternal(),$=h.getPinchDist,I=G.preventDefault,H=G.getTouchCount,W=G.startDragging;h.addMethod(G,{overviewBackground:y.widgetBackground,overviewMaskBackground:y.transparent,overviewContentBorderColor:y.widgetBorder,overviewContentBackground:y.background},!0),M.Overview=function(S){var A=this,y=A._view=h.createDiv(1);A._canvas=h.createCanvas(y),y.style.background=G.overviewBackground,y.appendChild(A._mask=h.createDiv()),A.gv=S,A.redraw(),A.addListeners(),S.addViewListener(A.handleView,A)},G.def(j+"Overview",d,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate"],_autoUpdate:!0,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:G.overviewMaskBackground,_contentBorderColor:G.overviewContentBorderColor,_contentBackground:G.overviewContentBackground,getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){var x=this;x.gv.removeViewListener(x.handleView,x)},onPropertyChanged:function(){this.redraw()},handleView:function(c){this._autoUpdate&&"validate"===c.kind&&this.redraw()},redraw:function(){var O=this;O._redraw||(O._redraw=1,O.iv(50))},validateImpl:function(){var r=this,m=r.gv,v=r._canvas,D=r._mask,A=D.style,I=r.getWidth(),n=r.getHeight(),d=m.getViewRect(),T=m.getScrollRect(),p=T.x,y=T.y,Y=T.width,g=T.height,q=r._rate=Math.max(Y/I,g/n),X=r._x=(I-Y/q)/2,S=r._y=(n-g/q)/2,O=r._redraw;if(0!==d.width&&0!==d.height||r.hasRetry||(G.callLater(r.iv,r,L),r.hasRetry=!0),(I!==v.clientWidth||n!==v.clientHeight)&&(h.setCanvas(v,I,n,1),O=1),h.isSameRect(T,r._scrollRect)||(r._scrollRect=T,O=1),O){var t=h.initContext(v),w=r._contentBackground,j=r._contentBorderColor;t.clearRect(0,0,I,n),w&&h.fillRect(t,X,S,Y/q,g/q,w),j&&h.drawBorder(t,j,X,S,Y/q,g/q),t.translate(-p/q+X,-y/q+S),t.scale(1/q,1/q),m._42(t),t.restore()}A.background=r._maskBackground,A.left=X+(d.x-p)/q+b,A.top=S+(d.y-y)/q+b,A.width=d.width/q+b,A.height=d.height/q+b,delete r._redraw},center:function($){var e=this,c=e.gv,l=c._zoom,J=c._29I,X=e._rate,k=e._scrollRect,o=G.getLogicalPoint($,e._canvas),b=k.x+(o.x-e._x)*X,a=k.y+(o.y-e._y)*X;c.setTranslate((J.width/2-b)*l,(J.height/2-a)*l)},handle_mousedown:function(v){this.handle_touchstart(v)},handleWindowMouseUp:function(J){this.handleWindowTouchEnd(J)},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},handle_mousewheel:function(L){this.handleScroll(L,L.wheelDelta)},handle_DOMMouseScroll:function(Z){2===Z.axis&&this.handleScroll(Z,-Z.detail)},handleScroll:function(i,O){I(i);var x=this.gv;O>0?x.scrollZoomIn():0>O&&x.scrollZoomOut()},handle_touchstart:function(F){if(I(F),G.isLeftButton(F)){var Y=this,d=Y.gv,c=H(F);1===c?G.isDoubleClick(F)&&d.isResettable()?d.reset():(Y.center(F),W(Y,F)):2===c&&(Y._dist=$(F),W(Y,F))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(g){var v=this,Q=v._dist,f=H(g);1===f?v.center(g):2===f&&Q!=L&&v.gv.handlePinch(L,$(g),Q)}})}(this,Object);