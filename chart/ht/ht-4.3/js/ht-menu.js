!function(I,r){"use strict";var O="ht",v=I[O],l="innerHTML",M="className",n=null,R="px",a=v.Default,D=a.getInternal(),u="0",j=function(){return document},k=function(I){return j().createElement(I)},B=function(){return k("div")},G=function(){return k("canvas")},P=function(X,_,W){X.style.setProperty(_,W,n)},J=function(x,i,b){a.def(v.widget[x],i,b)},w=function(u,E){u.appendChild(E)},L=function(G,W){G.removeChild(W)},y=function(w,k,d,Z){w.addEventListener(k,d,!!Z)},F=function(T,m,U,J){T.removeEventListener(m,U,!!J)},b=a.isTouchable;D.addMethod(a,{menuLabelFont:(b?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),v.widget.Menu=function(A){var $=this,X=$._view=B(),x=$.$1g=new v.widget.ContextMenu,O=k("ul");x._r=!0,x._view[M]+=" ht-widget-dropdownmenu",X[M]="ht-widget-menu",O[M]="header",P(X,"margin",u),P(X,"padding",u),P(X,"background",a.menuBackground),P(X,"-webkit-user-select","none"),P(X,"-moz-user-select","none"),P(X,"user-select","none"),P(X,"text-align","left"),P(X,"border-bottom",a.menuSeparatorWidth+"px solid "+a.menuSeparatorColor),P(X,"cursor","default"),P(X,"overflow","auto"),P(X,"white-space","nowrap"),P(X,"font",a.menuLabelFont),P(X,"color",a.menuLabelColor),P(X,"box-sizing","border-box"),P(X,"-moz-box-sizing","border-box"),P(O,"list-style","none"),P(O,"margin",u),P(O,"padding",u),P(O,"display","inline-block"),w(X,O),$.setItems(A),$.$2g=function(f){$.$3g(f)},$.$4g=function(o){$.$5g(o)},$.$6g=function(s){$.$7g(s)},$.$8g=function(i){$.$9g(i)},$.$9b=function(Z){$.$10g(Z)},$._autoShow=!0,$.setAutoShow(!1),x.afterHide=function(){$.$11g()},x.afterShow=function(){$.$12g()},F(j(),"keydown",x.$3b),$.$3b=function(Y){$.$13g(Y)},$.invalidate()},J("Menu",r,{_items:n,$14g:a.menuHoverBackground,$15g:a.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(N){var F=this;if(F.$21g=N,F.setItems(F._items),"largeicons"===N){for(var l=F._view.querySelectorAll(".header-item"),v=0,Z=0;Z<l.length;Z++){var Q=l[Z];v=Math.max(v,Q.clientWidth)}for(var Z=0;Z<l.length;Z++){var Q=l[Z];P(Q,"min-width",v+R)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(b){this.$22g=b;for(var g=this._view.querySelectorAll(".header-item"),I=0;I<g.length;I++){var q=g[I];P(q,"margin-left",b+R),P(q,"margin-right",b+R)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(g){this.$23g=g;for(var w=this._view.querySelectorAll(".header-item"),o=0;o<w.length;o++){var V=w[o];P(V,"margin-top",g+R),P(V,"margin-bottom",g+R)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(v){this.$24g=v,P(this._view,"text-align",v)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var N=this,P=N._enableGlobalKey;P===!1&&(y(j(),"keydown",N.$3b),N._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,F(j(),"keydown",this.$3b)},setHoverBackground:function(i){this.$14g=i},setHoverColor:function(S){this.$15g=S},setItems:function(H){var u=this,Y=u._view,O=u.$21g;if(u._items=H,Y.children[0][l]="",u.$16g={},H&&H.length){for(var I=Y.children[0],f=0,s=j().createDocumentFragment();f<H.length;f++){var a=H[f],N=k("li"),D=k("span");if(a.icon){var t=G();t[M]="menu-item-icon","smallicons"===O?(P(t,"height","1.2em"),P(t,"width","1.2em"),P(t,"vertical-align","middle")):(P(t,"height","32px"),P(t,"width","32px"),P(t,"display","block"),P(t,"margin","0 auto")),t.$20g=a.icon,w(N,t)}N[M]="header-item",P(N,"display","inline-block"),P(N,"vertical-align","top"),P(N,"padding","0 1.2em"),P(N,"line-height","1.8em"),"largeicons"===O&&P(N,"text-align","center"),P(N,"background-color","rgba(0,0,0,0)"),N.setAttribute("data-index",f),u.$16g[f]=a.items,D[l]=a.label,"iconsonly"!==O&&w(N,D),w(s,N)}w(I,s)}},showDropdownMenu:function(u){var l=this,h=l.$16g[u],H=l.$1g,N=l._view.children[0].children[u],S=l.$17g;if(N&&N!==S){S&&l.hideDropdownMenu();var y=N.getBoundingClientRect(),W=a.getWindowInfo();l.$17g=N,H.setItems(h),H.show(y.left+W.left,y.top+y.height+W.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(Q,U){var z=this,D=z._items;return D&&0!==D.length?z.$1g.getItemByProperty(Q,U,D):n},$12g:function(){var w=this,k=w.$17g;k.style.background=w.$14g,k.style.color=w.$15g,w._autoShow||y(j(),b?"touchstart":"mousedown",w.$9b)},$11g:function(){var x=this,i=x.$17g;i&&(i.style.background="",i.style.color="",x.$17g=n),F(j(),b?"touchstart":"mousedown",x.$9b)},$10g:function(L){var S=this,z=S._view,f=S.$1g,m=z.children[0];!j().body.contains(z)||m.contains(L.target)||f._view.contains(L.target)||S.hideDropdownMenu()},$13g:function(l){var f=this,a=f.$1g;j().body.contains(f._view)&&a.$13b.$4b.call(a.$13b,l,f._items)},setAutoShow:function(x){var U=this,D=U.$1g,Q=U._view;U._autoShow!==x&&(U._autoShow?(F(Q,"mouseover",U.$2g),F(Q,"mouseout",U.$4g),F(D._view,"mouseout",U.$4g),b||(y(Q,"mouseover",U.$8g),y(Q,"mouseout",U.$8g)),y(Q,b?"touchstart":"mousedown",U.$6g)):(F(Q,"mouseover",U.$8g),F(Q,"mouseout",U.$8g),F(Q,b?"touchstart":"mousedown",U.$6g),F(j(),b?"touchstart":"mousedown",U.$9b),b||(y(Q,"mouseover",U.$2g),y(Q,"mouseout",U.$4g),y(D._view,"mouseout",U.$4g))),U._autoShow=x)},$3g:function(Y){var P=this,z=P._view.children[0],Q=Y.target;if(z!==Q&&z.contains(Q)){for(;"header-item"!==Q[M];)Q=Q.parentNode;P.showDropdownMenu(Q.getAttribute("data-index"))}},$5g:function(g){var c=this,N=c._view.children[0],b=c.$1g,L=g.target,S=g.relatedTarget;!N.contains(L)&&!b._view.contains(L)||N.contains(S)||b._view.contains(S)||c.hideDropdownMenu()},$7g:function(T){var d=this,i=d._view.children[0],P=d.$1g,V=T.target;if(a.isLeftButton(T)&&i!==V&&i.contains(V))if(b){for(;"header-item"!==V[M];)V=V.parentNode;var N=V.getAttribute("data-index"),P=d.$1g,I=d._view.children[0].children[N],n=d.$17g;P.isShowing()&&d.hideDropdownMenu(),I!==n&&d.showDropdownMenu(N)}else if(P.isShowing())d.hideDropdownMenu();else{for(;"header-item"!==V[M];)V=V.parentNode;d.showDropdownMenu(V.getAttribute("data-index"))}},$9g:function(C){var T=this,o=T._view,R=T.$1g,E=C.target;if(o.contains(E)){for(var X=o.querySelectorAll(".header-item"),M=n,t=0;t<X.length;t++){var L=X[t];L.style.background="",L.style.color="","mouseover"===C.type?L.contains(E)&&(M=L):"mouseout"===C.type&&R.isShowing()&&T.$17g===L&&(M=L)}R.isShowing()&&(M||(M=T.$17g),T.showDropdownMenu(M.getAttribute("data-index"))),M&&(M.style.background=T.$14g,M.style.color=T.$15g)}},getShowingMenuIndex:function(){var y=this.$17g;return y?y.getAttribute("data-index"):-1},addTo:function(g){var R=this,h=R._view;w(g,h),R.invalidate()},dispose:function(){var R=this,B=R._view,_=R.$1g;B&&(R._autoShow?(F(B,"mouseover",R.$2g),F(B,"mouseout",R.$4g),F(_._view,"mouseout",R.$4g)):(F(B,"mouseover",R.$8g),F(B,"mouseout",R.$8g),F(B,b?"touchstart":"mousedown",R.$6g),F(j(),b?"touchstart":"mousedown",R.$9b)),F(j(),"keydown",R.$3b),_.dispose(),B.parentNode&&L(B.parentNode,B),R._view=R.$1g=R.$16g=R._items=R.$17g=R.$2g=R.$4g=R.$6g=R.$8g=R.$9b=R.$3b=n)},$19g:function(I,h,R,j){var E=D.initContext(I);D.translateAndScale(E,0,0,1),E.clearRect(0,0,R,j),a.drawStretchImage(E,a.getImage(h),"fill",0,0,R,j),E.restore()},validateImpl:function(){var x,P,u,c=this,t=c._view,p=t.querySelectorAll(".menu-item-icon");for(u=0;u<p.length;u++){var H=p[u];x=H.clientWidth,P=H.clientHeight,x&&P&&(D.setCanvas(H,x,P),c.$19g(H,a.getImage(H.$20g),x,P))}}})}(this,Object);