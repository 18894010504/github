var noAlert = true;
var htl = '{
"hashCode": "4ccff029dca8637c3b78e0bf89510f8330c79706ee7e1114bb96ee4907eee44b01eb6cf49b575c7e51a1ce4913de7e7c901ff5e47c3d4a91f41a7fbe8a8a18bdad751a46ed74e77b3c4d691ee285dd995ff764082e6813cd46f1b31863b37c6a9ce6a491a0bf65fd1a0bbf819044accc4742e039b63dbb6cebe01a0a65925278",
"t1": "32409244794112",
"t2": "1409097598844",
"signature": "7590a4d54bb8cfe5260e388451f9efa736d42dbbee7114d8a5368034bbaaa0bde2dba06921137b9fa749dd58715cc05d76ff25aef6700a0973e647b119076af6843ffd1ff16a42ec718c6dd5f0e99df999266637f57f31822a65aba929f1eba006de1429f0c7d79e9d60168d367f12bc3a6835a09b8cf09fc46988223de71089"
}';


!function(R,O,x){"use strict";var q="ht";if(!R[q]){!function(){for(var j=0,q=["ms","moz","webkit","o"],w=0;w<q.length&&!R.requestAnimationFrame;++w)R.requestAnimationFrame=R[q[w]+"RequestAnimationFrame"],R.cancelAnimationFrame=R[q[w]+"CancelAnimationFrame"]||R[q[w]+"CancelRequestAnimationFrame"];R.requestAnimationFrame||(R.requestAnimationFrame=function(x){var Q=(new Date).getTime(),P=Math.max(0,16-(Q-j)),J=R.setTimeout(function(){x(Q+P)},P);return j=Q+P,J}),R.cancelAnimationFrame||(R.cancelAnimationFrame=function(d){V(d)})}();var o,z,J,r,N=R.document,H=null,j=R[q]={},i=R[q+"config"],e=j.Default=i&&i.Default||{},g=j.Style=i&&i.Style||{},s=j.Color=i&&i.Color||{},f=j.IsGetter=i&&i.IsGetter||{},d=Math,y=d.round,p=d.floor,v=d.ceil,a=d.sqrt,W=d.max,P=d.min,t=d.abs,L=d.cos,I=d.acos,D=d.sin,Y=d.pow,w=d.asin,G=d.PI,C=2*G,K=G/2,E=d.tan,l=d.atan2,k=d.random,S=R.parseInt||global.parseInt,$="2015-10-01",Q=function(X){return X*X},A=R.setTimeout,V=R.clearTimeout,b=R.navigator?R.navigator.userAgent.toLowerCase():"",F=function(I){return I.test(b)},Z=F(/msie/)||F(/trident/),_=F(/msie 10/),c=F(/firefox/),m=F(/mac/),h=e.isTouchable===x?N?"ontouchend"in N:!1:e.isTouchable,T="default",M="single",B="multiple",u="front",n="back",U="left",X="right",Ol="top",Ko="bottom",as="center",qs="eye",xs="middle",Qn="east",Td="west",se="north",nq="none",sn="px",xk="absolute",fq="border",Bg="triangle",Un="rect",bm="circle",gq="cylinder",Ad="shape",Am="items",Eb="normal",Sq="remove",In="clear",wd="width",aq="height",Ze="ingroup",Of="check",Nq="uncheck",Nd="radio",Rd="radioOn",od="radioOff",zh="points",$j="values",Yd="series",Ig="body",jd="label",mr="label2",ir="note",nc="note2",Xf="icons",ke="labelFont",Vq="labelColor",Zn="labelSelectColor",hb="note.expanded",Cm="note2.expanded",Ln="edge.expanded",fd="edge.points",Tq="edge.type",Bh="rotation",xe="getRotation",_h="setRotation",rr="hidden",ue="visible",nd="tuv",si="no",Xh="select",Sr="currentSubGraph",Li="selectBackground",Ee="autoMakeVisible",gj="autoHideScrollBar",zb="scrollBarColor",os="scrollBarSize",Oc="indent",Lp="rowHeight",Pm="columnLineColor",Wn="rowLineColor",lq="columnLineVisible",te="rowLineVisible",gf="visibleFunc",Hk="expandIcon",Mf="collapseIcon",wg="checkMode",xg="sortFunc",us="editable",Ed="batchEditable",io="tristate",ib="asc",iq="desc",Fm="position",Xr="elevation",ak="children",cd="translateX",sg="translateY",pn="dataModel",pi="shape3d",$c="shape3d.resolution",_c="shape3d.visible",be="shape3d.from.visible",ug="shape3d.to.visible",wr="shape3d.top.visible",nj="shape3d.bottom.visible",Bn="repeat.uv.length",Cc="serializeValue",Sc="deserializeValue",Cp="centerUniform",un="rgba(255,255,255,0)",Vr="style",Nb="attr",sh="field",Lq="string",Um="boolean",Oo="color",Tj="int",ei="number",Jb="ew-resize",Oi="ns-resize",Kp="pointer",qp="auto",Uo="mousedown",gs="mousemove",xc="mouseup",Sl="mouseout",Rg="touchstart",jr="touchmove",Zj="touchend",ye="keydown",rp="keyup",hf=c?"DOMMouseScroll":"mousewheel",Tl=h?[Rg,jr,Zj]:[ye,rp,Uo,gs,xc,Sl,hf,"contextmenu"],jj=H,bd=H,qi=H,qd=xc.length,If=function(){qi&&(V(qi.timeout),qi=H)},mj=function(){qi&&sp(qi.e,qi.info)};R.addEventListener&&(h||(R.addEventListener(Sl,function(){If()},!1),R.addEventListener(hf,function(){Ti()},!1)),R.addEventListener(rp,function(v){91===v.keyCode?Kq={}:delete Kq[v.keyCode]},!0),R.addEventListener(ye,function(e){Kq[e.keyCode]=!0},!0));var lc,Pd,Hm,cn=!1,Gn=H,Kj=H,vc={},On={},Jk={},Fk={},ff={},Kq={},Qe={},tq={},Rl={},qh=[],ur={},dm=H,Dk=H,He=function(){},ej=function(){throw"Oops!"},Op=[0,0,0],jk=[0,0,0,0],he={x:0,y:0,width:0,height:0},_b=H,eo=H,bq=H,np=function(i){eo&&!i._72O&&(bq||(bq={}),bq[i._72O=xl()]=i),lc!=H?Mm()<.05&&r&&!Pd&&(pf=If):pf=Bm},Vp=function(b,s,S,N){eo||(eo={});var Z=eo[b];if(Z){if(Z.url===s)return;Z.image.onload=He,Z.image.onerror=He}var n=new Image;eo[b]={image:n,url:s},n.onload=function(){S&&(n.width=S),N&&(n.height=N),e.handleImageLoaded(b,n),hj(b,n)},n.onerror=function(){hj(b,e.handleUnfoundImage(b,s)||H)},n.src=s},hj=function(E,j){if(On[E]=j,delete eo[E],ws(eo)&&(eo=H,bq)){for(var f in bq){var u=bq[f];u.invalidateAll&&u.invalidateAll(),u.redraw&&u.redraw(),u.iv(),delete u._72O}bq=H}if(j&&bq)for(var f in bq){var u=bq[f];u.invalidateAll&&u.invalidateAll(),u.redraw&&u.redraw(),u.iv()}},yc=function(){return R.performance&&R.performance.now?R.performance.now():Date.now()},Dm=function(e,I){I?V(e):R.cancelAnimationFrame(e)},rb=function(K,J,o){return{width:K,height:J,comps:ro(o)?o:[o]}},Gf=function(M,S){return{type:bm,rect:[M,S,1.6,1.6],borderWidth:1,borderColor:Fo,gradient:og,gradientColor:nm,background:Fo}},Kn=function(i,B){return rb(16,16,{type:Bg,rect:[4,4,10,8],background:i,rotation:B?1.57:3.14})},ch=function(B,p){return rb(16,16,{type:Bg,rect:[4,4,8,7],background:B,rotation:p?3.14:0})},Kl=function(h){var t=h._orientation;return"horizontal"===t||"h"===t},vr=function(t){j.z=z=t},_i=function(x){var p=2,n=0;for(var Z in x)Z.length===p&&S(Z,32)===ij&&(dm=Dk=x[Z]),n++;return n},Im=function(P,k,s){return s?{x:P-s,y:k-s,width:2*s+1,height:2*s+1}:h?{x:P-5,y:k-5,width:11,height:11}:{x:P-1,y:k-1,width:3,height:3}},Gc=function(s){return(/ble$/.test(s)||/ed$/.test(s)||f[s]?"is":"get")+s.charAt(0).toUpperCase()+s.slice(1)},Ph=function(p){return"set"+p.charAt(0).toUpperCase()+p.slice(1)},Kf=function(h){return typeof h===Lq||h instanceof String},Se=function(K){return typeof K===ei},Bm=function(x){return typeof x===Um},Gb=function(d){return d&&"object"==typeof d},hh=function(j){return"function"==typeof j},ro=function(k){return k instanceof Array},Hq=function(v){return v instanceof yo},Mb=function(w){return ro(w)?new yo(w):w},vp=function(u){return u instanceof qj},dl=function(b){return b instanceof jf},nn=function(I){return I instanceof dd},Aj=function(q){return q&&"IFRAME"===q.tagName},yd=function(R){return R==H?R:parseFloat(R.toFixed(2))},Sj=function(g,T,X){var O,m=T.length;if(X)for(var I=0;X>I;I++)if(3===m)g.push(T[0]),g.push(T[1]),g.push(T[2]);else for(O=0;m>O;O++)g.push(T[O]);else if(3===m)g.push(T[0]),g.push(T[1]),g.push(T[2]);else for(O=0;m>O;O++)g.push(T[O])},Bl=function(m){return m?Gb(m)?m:{}:!1},hq=function(m,G,q){var h,P=Gb(m)?m:m.prototype;for(h in G)q&&P[h]!==x||(P[h]=G[h]);return m},Jn=function(j){return String.fromCharCode(j)},ip=function(g){for(var z,f=0,Y="";f<g.length;f++)z=g[g.length-1-f],"%"===z?z="'":"a"===z?z='"':"]"===z&&(z="\\"),Y+=Jn(z.charCodeAt(0)-1);return Y},yi=function(y,d,J){y.superClass.constructor.apply(d,J)},ws=function(w){for(var I in w)return!1;return!0},xf=function(T){return T?0===T.length:!0},Pr=function(P,T){return P.x===T.x&&P.y===T.y&&P.width===T.width&&P.height===T.height},Wl=function(q,l,_){return l>q?l:q>_?_:q},Mm=function(){var q=1e4*D(qd++);return q-p(q)},Hf=function(C,y,K){return Tp(C.x,C.y,y.x,y.y,K.x,K.y,K.x+K.width,K.y,!0)||Tp(C.x,C.y,y.x,y.y,K.x+K.width,K.y,K.x+K.width,K.y+K.height,!0)||Tp(C.x,C.y,y.x,y.y,K.x+K.width,K.y+K.height,K.x,K.y+K.height,!0)||Tp(C.x,C.y,y.x,y.y,K.x,K.y+K.height,K.x,K.y,!0)},Tp=function(n,R,c,j,k,B,M,O,T){var Z=(M-k)*(R-B)-(O-B)*(n-k),m=(O-B)*(c-n)-(M-k)*(j-R);if(0!==m){var L=Z/m,E=n+L*(c-n),r=R+L*(j-R);return T&&(E+Vc<P(n,c)||E-Vc>W(n,c)||E+Vc<P(k,M)||E-Vc>W(k,M)||r+Vc<P(R,j)||r-Vc>W(R,j)||r+Vc<P(B,O)||r-Vc>W(B,O))?H:[E,r]}return H},rn=function(X,y,D){if(X&&D)if(y){if(y===Vr)return X.getStyle(D);if(y===Nb)return X.getAttr(D);if(y===sh)return X[D]}else if(D=Gc(D),X[D])return X[D]();return x},Pc=function(K,t,H,k){if(K&&H)if(t){if(t===Vr)K.s(H,k);else if(t===Nb)K.a(H,k);else if(t===sh){var M=K[H];K[H]=k,K.fp("f:"+H,M,k)}}else H=Ph(H),K[H]&&K[H](k)},tp=function(H,I,Q,i,V){I&&Db(H,Q,i,1,V,I)},jl=function(u,g,H,G){var V=1-u;return V*V*g+2*u*V*H+u*u*G},Rp=function(N,S,R,s,J){var Y=1-N;return Y*Y*Y*S+3*Y*Y*N*R+3*Y*N*N*s+N*N*N*J},um=function(h){var o,v,r,O,w=0;return h.forEach(function(k){if(o=k.length,o>0)for(v=k[0],O=1;o>O;O++)r=k[O],w+=Io(v,r),v=r}),w},Sd=function(Q,B,W){var U="__"+Q,e=function(K){W["handle_"+Q](K)};W[U]||(W[U]=e,B.addEventListener(Q,e,!1))},Mh=function(m,$,j){var f="__"+m,l=j[f];l&&($.removeEventListener(m,l,!1),delete j[f])},Gh=function(v,k){var m="_"+k;v[Gc(k)]=function(){return this[m]},v[Ph(k)]=function(U){var j=this[m];this[m]=U,this.fp(k,j,U)}},Fn=function(K){return O.create(K)},pq=function(k){if(!k.element){var w,h;(w=k.textField)?h=zl(Pg.TextField,w):(w=k.textArea)?h=zl(Pg.TextArea,w):(w=k.button)?h=zl(Pg.Button,w):(w=k.comboBox)?h=zl(Pg.ComboBox,w):(w=k.checkBox)?h=zl(Pg.CheckBox,w):(w=k.radioButton)?h=zl(Pg.RadioButton,w):(w=k.slider)?h=zl(Pg.Slider,w):(w=k.colorPicker)?h=zl(Pg.ColorPicker,w):(w=k.image)&&(h=zl(Pg.Image,w)),h&&(k.element=h)}},Vb=function(S){var y=N.createElement("div"),Y=y.style;return y.tabIndex=-1,y.onkeydown=Cg,Y.msTouchAction=nq,Y.cursor=T,dc(y,H,0),h&&Y.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",H),S&&(Y.overflow=rr),y},Lm=function(G){var M=N.createElement("canvas"),e=M.style;return e.msTouchAction=nq,e.pointerEvents=nq,dc(M,H,0),G&&qr(G,M),M},dc=function(u,g,J){var m=u.style;m.border=g?g+" solid 1px":0,m.outline=0,m.padding=J?"0 "+J+sn:0,Jo(u)},Jo=function(x){var w=x.style;w.position=xk,w.margin=0,w.setProperty("box-sizing","border-box",H),w.setProperty("-moz-box-sizing","border-box",H)},Fe=function(U,q,z,$){$||($=Xe),q!=H&&(U.width=q*$,U.style.width=q+sn),z!=H&&(U.height=z*$,U.style.height=z+sn)},qr=function(i,p,o){i.appendChild(p),o&&(p.style.position=xk)},Bi=function(s,Y){Y.split||(Y+="");for(var E,D=Y.split("\n"),h=0,k=D.length,U=0;k>U;U++){var j=Yb(s.font,D[U]);j.width>h&&(h=j.width),E||(E=j.height)}return s.ss=D,{width:h,height:E*k}},$p=function(N,Q,n,R,G,u){var d=Q.length;if(1===d)Fp(N,Q[0],n,R,G);else for(var F=n.height/d,o={x:n.x,y:n.y,width:n.width,height:F},H=0;H<Q.length;H++)u?Gi(N,Q[H],R,G,o.x,o.y,o.width,o.height,u):Fp(N,Q[H],o,R,G),o.y+=F},Fp=function(D,X,b,m,O){D.font=m?m:eg,D.fillStyle=O?O:em,D.textAlign=as,D.textBaseline=xs;var C,t;b?b.width===x?(C=b.x,t=b.y):(C=b.x+b.width/2,t=b.y+b.height/2):(C=0,t=0),D.fillText(X,y(C),y(t))},_q=function(h){h.getView&&(h=h.getView());var V=h.offsetWidth||h.scrollWidth;return!V&&h.style.width&&(V=S(h.style.width)),V},bn=function(h){h.getView&&(h=h.getView());var g=h.offsetHeight||h.scrollHeight;return!g&&h.style.height&&(g=S(h.style.height)),g},jc=function(){var l=function(I){Cg(I),I.stopPropagation()},i=h?[Rg]:[ye,Uo,hf];return function(Q){var V=Vb(),K=V.style;return K.backgroundColor=e.disabledBackground,Q&&(K.backgroundImage="url("+Q+")",K.backgroundPosition="50% 50%",K.backgroundRepeat="no-repeat no-repeat"),i.forEach(function(D){V.addEventListener(D,l)}),V}}(),Qi=function(X){var S=X.getContext("2d");return S.save(),S.lineCap=sd,S.lineJoin=zg,S},pf=function(y,L,T,R){Vj(y,L*Xe,T*Xe),R*=Xe,1!==R&&y.scale(R,R)},Vj=function(d,t,z){d.translate(t,z)},pd=function(n,i){n.rotate(i)},Ao=function(I){if(N.activeElement!==I)if(h)I.focus();else{var r=Vl(),E=r.target;I.focus(),E.scrollLeft=r.left,E.scrollTop=r.top}},ie=function(y){return y&&y.getView?y.getView():y},gp=function(y,J,G,D,Z){2===arguments.length&&(G=J.y,D=J.width,Z=J.height,J=J.x);var B=ie(y),n=B.style;(N.fullscreenElement||N.mozFullScreenElement||N.webkitFullscreenElement||N.msFullscreenElement)!==B&&(J!==x&&(n.left=J+sn),G!==x&&(n.top=G+sn),D!==x&&(n.width=D+sn),Z!==x&&(n.height=Z+sn)),y.endEditing&&!h&&y.endEditing(),y.redraw&&y.redraw(),y.invalidate&&y.invalidate(),y.onLayouted&&y.onLayouted(J,G,D,Z),y._41O&&y._41O("layout")},Jd=function(p){var A=p.touches[0];return A?A:p.changedTouches[0]},Uc=function(t){e.popup&&e.popup.close(),e.popup=t},Oe=H,Yg=function(K){Oe.handleWindowTouchMove(K)},rk=function(A){Oe.handleWindowTouchEnd(A),R.removeEventListener(jr,Yg,!1),R.removeEventListener(Zj,rk,!1),Oe=H},kb=function(U){Oe.handleWindowMouseMove(U)},ig=function(C){Oe.handleWindowMouseUp(C),R.removeEventListener(gs,kb,!1),R.removeEventListener(xc,ig,!1),Oe=H},ve=function(x){return 1===ck(x)},ln=function(m,c){return c?c.keyCode===m:Kq[m]},bk=function(z){return Ji(z)&&ln(65,z)},Nf=function(A){return ln(46,A)||ln(8,A)},Cf=function(K){return function(M){return M?M.keyCode===K:Kq[K]}},ij=573,_e=[65,83,68,87,37,38,39,40,32,13,27],Jq=Cf(_e[0]),Bj=Cf(_e[1]),fe=Cf(_e[2]),_n=Cf(_e[3]),Dg=Cf(_e[4]),uq=Cf(_e[5]),uf=Cf(_e[6]),Ip=Cf(_e[7]),Hi=Cf(_e[8]),oq=Cf(_e[9]),yp=Cf(_e[10]),Oh={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},ng=[2,2,2,2,2,2,2,2,2,2,3,3,3,5,5,5,5,5,7,7,11,31],mf=H,rj=H,Bq=function(q,i){mf||(mf=Lm()),Fe(mf,q,i,1);var t=Qi(mf);return t.clearRect(0,0,q,i),t},Ek=function(){var m,X={};return function(Q){var y,x=X[Q];return x||(m||(m=Lm(),Fe(m,1,1,1)),y=m.getContext("2d"),y.clearRect(0,0,1,1),Db(y,0,0,1,1,Q),x=y.getImageData(0,0,1,1).data,x=X[Q]=[x[0],x[1],x[2],x[3]]),x}}(),of=function(R){if(!Kf(R))return R;var k=Ek(R);return k.CA||(k.CA=[k[0]/255,k[1]/255,k[2]/255,k[3]/255]),k.CA},Ri=function(K,y,I,a){var N=Lm();N.width=I,N.height=a;var t=N.getContext("2d");t.drawImage(K,0,0,I,a);try{for(var P=t.getImageData(0,0,I,a),T=P.data,A=0,e=T.length;e>A;A+=4){var U=T[A+0],o=T[A+1],D=T[A+2];T[A+0]=y[0]*U,T[A+1]=y[1]*o,T[A+2]=y[2]*D}t.putImageData(P,0,0)}catch(O){return K}return N},wm=function(b,S,o){return S&&(S="miter"===o?8*S+20:S+1,b&&Zb(b,S)),S},Tn=function(N,_){if(_){var c=new Ah(_),d=N.width/2,G=N.height/2,J=Ro([c.tf(-d,-G),c.tf(d,-G),c.tf(d,G),c.tf(-d,G)]);return J.x+=N.x+d,J.y+=N.y+G,J}return N},Rk=function(p,f,k,y,L,F,c,C){y*=Math.PI/180;var W={x:Math.cos(y)*(p.x-c.x)/2+Math.sin(y)*(p.y-c.y)/2,y:-Math.sin(y)*(p.x-c.x)/2+Math.cos(y)*(p.y-c.y)/2},b=Math.pow(W.x,2)/Math.pow(f,2)+Math.pow(W.y,2)/Math.pow(k,2);b>1&&(f*=Math.sqrt(b),k*=Math.sqrt(b));var j=(L==F?-1:1)*Math.sqrt((Math.pow(f,2)*Math.pow(k,2)-Math.pow(f,2)*Math.pow(W.y,2)-Math.pow(k,2)*Math.pow(W.x,2))/(Math.pow(f,2)*Math.pow(W.y,2)+Math.pow(k,2)*Math.pow(W.x,2)));isNaN(j)&&(j=0);var q={x:j*f*W.y/k,y:j*-k*W.x/f},i={x:(p.x+c.x)/2+Math.cos(y)*q.x-Math.sin(y)*q.y,y:(p.y+c.y)/2+Math.sin(y)*q.x+Math.cos(y)*q.y},A=function(X){return Math.sqrt(Math.pow(X[0],2)+Math.pow(X[1],2))},e=function(K,i){return(K[0]*i[0]+K[1]*i[1])/(A(K)*A(i))},n=function(w,I){return(w[0]*I[1]<w[1]*I[0]?-1:1)*Math.acos(e(w,I))},M=n([1,0],[(W.x-q.x)/f,(W.y-q.y)/k]),Z=[(W.x-q.x)/f,(W.y-q.y)/k],X=[(-W.x-q.x)/f,(-W.y-q.y)/k],J=n(Z,X);e(Z,X)<=-1&&(J=Math.PI),e(Z,X)>=1&&(J=0);var e=f>k?f:k,g=f>k?1:f/k,r=f>k?k/f:1;if(null==C){var d={x:0,y:0,width:0,height:0};Zb(d,e),d.x*=g,d.width*=g,d.y*=r,d.height*=r;var t=new Ah(y);return d=Ro([t.tf(d.x,d.y),t.tf(d.x+d.width,d.y),t.tf(d.x+d.width,d.y+d.height),t.tf(d.x,d.y+d.height)]),d.x+=i.x,d.y+=i.y,[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}]}C.translate(i.x,i.y),C.rotate(y),C.scale(g,r),C.arc(0,0,e,M,M+J,1-F),C.scale(1/g,1/r),C.rotate(-y),C.translate(-i.x,-i.y)},oe=function(H,g){H&&H.beginPath();for(var x,Y,Z,n=[],q=function(V){for(var O,L=/(\-{0,1}[\d\.]+)/gi,v=[];O=L.exec(V);)v.push(parseFloat(O[0]));return v},u=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,h={x:0,y:0};x=u.exec(g);){var O=x[0],c=O.substr(0,1);if("M"===c||"m"===c){for(var M=q(O),t=0;t<M.length;t+=2){var b=M[t],j=M[t+1];"m"===c&&(b+=h.x,j+=h.y),H&&H.moveTo(b,j),n.push({x:b,y:j}),h.x=b,h.y=j}Y=Z=null}else if("H"===c||"h"===c){for(var M=q(O),t=0;t<M.length;t+=1){var b=M[t];"h"===c&&(b+=h.x),H&&H.lineTo(b,h.y),n.push({x:b,y:h.y}),h.x=b}Y=Z=null}else if("C"===c||"c"===c){for(var M=q(O),t=0;t<M.length;t+=6){var T=M[t],e=M[t+1],B=M[t+2],K=M[t+3],b=M[t+4],j=M[t+5];"c"===c&&(T+=h.x,e+=h.y,B+=h.x,K+=h.y,b+=h.x,j+=h.y),H&&H.bezierCurveTo(T,e,B,K,b,j),n.push({x:T,y:e}),n.push({x:B,y:K}),n.push({x:b,y:j}),h.x=b,h.y=j}Y=[T,e,B,K,b,j],Z=null}else if("S"===c||"s"===c){for(var M=q(O),t=0;t<M.length;t+=4){var T,e;Y?(T=2*Y[4]-Y[2],e=2*Y[5]-Y[3]):(T=h.x,e=h.y);var B=M[t],K=M[t+1],b=M[t+2],j=M[t+3];"s"===c&&(B+=h.x,K+=h.y,b+=h.x,j+=h.y),H&&H.bezierCurveTo(T,e,B,K,b,j),n.push({x:T,y:e}),n.push({x:B,y:K}),n.push({x:b,y:j}),h.x=b,h.y=j}Y=[T,e,B,K,b,j],Z=null}else if("Q"===c||"q"===c){for(var M=q(O),t=0;t<M.length;t+=4){var T=M[t],e=M[t+1],b=M[t+2],j=M[t+3];"q"===c&&(T+=h.x,e+=h.y,b+=h.x,j+=h.y),H&&H.quadraticCurveTo(T,e,b,j),n.push({x:T,y:e}),n.push({x:b,y:j}),h.x=b,h.y=j}Y=null,Z=[T,e,b,j]}else if("T"===c||"t"===c){for(var M=q(O),t=0;t<M.length;t+=2){var T,e;Z?(T=2*Z[2]-Z[0],e=2*Z[3]-Z[1]):(T=h.x,e=h.y);var b=M[t],j=M[t+1];"t"===c&&(b+=h.x,j+=h.y),H&&H.quadraticCurveTo(T,e,b,j),n.push({x:T,y:e}),n.push({x:b,y:j}),h.x=b,h.y=j}Y=null,Z=[T,e,b,j]}else if("V"===c||"v"===c){for(var M=q(O),t=0;t<M.length;t+=1){var j=M[t];"v"===c&&(j+=h.y),H&&H.lineTo(h.x,j),n.push({x:h.x,y:j}),h.y=j}Y=Z=null}else if("L"===c||"l"===c){for(var M=q(O),t=0;t<M.length;t+=2){var b=M[t],j=M[t+1];"l"===c&&(b+=h.x,j+=h.y),H&&H.lineTo(b,j),n.push({x:b,y:j}),h.x=b,h.y=j}Y=Z=null}else if("A"===c||"a"===c){for(var M=q(O),t=0;t<M.length;t+=7){var v=M[t],$=M[t+1],V=M[t+2],p=M[t+3],z=M[t+4],b=M[t+5],j=M[t+6];"a"===c&&(b+=h.x,j+=h.y);var d=Rk(h,v,$,V,p,z,{x:b,y:j},H);d&&(n=n.concat(d)),h.x=b,h.y=j}Y=Z=null}var E=O.substr(O.length-1);("z"===E||"Z"===E)&&H&&H.closePath()}return n},sc=function(z,F,v,m){var S=!1;if(z.beginPath?z.beginPath():S=!0,Hq(F)&&(F=F._as),Hq(v)&&(v=v._as),v&&v.length){for(var n,q,V,L,h=0,T=0,R=v.length;R>T;T++)n=v[T],1===n?(q=F[h++],z.moveTo(q.x,S?-q.y:q.y)):2===n?(q=F[h++],z.lineTo(q.x,S?-q.y:q.y)):3===n?(q=F[h++],V=F[h++],z.quadraticCurveTo(q.x,S?-q.y:q.y,V.x,S?-V.y:V.y)):4===n?(q=F[h++],V=F[h++],L=F[h++],z.bezierCurveTo(q.x,S?-q.y:q.y,V.x,S?-V.y:V.y,L.x,S?-L.y:L.y)):5===n&&z.closePath();m&&5!==n&&z.closePath()}else{var k,B,d,E=F.length;if(E>0){for(k=F[0],z.moveTo(k.x,S?-k.y:k.y),B=1;E>B;B++)d=F[B],z.lineTo(d.x,S?-d.y:d.y);m&&z.closePath()}}},sl=function(y,F,b,r){if(Hq(y)&&(y=y._as),Hq(F)&&(F=F._as),F&&F.length){b=b||rm;for(var o,L,d,Y,U,a,_=[],B=H,M=0,e=0,G=F.length;G>e;e++)if(o=F[e],1===o)_.push(B=[]),B.push(y[M++]);else if(2===o)B.push(y[M++]);else if(3===o)for(L=B[B.length-1],d=y[M++],Y=y[M++],a=1;b>=a;a++)B.push({x:jl(a/b,L.x,d.x,Y.x),y:jl(a/b,L.y,d.y,Y.y)});else if(4===o)for(L=B[B.length-1],d=y[M++],Y=y[M++],U=y[M++],a=1;b>=a;a++)B.push({x:Rp(a/b,L.x,d.x,Y.x,U.x),y:Rp(a/b,L.y,d.y,Y.y,U.y)});else 5===o&&B.push(B[0]);return r&&5!==o&&B&&B.length>2&&B.push(B[0]),_}return r&&y.length>2&&(y=y.slice(),y.push(y[0])),y?[y]:[]},Eq=function(I,N,A,s,Y,j){var O,S,l,H=Ek(N),k=s,L=H[0],z=H[1],q=H[2];if(A){var x=Ek(A);O=x[0]-L,S=x[1]-z,l=x[2]-q}else O=255-L,S=255-z,l=255-q;for(j||(j=s>10?1:.5,j=1>Y?P(j/Y,2):j);(s-=j)>0;){var u=1-s/k,f=L+O*u,m=z+S*u,K=q+l*u;f=P(v(f),255),m=P(v(m),255),K=P(v(K),255),I.strokeStyle="rgb("+f+","+m+","+K+")",I.lineWidth=s,I.stroke()}},rh=function(){var R={};return function(C,$){var D=C+"-"+$,U=R[D];if(U)return U;var c,H,N,h=Ek(C);return 0>$?($=(100+$)/100,c=v(h[0]*$),H=v(h[1]*$),N=v(h[2]*$)):($/=100,c=h[0],H=h[1],N=h[2],c+=(255-c)*$,H+=(255-H)*$,N+=(255-N)*$,c=P(v(c),255),H=P(v(H),255),N=P(v(N),255)),R[D]="rgb("+c+","+H+","+N+")"}}(),Db=function(h,i,e,N,G,W){W&&(h.fillStyle=W),h.beginPath(),h.rect(i,e,N,G),h.fill()},Xn=function(o,w,n,E,G,F,K){o.beginPath(),so[w](o,n.x,n.y,n.width,n.height,E,G,F,K)},Wf=function(f,S,w,U,L){var Q=so[w];f.fillStyle=Q?Q(f,S,U?U:nm,L.x,L.y,L.width,L.height):S},li=function(P,K){P.fillStyle=P.createPattern(K,"repeat")},Qq=function(s,A,u,q,d,K,P,m){var U,b,N,c,$,C,o,z,W,R,a;if(t(d)>2*G&&(d=2*G),$=v(t(d)/(G/4)),U=d/$,b=-U,N=-q,$>0){C=A+L(q)*K,o=u+D(-q)*P,m?s.lineTo(C,o):s.moveTo(C,o);for(var l=0;$>l;l++)N+=b,c=N-b/2,z=A+L(N)*K,W=u+D(N)*P,R=A+L(c)*(K/L(b/2)),a=u+D(c)*(P/L(b/2)),s.quadraticCurveTo(R,a,z,W)}},_k=function(c,Z,C,X,Y,g,W,l,H){6===arguments.length&&(W=g,l=g,H=g);var h=Z+X,S=C+Y,k=Y>X?2*X:2*Y;g=k>g?g:k,W=k>W?W:k,l=k>l?l:k,H=k>H?H:k;var N=.29*H,L=.58*H;c.moveTo(h,S-H),c.quadraticCurveTo(h,S-L,h-N,S-N),c.quadraticCurveTo(h-L,S,h-H,S),N=.29*l,L=.58*l,c.lineTo(Z+l,S),c.quadraticCurveTo(Z+L,S,Z+N,S-N),c.quadraticCurveTo(Z,S-L,Z,S-l),N=.29*g,L=.58*g,c.lineTo(Z,C+g),c.quadraticCurveTo(Z,C+L,Z+N,C+N),c.quadraticCurveTo(Z+L,C,Z+g,C),N=.29*W,L=.58*W,c.lineTo(h-W,C),c.quadraticCurveTo(h-L,C,h-N,C+N),c.quadraticCurveTo(h,C+L,h,C+W),c.lineTo(h,S-H)},Jr=function(K,Q,c,r,h,p,j){Q&&(c=y(c),r=y(r),j||(j=1),K.fillStyle=Q,K.beginPath(),K.rect(c,r,j,p),K.rect(c,r,h,j),K.rect(c,r+p-j,h,j),K.rect(c+h-j,r,j,p),K.fill())},jo=function(y,b,o,a){var k=a.x,n=a.y,c=a.width,h=a.height;if(!(!b||!o||0>=c||0>=h)){var Z,Q=Go(b),F=bg(b),w=o>0;1===o||-1===o?(y.fillStyle=w?Q:F,y.beginPath(),y.rect(k,n,1,h),y.rect(k,n,c,1),y.fill(),y.fillStyle=w?F:Q,y.beginPath(),y.rect(k,n+h-1,c,1),y.rect(k+c-1,n,1,h),y.fill()):(o=P(t(o),P(c/2,h/2)),Z=y.createLinearGradient(k,n,k+o,n),Z.addColorStop(0,w?Q:F),Z.addColorStop(1,b),y.fillStyle=Z,y.beginPath(),y.moveTo(k,n),y.lineTo(k+o,n+o),y.lineTo(k+o,n+h-o),y.lineTo(k,n+h),y.lineTo(k,n),y.fill(),Z=y.createLinearGradient(k,n,k,n+o),Z.addColorStop(0,w?Q:F),Z.addColorStop(1,b),y.fillStyle=Z,y.beginPath(),y.moveTo(k,n),y.lineTo(k+o,n+o),y.lineTo(k+c-o,n+o),y.lineTo(k+c,n),y.lineTo(k,n),y.fill(),Z=y.createLinearGradient(k,n+h,k,n+h-o),Z.addColorStop(0,w?F:Q),Z.addColorStop(1,b),y.fillStyle=Z,y.beginPath(),y.moveTo(k,n+h),y.lineTo(k+o,n+h-o),y.lineTo(k+c-o,n+h-o),y.lineTo(k+c,n+h),y.lineTo(k,n+h),y.fill(),Z=y.createLinearGradient(k+c,n,k+c-o,n),Z.addColorStop(0,w?F:Q),Z.addColorStop(1,b),y.fillStyle=Z,y.beginPath(),y.moveTo(k+c,n),y.lineTo(k+c-o,n+o),y.lineTo(k+c-o,n+h-o),y.lineTo(k+c,n+h),y.lineTo(k+c,n),y.fill())}},Be=function(P,p,T,d,M,s,H){var h=P.createLinearGradient(d,M,s,H);return h.addColorStop(0,T),h.addColorStop(1,p),h},Lf=function(v,u,l,r,e,s,U){var D=v.createLinearGradient(r,e,s,U);return D.addColorStop(0,u),D.addColorStop(.5,l),D.addColorStop(1,u),D},Wi=function(G,A,k,N,q,B,m){var x=G.createLinearGradient(N,q,B,m);return x.addColorStop(0,A),x.addColorStop(1/3,k),x.addColorStop(2/3,A),x.addColorStop(1,k),x},Wj=function(f,x,j,V,R,S,i,C,l){var U=f.createRadialGradient(V+S*C,R+i*l,P(S,i)/24,V+S/2,R+i/2,W(S,i)/2);return U.addColorStop(0,j),U.addColorStop(1,x),U},so={polygon:function(g,Z,k,q,r,j){(j==H||3>j)&&(j=6);for(var T,Q,l=P(q,r)/2,Y=Z+q/2,v=k+r/2,e=0,m=2*G/j,t=0;j>t;t++)T=Y+L(e)*l,Q=v+D(e)*l,0===t?g.moveTo(T,Q):g.lineTo(T,Q),e+=m;g.closePath()},arc:function(j,c,W,Y,$,d,l,i,T){d==H&&(d=G),l==H&&(l=C),i==H&&(i=!0);var t=c+Y/2,I=W+$/2;i&&j.moveTo(t,I),T?(d=-d,l=-l,Qq(j,t,I,d,l-d,Y/2,$/2,!0)):j.arc(t,I,P(Y,$)/2,d,l),i&&j.closePath()},rect:function($,m,r,d,T){$.rect(m,r,d,T)},circle:function(H,d,E,V,F){H.arc(d+V/2,E+F/2,P(V,F)/2,0,C,!0)},oval:function(U,y,Z,z,X){Qq(U,y+z/2,Z+X/2,0,C,z/2,X/2,!1)},roundRect:function(W,x,z,S,O,E){E==H&&(E=P(P(S,O)/4,8)),_k(W,x,z,S,O,E)},star:function(f,a,m,s,J){var q=2*s,I=2*J,Q=a+s/2,W=m+J/2;f.moveTo(Q-q/4,W-I/12),f.lineTo(a+.306*s,m+.579*J),f.lineTo(Q-q/6,W+I/4),f.lineTo(a+s/2,m+.733*J),f.lineTo(Q+q/6,W+I/4),f.lineTo(a+.693*s,m+.579*J),f.lineTo(Q+q/4,W-I/12),f.lineTo(a+.611*s,m+.332*J),f.lineTo(Q+0,W-I/4),f.lineTo(a+.388*s,m+.332*J),f.closePath()},triangle:function(E,Y,v,N,H){E.moveTo(Y+N/2,v),E.lineTo(Y+N,v+H),E.lineTo(Y,v+H),E.closePath()},hexagon:function(o,H,I,C,t){o.moveTo(H,I+t/2),o.lineTo(H+C/4,I+t),o.lineTo(H+3*C/4,+I+t),o.lineTo(H+C,I+t/2),o.lineTo(H+3*C/4,I),o.lineTo(H+C/4,I),o.closePath()},pentagon:function(L,H,V,P,t){var i=2*P,U=2*t,g=H+P/2,X=V+t/2;L.moveTo(g-i/4,X-U/12),L.lineTo(g-i/6,X+U/4),L.lineTo(g+i/6,X+U/4),L.lineTo(g+i/4,X-U/12),L.lineTo(g+0,X-U/4),L.closePath()},diamond:function(l,Y,U,v,N){l.moveTo(Y+v/2,U),l.lineTo(Y,U+N/2),l.lineTo(Y+v/2,U+N),l.lineTo(Y+v,U+N/2),l.closePath()},rightTriangle:function(_,e,A,X,G){_.moveTo(e,A),_.lineTo(e+X,A+G),_.lineTo(e,A+G),_.closePath()},parallelogram:function(q,K,e,U,Z){var D=U/4;q.moveTo(K+D,e),q.lineTo(K+U,e),q.lineTo(K+U-D,e+Z),q.lineTo(K,e+Z),q.closePath()},trapezoid:function(A,$,X,C,e){var R=C/4;A.moveTo($+R,X),A.lineTo($+C-R,X),A.lineTo($+C,X+e),A.lineTo($,X+e),A.closePath()},"linear.southwest":function(K,E,i,Z,B,m,Y){return Be(K,E,i,Z,B+Y,Z+m,B)},"linear.southeast":function(V,I,z,t,s,g,R){return Be(V,I,z,t+g,s+R,t,s)},"linear.northwest":function(o,l,u,N,F,K,g){return Be(o,l,u,N,F,N+K,F+g)},"linear.northeast":function(i,S,F,w,C,N,O){return Be(i,S,F,w+N,C,w,C+O)},"linear.north":function(W,m,U,I,Z,_,L){return Be(W,m,U,I,Z,I,Z+L)},"linear.south":function(R,v,I,t,k,x,z){return Be(R,v,I,t,k+z,t,k)},"linear.west":function(v,P,g,Q,J,A){return Be(v,P,g,Q,J,Q+A,J)},"linear.east":function(_,J,V,G,w,h){return Be(_,J,V,G+h,w,G,w)},"radial.center":function(v,e,l,n,T,b,k){return Wj(v,e,l,n,T,b,k,.5,.5)},"radial.southwest":function(k,w,p,t,L,e,m){return Wj(k,w,p,t,L,e,m,.25,.75)},"radial.southeast":function(r,D,x,C,S,L,E){return Wj(r,D,x,C,S,L,E,.75,.75)},"radial.northwest":function(r,d,E,o,G,n,i){return Wj(r,d,E,o,G,n,i,.25,.25)},"radial.northeast":function(I,n,Y,O,w,a,g){return Wj(I,n,Y,O,w,a,g,.75,.25)},"radial.north":function(C,A,i,j,u,y,v){return Wj(C,A,i,j,u,y,v,.5,.25)},"radial.south":function(J,v,c,e,y,p,a){return Wj(J,v,c,e,y,p,a,.5,.75)},"radial.west":function(M,d,l,q,p,D,G){return Wj(M,d,l,q,p,D,G,.25,.5)},"radial.east":function(w,v,W,k,B,h,Y){return Wj(w,v,W,k,B,h,Y,.75,.5)},"spread.horizontal":function(w,c,h,u,W,Z){return Lf(w,c,h,u,W,u+Z,W)},"spread.vertical":function(M,n,b,Z,j,s,J){return Lf(M,n,b,Z,j,Z,j+J)},"spread.diagonal":function(E,d,i,q,x,N,W){return Lf(E,d,i,q+N,x,q,x+W)},"spread.antidiagonal":function(c,R,q,V,j,v,d){return Lf(c,R,q,V,j,V+v,j+d)},"spread.north":function(k,r,E,A,u,d,J){return Wi(k,r,E,A,u-J/4,A,u+J+J/4)},"spread.south":function(O,u,D,d,g,A,E){return Wi(O,D,u,d,g-E/4,d,g+E+E/4)},"spread.west":function(B,S,x,W,C,N){return Wi(B,S,x,W-N/4,C,W+N+N/4,C)},"spread.east":function(b,o,S,D,r,u){return Wi(b,S,o,D-u/4,r,D+u+u/4,r)}},Ah=function(B,P,U){var M=this;M.s=D(B),M.c=L(B),M.cx=P||0,M.cy=U||0};Ah.prototype.tf=function(i,L){1===arguments.length&&(L=i.y,i=i.x);var B=this;return{x:B.c*i-B.s*L+B.cx,y:B.s*i+B.c*L+B.cy}};var dk=function(l,o,i){return new Ah(l).tf(o,i)},cs=function(Z){var i=Z.touches[0],r=Z.touches[1],k=i.clientX,J=i.clientY,d=r.clientX,E=r.clientY;return a((k-d)*(k-d)+(J-E)*(J-E))},ao=(function(){for(var $=0,Y=iq.split(""),h=0;h<Y.length;h++)$=10*S(Y[h])+$;return vr(R[ij.toString(8*h)+jd.substr(h)]),$}(),function(P,L,C){for(var Y=0;Y<C.size();Y++){var H=C.get(Y);P.co(H)&&L.add(H)}for(Y=0;Y<C.size();Y++)H=C.get(Y),ao(P,L,H._children)}),kq=function(R,F,c){for(var V=0;V<c.size();V++){var f=c.get(c.size()-1-V);R.co(f)&&F.add(f)}for(V=0;V<c.size();V++)f=c.get(V),kq(R,F,f._children)},Qd=function(r,w,b){for(var G=!1,A=0;A<b.size();A++){var R=b.get(A);r.co(R)?G&&w.add(R):G=1}for(A=0;A<b.size();A++)R=b.get(A),Qd(r,w,R._children)},Kk=function(O,Z,D){for(var M=!1,j=0;j<D.size();j++){var $=D.get(D.size()-1-j);O.co($)?M&&Z.add($):M=!0}for(j=0;j<D.size();j++)$=D.get(j),Kk(O,Z,$._children)},ab=function(V,i,j,Z){var o=Z==H;if(0!==i||0!==j||!o&&0!==Z){var T,F,k,p,Y=new yo;V.each(function(K){if(vp(K)){var N=!0;if(k)for(T=0;T<k.size();T++)F=k.get(T),F.isHostOn(K)?(k.removeAt(T),T--,Y.remove(F)):N&&(K.isHostOn(F)||K.isLoopedHostOn(F))&&(N=!1);if(p)for(T=0;T<p.size();T++)F=p.get(T),zo(F,K)?(p.removeAt(T),T--,Y.remove(F)):N&&zo(K,F)&&(N=!1);N&&(Y.add(K),(K._host||K._69O)&&(k||(k=new yo),k.add(K)),(nn(K)||nn(K._parent))&&(p||(p=new yo),p.add(K)))}else if(dl(K)&&K.s(Tq)===zh){var n=K.s(fd);n&&!n.isEmpty()&&(n.each(function(V){o?(V.x+=i,V.y+=j):(V.x+=i,V.y+=Z,V.e==H?V.e=j:V.e+=j)}),K.fp(fd,!1,!0))}}),Y.each(function(E){o?E.translate(i,j):E.translate3d(i,j,Z)})}},tc={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Ui=function(){var y={1:function(T,L){return{x:T.x-L.width/2,y:T.y-L.height/2}},2:function(G,N){return{x:G.x+N.width/2,y:G.y-N.height/2}},3:function(r,k){return{x:r.x+r.width/2,y:r.y-k.height/2}},4:function(k,m){return{x:k.x+k.width-m.width/2,y:k.y-m.height/2}},5:function(T,Y){return{x:T.x+T.width+Y.width/2,y:T.y-Y.height/2}},6:function(o){return{x:o.x,y:o.y}},7:function(r){return{x:r.x+r.width/2,y:r.y}},8:function(X){return{x:X.x+X.width,y:X.y}},9:function(q,U){return{x:q.x-U.width/2,y:q.y+U.height/2}},10:function(Y,X){return{x:Y.x+X.width/2,y:Y.y+X.height/2}},11:function(C,r){return{x:C.x+C.width/2,y:C.y+r.height/2}},12:function(D,L){return{x:D.x-L.width/2+D.width,y:D.y+L.height/2}},13:function(L,q){return{x:L.x+L.width+q.width/2,y:L.y+q.height/2}},14:function(Z,H){return{x:Z.x-H.width/2,y:Z.y+Z.height/2}},15:function(i){return{x:i.x,y:i.y+i.height/2}},16:function(p,s){return{x:p.x+s.width/2,y:p.y+p.height/2}},17:function(g){return{x:g.x+g.width/2,y:g.y+g.height/2}},18:function(h,k){return{x:h.x+h.width-k.width/2,y:h.y+h.height/2}},19:function(s){return{x:s.x+s.width,y:s.y+s.height/2}},20:function(S,U){return{x:S.x+S.width+U.width/2,y:S.y+S.height/2}},21:function(M,$){return{x:M.x-$.width/2,y:M.y+M.height-$.height/2}},22:function(q,r){return{x:q.x+r.width/2,y:q.y+q.height-r.height/2}},23:function(s,K){return{x:s.x+s.width/2,y:s.y+s.height-K.height/2}},24:function(m,T){return{x:m.x+m.width-T.width/2,y:m.y+m.height-T.height/2}},25:function(c,x){return{x:c.x+c.width+x.width/2,y:c.y+c.height-x.height/2}},26:function(E){return{x:E.x,y:E.y+E.height}},27:function(P){return{x:P.x+P.width/2,y:P.y+P.height}},28:function(M){return{x:M.x+M.width,y:M.y+M.height}},29:function(U,I){return{x:U.x-I.width/2,y:U.y+U.height+I.height/2}},30:function(z,U){return{x:z.x+U.width/2,y:z.y+z.height+U.height/2}},31:function(s,a){return{x:s.x+s.width/2,y:s.y+s.height+a.height/2}},32:function(U,n){return{x:U.x+U.width-n.width/2,y:U.y+U.height+n.height/2}},33:function(j,R){return{x:j.x+j.width+R.width/2,y:j.y+j.height+R.height/2}},34:function(b,v){return{x:b.x,y:b.y-v.height/2}},35:function(s,D){return{x:s.x+s.width,y:s.y-D.height/2}},36:function(M,L){return{x:M.x,y:M.y+M.height+L.height/2}},37:function(b,d){return{x:b.x+b.width,y:b.y+b.height+d.height/2}},38:function(U,r){return{x:U.x+U.width/4,y:U.y-r.height/2}},39:function(U,x){return{x:U.x+3*U.width/4,y:U.y-x.height/2}},40:function(y){return{x:y.x+y.width/4,y:y.y}},41:function(U){return{x:U.x+3*U.width/4,y:U.y}},42:function(q,L){return{x:q.x+q.width/4,y:q.y+L.height/2}},43:function(q,z){return{x:q.x+3*q.width/4,y:q.y+z.height/2}},44:function(U,D){return{x:U.x+U.width/2,y:U.y+U.height/2-D.height/2}},45:function(q){return{x:q.x+q.width/4,y:q.y+q.height/2}},46:function(x,G){return{x:x.x+x.width/2-G.width/2,y:x.y+x.height/2}},47:function(d,T){return{x:d.x+d.width/2+T.width/2,y:d.y+d.height/2}},48:function(S){return{x:S.x+3*S.width/4,y:S.y+S.height/2}},49:function(A,t){return{x:A.x+A.width/2,y:A.y+A.height/2+t.height/2}},50:function(x,A){return{x:x.x+x.width/4,y:x.y+x.height-A.height/2}},51:function(U,P){return{x:U.x+3*U.width/4,y:U.y+U.height-P.height/2}},52:function(A){return{x:A.x+A.width/4,y:A.y+A.height}},53:function(R){return{x:R.x+3*R.width/4,y:R.y+R.height}},54:function(N,X){return{x:N.x+N.width/4,y:N.y+N.height+X.height/2}},55:function(d,x){return{x:d.x+3*d.width/4,y:d.y+d.height+x.height/2}}};return _i(R)?function(x,D,b){return y[x](D,b?b:he)}:void 0}();hq(s,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var co=s.reverse,uo=s.transparent,Si=s.rectSelectBackground,Rb=s.dash,Jm=s.titleBackground,wb=s.titleIconBackground,zj=s.headerBackground,Ki=s.headerIconBackground,Ef=s.headerSeparator,Jp=s.headerLine,Eg=s.contentIconBackground,uj=s.contentLine,fn=(s.widgetIconHighlight,s.widgetIconBorder),Fo=(s.widgetIconGradient,s.imageBackground),nm=s.imageGradient,jb=s.highlight,Co=s.label,ll=s.labelSelect;
if($&&!R.noAlert){var wp=new Date,Fb=$.split("-"),db=new Date(wp.getFullYear(),wp.getMonth(),wp.getDate()),$=new Date(S(Fb[0],10),S(Fb[1],10)-1,S(Fb[2],10)),jm=db.getTime(),pl=$.getTime(),Kb=q+"_try",Uj=R.localStorage,gc=R.alert;if(Uj&&gc)if(pl>jm&&6048e5>pl-jm){var Tc=(pl-jm)/864e5;Uj&&Uj[Kb]!=Tc&&(Uj[Kb]=Tc,gc("HT for Web free trail license will expire in "+Tc+" days, please apply for a new license!"))}else jm>=pl&&gc("HT for Web free trail license expired!"),Uj&&delete Uj[Kb]}var ze={ms_ac:function(h,S){for(var b=S.ms_ac,v=0;v<b.length;v++)Gh(h,b[v])},ms_listener:function(d){d.addListeners=function(){for(var e=this,Y=0;Y<Tl.length;Y++)e["handle_"+Tl[Y]]&&Sd(Tl[Y],e.getView(),e)},d.removeListeners=function(){for(var J=this,T=0;T<Tl.length;T++)J["handle_"+Tl[T]]&&Mh(Tl[T],J.getView(),J)}},ms_fire:function(s){s.mp=function(o,z,V){this.addPropertyChangeListener(o,z,V)},s.ump=function(W,J){this.removePropertyChangeListener(W,J)},s.fp=function(l,B,M){return this.firePropertyChange(l,B,M)},s.addPropertyChangeListener=function(J,Y,U){var m=this;m._62I||(m._62I=new Tg),m._62I.add(J,Y,U)},s.removePropertyChangeListener=function(L,V){this._62I.remove(L,V)},s.firePropertyChange=function(J,i,q){if(i===q)return!1;var c=this,d={property:J,oldValue:i,newValue:q,data:c};return c._62I&&c._62I.fire(d),c.onPropertyChanged&&c.onPropertyChanged(d),!0}},ms_attr:function(h){h.a=function(p,G){var c=this;if(2===arguments.length)c.setAttr(p,G);else{if(!Gb(p))return c.getAttr(p);for(var J in p)c.setAttr(J,p[J])}return c},h.getAttr=function(m){return this._attrObject?this._attrObject[m]:x},h.setAttr=function(W,O){var w=this;w._attrObject||(w._attrObject={});var u=w._attrObject[W];O===x?delete w._attrObject[W]:w._attrObject[W]=O,w.fp&&w.fp("a:"+W,u,O)&&w.onAttrChanged&&w.onAttrChanged(W,u,O)},h.getSerializableAttrs=function(){var X,i={};for(X in this._attrObject)i[X]=1;return i}},ms_bnb:function(K){K.getBodyColor=function($){return $.s("body.color")},K.getBorderColor=function(O){return O.s("border.color")}},_51o:function(n){n.mi=function(y,l,j){this.addInteractorListener(y,l,j)},n.umi=function(s,u){this.removeInteractorListener(s,u)},n.fi=function(L){this.fireInteractorEvent(L)},n.addInteractorListener=function(O,S,p){var L=this;L._63I||(L._63I=new Tg),L._63I.add(O,S,p)},n.removeInteractorListener=function(w,Y){this._63I.remove(w,Y)},n.fireInteractorEvent=function(j){this._63I&&this._63I.fire(j)},n.setInteractors=function(r){var V=this,x=V._interactors;x&&x.each(function(K){K.tearDown()}),ro(r)&&(r=new yo(r)),V._interactors=r,r&&r.each(function(u){u.setUp()}),V.fp("interactors",x,r),V.invalidateSelection()},n.getInteractors=function(){return this._interactors}},_49o:function(q){q._44O=H,q._45O=H,q.addTopPainter=function(s){var I=this;I._44O||(I._44O=new yo),I._44O.contains(s)||(I._44O.add(s),I.redraw&&I.redraw())},q.removeTopPainter=function(T){var n=this;n._44O&&(n._44O.remove(T),n.redraw&&n.redraw())},q.addBottomPainter=function(F){var Q=this;Q._45O||(Q._45O=new yo),Q._45O.contains(F)||(Q._45O.add(F),Q.redraw&&Q.redraw())},q.removeBottomPainter=function(n){var Y=this;Y._45O&&(Y._45O.remove(n),Y.redraw&&Y.redraw())},q._93db=function(D,U){var A=this;A._45O&&A._45O.each(function(V){V.draw?V.draw(D,U):V.call(A,D,U)})},q._92db=function(m,Y){var L=this;L._44O&&L._44O.each(function(u){u.draw?u.draw(m,Y):u.call(L,m,Y)})}},ms_sm:function(r){r.sm=function(){return this.getSelectionModel()},r.setSelectableFunc=function(I){this.sm().setFilterFunc(I)},r.getSelectableFunc=function(){return this.sm().getFilterFunc()},r.getSelectionModel=function(){var n=this;return n._3o?n._3o:n.dm().sm()},r.isSelectionModelShared=function(){return!this._3o},r.setSelectionModelShared=function(x){var E=this,n=!E._3o,S=E._16o,U=E.dm();n!==x&&(E.invalidateSelection&&E.invalidateSelection(),x?(U.sm().ms(S,E),E._3o.ums(S,E),E._3o.dispose(),E._3o=H):(U.sm().ums(S,E),E._3o=new Cq(U),E._3o.ms(S,E)),E.onSelectionModelSharedChanged(),E.fp("selectionModelShared",n,x))},r.onSelectionModelSharedChanged=function(){var q=this;q.redraw(),q.invalidateSelection&&q.invalidateSelection()},r.removeSelection=function(){var H=this.dm(),A=H.getHistoryManager();A&&A.beginInteraction(),this.sm().toSelection().each(H.remove,H),A&&A.endInteraction()},r.selectAll=function(){var v=this;v.sm().ss(v.dm().toDatas(v.isVisible,v))},r.isSelected=function(f){return this.sm().co(f)},r.isSelectedById=function(r){var I=this.dm().getDataById(r);return I?this.isSelected(I):!1},r.isSelectable=function(e){return this.sm().isSelectable(e)}},ms_tx:function(K){K._64I=0,K._65O=0,K.isScrollable=function(){return this.getWidth()<this._64I},K._40o=function(){return this.isScrollable()},K.getLogicalPoint=function(F){return Em(F,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},K.tx=function(D){return D===x?this.getTranslateX():(this.setTranslateX(D),void 0)},K.getTranslateX=function(){return this._65O},K.setTranslateX=function(Y){var J=this,O=J.getWidth()-J._64I;O>Y&&(Y=O),Y>0&&(Y=0),Y=y(Y);var n=J._65O;J._65O=Y,J.fp(cd,n,Y)}},ms_ty:function(j){j._23Q=0,j._66O=0,j._41o=function(){return this.getHeight()<this._23Q},j.getLogicalPoint=function(D){return Em(D,this._canvas||this._view,this.tx?this.tx():0,this.ty())},j.ty=function(s){return s===x?this.getTranslateY():(this.setTranslateY(s),void 0)},j.getTranslateY=function(){return this._66O},j.setTranslateY=function(z){var B=this,b=B.getHeight()-B._23Q;b>z&&(z=b),z>0&&(z=0),z=y(z);var f=B._66O;B._66O=z,B.fp(sg,f,z)}},ms_txy:function(k){k._65O=0,k._66O=0,k.tx=function(g){return g===x?this.getTranslateX():(this.setTranslateX(g),void 0)},k.ty=function(m){return m===x?this.getTranslateY():(this.setTranslateY(m),void 0)},k.onTranslateEnded=function(){},k.setTranslate=function(v,f,Q){var S=this;if(Q=Bl(Q)){S._65I&&S._65I.stop(!0);var m=S.tx(),l=S.ty();Q.action=function(r){S.setTranslate(m+(v-m)*r,l+(f-l)*r)},Q._37o=function(){delete S._66I,delete S._65I,S.onTranslateEnded()},S._66I=1,S._65I=ni(Q)}else S.tx(v),S.ty(f)},k.getTranslateX=function(){return this._65O},k.setTranslateX=function(H){var m=this;H=m.adjustTranslateX(H);var T=m._65O;m._65O=H,m.fp(cd,T,H)},k.getTranslateY=function(){return this._66O},k.setTranslateY=function(j){var $=this;j=$.adjustTranslateY(j);var D=$._66O;$._66O=j,$.fp(sg,D,j)},k.adjustTranslateX=function(k){return y(k)},k.adjustTranslateY=function(L){return y(L)},k.translate=function(h,o,x){this.setTranslate(this.tx()+h,this.ty()+o,x)},k.getLogicalPoint=function(N){var G=this;return Em(N,this._canvas||G._view,G.tx(),G.ty())}},ms_dm:function(m){m.dm=function(Y){return Y?(this.setDataModel(Y),void 0):this.getDataModel()},m.getDataModel=function(){return this._dataModel}},ms_lp:function(Q){Q.lp=function(P){return this.getLogicalPoint(P)}},ms_v:function(F){F._disabled=!1,F.setDisabled=function(J,N){var W=this,q=W._disabled;q!==J&&(q&&(Mq(W._63O),delete W._63O),J&&(qr(W._view,W._63O=jc(N)),W.iv()),W._disabled=J,W.fp("disabled",q,J))},F.isDisabled=function(){return this._disabled},F.getView=function(){return this._view},F.addToDOM=function(){var v=this,G=v.getView(),Q=G.style;N.body.appendChild(G),Q.left="0",Q.right="0",Q.top="0",Q.bottom="0",R.addEventListener("resize",function(){v.iv()},!1)},F.getWidth=function(){return this._view.clientWidth},F.getHeight=function(){return this._view.clientHeight},F.setWidth=function(a){var r=this;r._view.style.width=a+sn,r.iv(),r.fp&&r.fp(wd,H,a)},F.setHeight=function(U){var F=this;F._view.style.height=U+sn,F.iv(),F.fp&&F.fp(aq,H,U)},F.setFocus=function(Z){var o=this,G=o._currentEditor;return Z&&G&&(G.getView&&(G=G.getView()),G.contains(Z.target))?!1:(Ao(o._view),o.endEditing&&o.endEditing(),o._41O("focus"),!0)},F.iv=function(c){this.invalidate(c)},F.invalidate=function(u){var U=this;U._68I||(U._68I=1,Le(U.validate,U,H,u),U.onInvalidated&&U.onInvalidated(),U._41O("invalidate"))},F.validate=function(){var D=this,r=D._view;if(D._68I&&(delete D._68I,r.parentNode))if(0===r.offsetWidth&&0===r.offsetHeight&&D._67I!==H)D._67I===x&&(D._67I=e.reinvalidateCount),D._67I>0?D._67I--:D._67I=H,D.iv();else{D._41O("beginValidate"),D.validateImpl(),D.onValidated&&D.onValidated(),D._41O("validate");var Y=D._63O;Y&&(r.lastChild!==Y&&(Mq(Y),qr(r,Y)),gp(Y,0,0,D.getWidth(),D.getHeight())),np(D)}},F.layout=function(j,T,y,D){1===arguments.length?gp(this,j):gp(this,j,T,y,D)},F.addViewListener=function(X,H,A){var O=this;O._67O||(O._67O=new Tg),O._67O.add(X,H,A)},F.removeViewListener=function(H,Z){this._67O.remove(H,Z)},F._41O=function(k){var c=this;c._67O&&(Kf(k)&&(k={kind:k}),c._67O.fire(k)),e.viewListener&&e.viewListener(c,k)}},ms_tip:function(m){m.enableToolTip=function(){var o=this;h||o._13o||(o._13o=function(y){var r=o.getToolTip(y);r!=H?e.toolTipContinual&&e.isToolTipShowing()?sp(y,r):(Ti(),qi={timeout:A(mj,Fc),e:y,info:r}):Ti()},o.getView().addEventListener(gs,o._13o,!1))},m.disableToolTip=function(){var N=this;N._13o&&(N.getView().removeEventListener(gs,N._13o,!1),delete N._13o)},m.getToolTip=function(f){var s=this;if(s.getDataAt){var O=s.getDataAt(f);return O?O.getToolTip():H}return s.getValue?yd(s.getValue()):void 0}},_52o:function(C){C._zoom=1,C._29I=he,C.zoomIn=function(j,l){this.setZoom(this._zoom*kf,j,l)},C.zoomOut=function(M,U){this.setZoom(this._zoom/kf,M,U)},C.zoomReset=function(G,H){this.setZoom(1,G,H)},C.scrollZoomIn=function(e){this.setZoom(this._zoom*Uf,H,e)},C.scrollZoomOut=function(Q){this.setZoom(this._zoom/Uf,H,Q)},C.pinchZoomIn=function(c){this.setZoom(this._zoom*Ab,H,c)},C.pinchZoomOut=function(D){this.setZoom(this._zoom/Ab,H,D)},C.adjustZoom=function(j){return Sm>j?Sm:j>Rh?Rh:j},C.getZoom=function(){return this._zoom},C.setZoom=function(C,m,v){var h=this;if(m=Bl(m)){h._14o&&h._14o.stop(!0);var x=h._zoom;m.action=function(Z){h._96O(x+(C-x)*Z,v)},m._37o=function(){delete h._zooming,delete h._14o,h.onZoomEnded()},h._zooming=1,h._14o=ni(m)}else h._96O(C,v)},C._96O=function(P,d){var o=this;if(P=o.adjustZoom(P),P!==o._zoom){o.validate();var Q=o._29I,H=o._zoom;0!==Q.width&&0!==Q.height&&(d=d?d:{x:Q.x+Q.width/2,y:Q.y+Q.height/2},o.tx((d.x-Q.x)*H-d.x*P),o.ty((d.y-Q.y)*H-d.y*P)),o._zoom=P,o.fp("zoom",H,P)}}}};hq(e,{baseZIndex:x,isTouchable:h,devicePixelRatio:R.devicePixelRatio?R.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:s.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(r){return r*r},labelColor:Co,labelSelectColor:ll,labelFont:(h?"15":"12")+"px arial, sans-serif",widgetIndent:h?30:20,widgetRowHeight:h?30:20,widgetHeaderHeight:h?32:22,widgetTitleHeight:h?34:24,scrollBarColor:uo,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:h?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,getVersion:function(){return"4.3"},setCompType:function(A,W){Qe[A]=W},getCompType:function(f){return Qe[f]},numberListener:function(){var f={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(p){var J=p.keyCode;f[J]||65===J&&e.isCtrlDown(p)||J>=35&&39>=J||(p.shiftKey||48>J||J>57)&&(96>J||J>105)&&p.preventDefault()}}(),preventDefault:function(W){var L=W.target.tagName;("DIV"===L||"CANVAS"===L)&&(W.preventDefault(),W.preventManipulation&&W.preventManipulation())},getWindowInfo:function(){var P=N.documentElement,W=P&&(P.scrollLeft||P.scrollTop)?P:N.body;return{target:W,left:W.scrollLeft,top:W.scrollTop,width:R.innerWidth||W.clientWidth,height:R.innerHeight||W.clientHeight}},isDragging:function(){return!!Oe},isLeftButton:function(V){return h?!0:0===V.button},getTouchCount:function(y){return h?y.touches.length:1},isDoubleClick:function(){var E=new Date,S=H,r=new Date,q=H;return function(G){if(Gn=new Date,Kj=Gn.getTime(),h){var f=G.type,O=f+"_isDoubleClick";if(G[O]===x){var $=Ok(G);"touchstart"===f?(G[O]=S&&Io(S,$)<20&&Kj-E.getTime()<500,E=Gn,S=$):(G[O]=q&&Io(q,$)<20&&Kj-r.getTime()<500,r=Gn,q=$)}return G[O]}return 2===G.detail}}(),isShiftDown:function(D){return D?D.shiftKey:Kq["16"]},isCtrlDown:function(p){return p?m?p.metaKey:p.ctrlKey:m?Kq["91"]:Kq["17"]},getClientPoint:function($){return h&&($=Jd($)),{x:$.clientX,y:$.clientY}},getPagePoint:function(C){return h&&(C=Jd(C)),{x:C.pageX,y:C.pageY}},createObject:function(v,Q){var p=new v;for(var c in Q){var P=Ph(c),O=Q[c];p[P]?(p[P](O),"setToolTip"===P&&p.enableToolTip&&p.enableToolTip()):p[c]=O}return p},setImage:function(T,A,l,O){var w=arguments.length;4===w?Vp(T,O,A,l):2===w?Kf(A)?Vp(T,A):On[T]=A:1===w&&Vp(T,T)},getImage:function(_,Z){var s;if(_==H)return H;if(Gb(_)?s=_:(s=On[_],_&&s===x&&(eo&&eo[_]||Vp(_,_))),Z&&s&&s.tagName){s.colors||(s.colors={});var z=s.colors[Z];return z||(z=Ri(s,of(Z),s.width,s.height),s.colors[Z]=z),z}return s},getId:function(){var y=1;return function(){return++y}}(),callLater:function(Z,U,G,u){var r=function(){Z.apply(U,G)};return u?A(r,u):R.requestAnimationFrame(r)},clone:function(T){if(!T)return H;if(ro(T))return T.slice(0);if(Gb(T)){var z,A={};for(z in T)A[z]=T[z];return A}return T},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(B,u){if(B===u)return 0;if(B==H&&u!=H)return 1;if(B!=H&&u==H)return-1;if(B==H&&u==H)return 0;var K,p=typeof B,Y=typeof u;return p===Lq&&Y===Lq?K=B.localeCompare(u):p===ei&&Y===ei&&(K=B-u),K===x&&(K=(""+B).localeCompare(""+u)),K>0?1:0>K?-1:0},getClassMap:function(){return vc},getClass:function(p){if(Kf(p)){var O,A=vc[p];if(!A){O=p.split("."),A=R;for(var F=0;F<O.length;F++)A=A[O[F]];vc[p]=A}return A}return p},def:function(v,$,j){var T,V,z,w=function(){};if(w.prototype=$.prototype,T=new w,Kf(v)){if(vc[v])throw"'"+v+"' alreay defined";z=Ob(v),T.getClassName=function(){return v}}else z=v;if(T.constructor=z,T.getClass=function(){return z},T.getSuperClass=function(){return $},j)for(V in j)ze[V]&&ze.hasOwnProperty(V)?ze[V](T,j):T[V]=j[V];z.prototype=T,z.superClass=$.prototype},startAnim:function(){var Q=function(g){g.duration&&(g.startTime=yc()),g.timeId=Le(g.tick,H,H,g.interval)};return function(c){return c=ef(c),c.easing=c.easing||e.animEasing,c.duration||c.frames||(c.duration=e.animDuration),c.t=0,c.duration?c.interval=0:(c.frame=0,c.interval=c.interval||10),c.tick=function(){if(c.duration){var i=(yc()-c.startTime)/c.duration;i>1&&(i=1),c.t=i,c.action(c.easing(i),i),1===i?c.stop():c._isPaused||(c.timeId=Le(c.tick))}else c.frame++,i=c.t=c.frame/c.frames,c.action(c.easing(i),i),c.frame<c.frames?c._isPaused||(c.timeId=Le(c.tick,H,H,c.interval)):c.stop()},c.resume=function(){c._isPaused&&(delete c._isPaused,c.duration?c.t<1&&(c.startTime=yc()-c.duration*c.t,c.timeId=Le(c.tick)):c.frame<c.frames&&(c.timeId=Le(c.tick,H,H,c.interval)))},c.pause=function(){c._isPaused=!0},c.stop=function(d){c.isRunning()&&(c.duration?c.t<1&&d&&(c.t=1,c.action(c.easing(1))):c.frame<c.frames&&d&&(c.frame=c.frames,c.action(c.easing(1))),c._37o&&c._37o(),c.finishFunc&&c.finishFunc(),Dm(c.timeId,!c.duration),delete c.timeId)},c.isRunning=function(){return c.timeId!=H},c.delay?Le(Q,H,[c],c.delay):Q(c),c}}(),getTextSize:function(){var n={},U=N?Lm().getContext("2d"):H;return function(W,p){U.font=W?W:eg;var P=n[U.font];return P||(P=2*U.measureText("e").width+4,n[U.font]=P),{width:U.measureText(p).width+4,height:P}}}(),drawText:function(K,Y,m,D,i,I,d,y,C,G){if(Y!=H){var F=Yb(m,Y),t={};t.y=G&&G!==xs?G===Ol?I+F.height/2:I+y-F.height/2:I+y/2,t.x=C&&C!==U?C===X?i+d-F.width/2:i+d/2:i+F.width/2,Fp(K,Y,t,m,D)}},getDistance:function(z,q){var j=z.length;return q?3===j?a(Q(z[0]-q[0])+Q(z[1]-q[1])+Q(z[2]-q[2])):2===j?a(Q(z[0]-q[0])+Q(z[1]-q[1])):z.z===x?a(Q(q.x-z.x)+Q(q.y-z.y)):a(Q(q.x-z.x)+Q(q.y-z.y)+Q(q.z-z.z)):3===j?a(Q(z[0])+Q(z[1])+Q(z[2])):2===j?a(Q(z[0])+Q(z[1])):void 0},brighter:function(w,z){return rh(w,z?z:40)},darker:function(D,P){return rh(D,P?P:-40)},unionPoint:function(s,Z){if(!s)return H;if(2===arguments.length)return s&&Z?{x:P(s.x,Z.x),y:P(s.y,Z.y),width:t(s.x-Z.x),height:t(s.y-Z.y)}:H;var A=s;if(A._as&&(A=A._as),A.length===x)return H;var J=A.length;if(0>=J)return H;for(var q=1,R=A[0],m={x:R.x,y:R.y,width:0,height:0};J>q;q++){R=A[q];var E=P(m.x,R.x),K=W(m.x+m.width,R.x),$=P(m.y,R.y),L=W(m.y+m.height,R.y);m.x=E,m.y=$,m.width=K-E,m.height=L-$}return m},unionRect:function(u,t){if(u&&!t)return ef(u);if(!u&&t)return ef(t);if(u&&t){var g={x:P(u.x,t.x),y:P(u.y,t.y)};return g.width=W(u.x+u.width,t.x+t.width)-g.x,g.height=W(u.y+u.height,t.y+t.height)-g.y,g}return H},containsPoint:function(n,a){return!(!n||a.x<n.x||a.y<n.y||a.x>n.x+n.width||a.y>n.y+n.height)},containsRect:function(c,j){if(!c||!j)return!1;var P=j.x,O=j.y,I=j.width,a=j.height,G=c.width,B=c.height;if(0>(G|B|I|a))return!1;var S=c.x,y=c.y;if(S>P||y>O)return!1;if(G+=S,I+=P,P>=I){if(G>=S||I>G)return!1}else if(G>=S&&I>G)return!1;if(B+=y,a+=O,O>=a){if(B>=y||a>B)return!1}else if(B>=y&&a>B)return!1;return!0},intersectsRect:function(V,v){if(!V||!v)return!1;var z=v.width,M=v.height,J=V.width,X=V.height;if(0>=J||0>=X||0>=z||0>=M)return!1;var m=v.x,$=v.y,b=V.x,N=V.y;return J+=b,X+=N,z+=m,M+=$,J>m&&X>$&&z>b&&M>N},intersection:function(I,U){if(!I||!U)return H;var Z=U.x,X=U.y,E=I.x,g=I.y,b=Z,k=X,R=E,y=g;return b+=U.width,k+=U.height,R+=I.width,y+=I.height,E>Z&&(Z=E),g>X&&(X=g),b>R&&(b=R),k>y&&(k=y),b-=Z,k-=X,0>=b||0>=k?H:{x:Z,y:X,width:b,height:k}},grow:function(V,o){V.x-=o,V.y-=o,V.width=V.width+2*o,V.height=V.height+2*o},getLogicalPoint:function(m,l,a,k,V,Z){var e=l.getBoundingClientRect();return m=h?Jd(m):m,{x:(m.clientX-e.left+l.scrollLeft-(a||0))/(V||1),y:(m.clientY-e.top+l.scrollTop-(k||0))/(Z||1)}},removeHTML:function(){var i;return function(L){return L&&L.parentNode?i===L?!0:(i=L,L.parentNode.removeChild(L),i=H,!0):!1}}(),getToolTipDiv:function(){if(!jj){jj=Vb(),bd=Vb();var M=jj.style;e.baseZIndex!=H&&(M.zIndex=S(e.baseZIndex)+3+""),M.whiteSpace="nowrap",M.color=e.toolTipLabelColor,M.background=e.toolTipBackground,M.font=e.toolTipLabelFont,M.padding="5px",M.boxShadow="0px 0px 3px "+e.toolTipShadowColor}return jj},isToolTipShowing:function(){return jj&&jj.parentNode?!0:bd&&bd.parentNode?!0:!1},hideToolTip:function(){Mq(jj),Mq(bd),If()},showToolTip:function(c,m){if(!c||m==H)return Ti(),void 0;e.getToolTipDiv();var R,A;if(m.html?(m=m.html,R=bd,Mq(jj)):(R=jj,Mq(bd)),A=R.style,R.innerHTML=m,R.parentNode||qr(N.body,R),c.target){c=el(c);var W=Vl(),j=c.x,o=c.y,L=h?60:12;if(h){var p=R.getBoundingClientRect();A.left=j-p.width/2+sn,A.top=o-p.height-L<W.top?o+L+sn:o-p.height-L+sn}else{A.left=j+L+sn,A.top=o+L+sn;var p=R.getBoundingClientRect();p.left+p.width>W.width&&(A.left=j-L-p.width+sn),p.top+p.height>W.height&&(A.top=o-L-p.height+sn),p.left<0&&(A.left=j+L+sn),p.top<0&&(A.top=o+L+sn)}}else A.left=c.x+sn,A.top=c.y+sn;If()},startDragging:function(g,c){g!==Oe&&(Oe?h?Oe.handleWindowTouchEnd(c):Oe.handleWindowMouseUp(c):h?(R.addEventListener(jr,Yg,!1),R.addEventListener(Zj,rk,!1)):(R.addEventListener(gs,kb,!1),R.addEventListener(xc,ig,!1)),Oe=g)},getImageMap:function(){return On},toBoundaries:function(h,V,J,Y){var L=[];return sl(h,V,J,Y).forEach(function(c){var q=[];c.forEach(function(M){q.push(M.x,M.y)}),L.push(q)}),L},getCurrentKeyCodeMap:function(){return Kq},drawCenterImage:function(C,t,j,x,e,u,N){var d=Dn(t,e),X=Kc(t,e);Xj(C,t,y(j-d/2),y(x-X/2),d,X,e,u,N)},drawStretchImage:function(d,Y,C,T,X,G,U,w,H,i){var c,m=Dn(Y,w),D=Kc(Y,w);"uniform"===C?(c=P(G/m,U/D),m*=c,D*=c,T+=y((G-m)/2),X+=y((U-D)/2),G=m,U=D):C===Cp&&((m>G||D>U)&&(c=P(G/m,U/D),m*=c,D*=c),T+=y((G-m)/2),X+=y((U-D)/2),G=m,U=D),Xj(d,Y,T,X,G,U,w,H,i)},toCanvas:function(o,B,Y,H,F,s,u){o=Dp(o,u),B=B||Dn(o,F),Y=Y||Kc(o,F);var C=Lm();Fe(C,B,Y,1);var G=Qi(C);return gd(G,o,H,0,0,B,Y,F,s,u),G.restore(),C},createElement:function(q,A,d,c){var P=N.createElement(q);return dc(P,A||s.widgetBorder,2),P.style.font=d?d:eg,c!=H&&(P.value=c),P},containedInView:function(R,Q){var $=ie(Q).getBoundingClientRect();return ap({x:$.left,y:$.top,width:$.width,height:$.height},Ok(R))},isIsolating:function(){return cn},setIsolating:function(e){cn=e},toColorData:Ek},!0),hq(f,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var Mk=e.disabledOpacity,Fc=e.toolTipDelay,Xe=e.devicePixelRatio,Nr=e.autoMakeVisible,zc=e.autoHideScrollBar,og=e.imageGradient,sp=e.showToolTip,Ti=e.hideToolTip,Ep=e.dashPattern,sd=e.lineCap,zg=e.lineJoin,em=e.labelColor,yb=e.labelSelectColor,eg=e.labelFont,$n=e.widgetIndent,id=e.widgetRowHeight,wh=e.widgetHeaderHeight,bp=e.widgetTitleHeight,Gm=e.scrollBarColor,Hh=e.scrollBarSize,Rf=e.scrollBarTimeout,Nn=e.scrollBarMinLength,kr=e.scrollBarInteractiveSize,kf=e.zoomIncrement,Uf=e.scrollZoomIncrement,Ab=e.pinchZoomIncrement,Rh=e.zoomMax,Sm=e.zoomMin,zl=e.createObject,Cg=e.preventDefault,$b=e.setImage,Dp=e.getImage,Ih=e.drawCenterImage,gd=e.drawStretchImage,xl=e.getId,Le=e.callLater,ae=e.sortFunc,ef=e.clone,Ob=e.getClass,ni=e.startAnim,Go=e.brighter,bg=e.darker,Gi=e.drawText,Yb=e.getTextSize,Ue=e.isLeftButton,ck=e.getTouchCount,Ei=e.isDoubleClick,tl=e.isShiftDown,Ji=e.isCtrlDown,Ok=e.getClientPoint,el=e.getPagePoint,Io=e.getDistance,Ro=e.unionPoint,re=e.unionRect,ap=e.containsPoint,Bp=e.containsRect,fl=e.intersectsRect,Qk=e.intersection,Vl=e.getWindowInfo,Zb=e.grow,Em=e.getLogicalPoint,ce=e.startDragging,Mq=e.removeHTML,Ai=e.createElement,rm=e.segmentResolution,Wc=e.shapeResolution,gl=e.shapeSide,oc=e.def,Ae=function(S,r,g){oc(q+"."+S,r,g)};hq(e,{toolTipLabelColor:em,toolTipLabelFont:eg,toolTipBackground:s.toolTipBackground,toolTipShadowColor:uo},!0);var Vc=1e-6,vj="undefined"!=typeof Uint16Array?Uint16Array:Array,Po="undefined"!=typeof Float32Array?Float32Array:Array,Wg=function(I,D,z){var H=[I[0]-D[0],I[1]-D[1],I[2]-D[2]];if(z){var x=Io(H);x>0&&(H[0]/=x,H[1]/=x,H[2]/=x)}return H},rl=function(h){return[-h[0],-h[1],-h[2]]},ql=function(V,B){return 3===V.length?V[0]*B[0]+V[1]*B[1]+V[2]*B[2]:V[0]*B[0]+V[1]*B[1]},Gk=function(){var w=new Po(16);return w[0]=1,w[1]=0,w[2]=0,w[3]=0,w[4]=0,w[5]=1,w[6]=0,w[7]=0,w[8]=0,w[9]=0,w[10]=1,w[11]=0,w[12]=0,w[13]=0,w[14]=0,w[15]=1,w},Xq=Gk(),lm=function(u){var C=new Po(16);return C[0]=u[0],C[1]=u[1],C[2]=u[2],C[3]=u[3],C[4]=u[4],C[5]=u[5],C[6]=u[6],C[7]=u[7],C[8]=u[8],C[9]=u[9],C[10]=u[10],C[11]=u[11],C[12]=u[12],C[13]=u[13],C[14]=u[14],C[15]=u[15],C},Yo=function(y,K){return y[0]=K[0],y[1]=K[1],y[2]=K[2],y[3]=K[3],y[4]=K[4],y[5]=K[5],y[6]=K[6],y[7]=K[7],y[8]=K[8],y[9]=K[9],y[10]=K[10],y[11]=K[11],y[12]=K[12],y[13]=K[13],y[14]=K[14],y[15]=K[15],y},gb=function(N){return N[0]=1,N[1]=0,N[2]=0,N[3]=0,N[4]=0,N[5]=1,N[6]=0,N[7]=0,N[8]=0,N[9]=0,N[10]=1,N[11]=0,N[12]=0,N[13]=0,N[14]=0,N[15]=1,N},Dq=function(o,D){var l=o[0],L=o[1],g=o[2];return o[0]=D[0]*l+D[4]*L+D[8]*g+D[12],o[1]=D[1]*l+D[5]*L+D[9]*g+D[13],o[2]=D[2]*l+D[6]*L+D[10]*g+D[14],o},$o=function(Y,H){var A=Y[0],k=Y[1],Q=Y[2],$=Y[3];return Y[0]=H[0]*A+H[4]*k+H[8]*Q+H[12]*$,Y[1]=H[1]*A+H[5]*k+H[9]*Q+H[13]*$,Y[2]=H[2]*A+H[6]*k+H[10]*Q+H[14]*$,Y[3]=H[3]*A+H[7]*k+H[11]*Q+H[15]*$,Y},Cb=function(){var M,u,Q,Y,b=Jn(_e[1]+_e[7]),h=Jn(_e[0]+_e[3]-_e[10]),t=Jn(_e[8]+2),Z=function(){return u=Q.charAt(M),M+=1,u},_=function(){var N="";if(u===t)for(;Z();){if(u===t)return Z(),N;N+=u}else Z()},B=function(){for(;u&&" ">=u;)Z()},m=function(){var t,z={};if(u===b){if(Z(),B(),u===h)return Z(),z;for(;u;){if(t=_(),B(),Z(),z[t]=Y(),B(),u===h)return Z(),z;Z(),B()}}};return Y=function(){switch(B(),u){case b:return m();default:return _()}},function(S){if(r={},S){var C;if(Q=S,M=0,u=" ",C=Y(),B(),!u)return C}}}(),fk=function(M,T){if(T){var z=D(T),C=L(T),I=M[4],h=M[5],a=M[6],V=M[7],S=M[8],k=M[9],f=M[10],R=M[11];M[4]=I*C+S*z,M[5]=h*C+k*z,M[6]=a*C+f*z,M[7]=V*C+R*z,M[8]=S*C-I*z,M[9]=k*C-h*z,M[10]=f*C-a*z,M[11]=R*C-V*z}},Up=function(A,b){if(b){var U=D(b),e=L(b),$=A[0],g=A[1],Q=A[2],X=A[3],r=A[8],s=A[9],B=A[10],m=A[11];A[0]=$*e-r*U,A[1]=g*e-s*U,A[2]=Q*e-B*U,A[3]=X*e-m*U,A[8]=$*U+r*e,A[9]=g*U+s*e,A[10]=Q*U+B*e,A[11]=X*U+m*e}},di=function(U,P){if(P){var x=D(P),d=L(P),T=U[0],R=U[1],l=U[2],A=U[3],w=U[4],G=U[5],g=U[6],Y=U[7];U[0]=T*d+w*x,U[1]=R*d+G*x,U[2]=l*d+g*x,U[3]=A*d+Y*x,U[4]=w*d-T*x,U[5]=G*d-R*x,U[6]=g*d-l*x,U[7]=Y*d-A*x}},Pq=function(J,R,A){return xm(H,A===!1?H:J.s3(),J.r3(),J.getRotationMode(),J.p3(),H,R)},xm=function(a,K,e,o,J,L,d){return L||(L=Gk()),J&&ob(L,J),ik(L,e,o),d&&rc(L,L,d),K&&Ud(L,K),a&&rc(L,L,a),L},Nm=function(K,M,j){M=S(M),j=S(j);var V=this;V.g=K,V._84O=M,V._85O=j,V._70I=!0,V.F=0,V._83O=M+j,V.pen={x:0,y:0}},sr="lineDashOffset",fb="setLineDash",xq=function(D){for(var E in D)1===E.length&&(sr=D[E]);return E?1:0},mn=function(G,n,D){return xf(n)?G:G[fb]?(G[fb](n),D&&(G.lineDashOffset=D),G):new Nm(G,n[0],n.length>1?n[1]:n[0])},wk=function(B,g){!xf(g)&&B[fb]&&(B[fb](qh),B.lineDashOffset=0)};oc(Nm,O,{_69I:6,moveTo:function(n,c){var U=this,b=U.pen;b.x=n,b.y=c,U.g.moveTo(n,c),U.start||(U.start={x:n,y:c})},lineTo:function(w,E){var B=this,J=B.pen,$=w-J.x,g=E-J.y,I=l(g,$),e=L(I),W=D(I),A=B._23O(J.x,J.y,w,E),K=B._85O,r=B._84O,X=B._83O;if(B.F){if(B.F>A)return B._70I?B._72I(w,E):B.moveTo(w,E),B.F-=A,void 0;if(B._70I?B._72I(J.x+e*B.F,J.y+W*B.F):B.moveTo(J.x+e*B.F,J.y+W*B.F),A-=B.F,B.F=0,B._70I=!B._70I,!A)return}var G=p(A/X);if(G){for(var u=e*r,z=W*r,V=e*K,n=W*K,S=0;G>S;S++)B._70I?(B._72I(J.x+u,J.y+z),B.moveTo(J.x+V,J.y+n)):(B.moveTo(J.x+V,J.y+n),B._72I(J.x+u,J.y+z));A-=X*G}B._70I?A>r?(B._72I(J.x+e*r,J.y+W*r),B.moveTo(w,E),B.F=K-(A-r),B._70I=!1):(B._72I(w,E),A===r?(B.F=0,B._70I=!B._70I):(B.F=r-A,B.moveTo(w,E))):A>K?(B.moveTo(J.x+e*K,J.y+W*K),B._72I(w,E),B.F=r-(A-K),B._70I=!0):(B.moveTo(w,E),A===K?(B.F=0,B._70I=!B._70I):B.F=K-A)},quadraticCurveTo:function(W,C,e,d){var m,j=this,y=j.pen,J=y.x,f=y.y,I=j._22O(J,f,W,C,e,d),S=0,F=0,O=j._85O,U=j._84O;if(j.F){if(j.F>I)return j._70I?j._71I(W,C,e,d):j.moveTo(e,d),j.F-=I,void 0;if(S=j.F/I,m=j._20O(J,f,W,C,e,d,S),j._70I?j._71I(m[2],m[3],m[4],m[5]):j.moveTo(m[4],m[5]),j.F=0,j._70I=!j._70I,!I)return}var v=I-I*S,L=p(v/j._83O),Q=U/I,q=O/I;if(L)for(var z=0;L>z;z++)j._70I?(F=S+Q,m=j._21O(J,f,W,C,e,d,S,F),j._71I(m[2],m[3],m[4],m[5]),S=F,F=S+q,m=j._21O(J,f,W,C,e,d,S,F),j.moveTo(m[4],m[5])):(F=S+q,m=j._21O(J,f,W,C,e,d,S,F),j.moveTo(m[4],m[5]),S=F,F=S+Q,m=j._21O(J,f,W,C,e,d,S,F),j._71I(m[2],m[3],m[4],m[5])),S=F;v=I-I*S,j._70I?v>U?(F=S+Q,m=j._21O(J,f,W,C,e,d,S,F),j._71I(m[2],m[3],m[4],m[5]),j.moveTo(e,d),j.F=O-(v-U),j._70I=!1):(m=j._19O(J,f,W,C,e,d,S),j._71I(m[2],m[3],m[4],m[5]),I===U?(j.F=0,j._70I=!j._70I):(j.F=U-v,j.moveTo(e,d))):v>O?(F=S+q,m=j._21O(J,f,W,C,e,d,S,F),j.moveTo(m[4],m[5]),m=j._19O(J,f,W,C,e,d,F),j._71I(m[2],m[3],m[4],m[5]),j.F=U-(v-O),j._70I=!0):(j.moveTo(e,d),v===O?(j.F=0,j._70I=!j._70I):j.F=O-v)},bezierCurveTo:function(){var W=arguments;this.pen={x:W[4],y:W[5]},this.g.bezierCurveTo(W[0],W[1],W[2],W[3],W[4],W[5])},arc:function(R,k,M,f,O,w){w||(f=-f,O=-O),Qq(this,R,k,f,O-f,M,M,!1)},rect:function($,o,p,l){var C=this;C.pen={x:$,y:o},C.moveTo($,o),C.lineTo($,o+l),C.lineTo($+p,o+l),C.lineTo($+p,o),C.lineTo($,o)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(C,n,H,J){var W=H-C,j=J-n;return a(W*W+j*j)},_22O:function(r,Q,x,A,C,K,p){for(var _,R,m,t,F,S,f,c=0,s=r,$=Q,J=p>0?p:this._69I,X=1;J>=X;X++)m=X/J,t=1-m,F=t*t,S=2*m*t,f=m*m,_=F*r+S*x+f*C,R=F*Q+S*A+f*K,c+=this._23O(s,$,_,R),s=_,$=R;return c},_21O:function(t,o,u,G,c,M,I,i){var e=this;if(0===I)return e._20O(t,o,u,G,c,M,i);if(1===i)return e._19O(t,o,u,G,c,M,I);var B=e._20O(t,o,u,G,c,M,i);return B.push(I/i),e._19O.apply(e,B)},_20O:function(M,c,$,k,D,G,i){if(1!==i){var o=$+(D-$)*i,V=k+(G-k)*i;$=M+($-M)*i,k=c+(k-c)*i,D=$+(o-$)*i,G=k+(V-k)*i}return[M,c,$,k,D,G]},_19O:function(I,A,s,H,y,F,p){if(1!==p){var J=I+(s-I)*p,R=A+(H-A)*p;s+=(y-s)*p,H+=(F-H)*p,I=J+(s-J)*p,A=R+(H-R)*p}return[I,A,s,H,y,F]},_72I:function(b,I){var j=this.pen;(b!==j.x||I!==j.y)&&(j.x=b,j.y=I,this.g.lineTo(b,I))},_71I:function(G,Y,f,c){var b=this.pen;(G!==f||Y!==c||f!==b.x||c!==b.y)&&(b.x=f,b.y=c,this.g.quadraticCurveTo(G,Y,f,c))}});var dh=s.chart,kd=e.compStack=[],Nh=/^style@/,Zo=/^attr@/,wi=/^field@/,Dn=function(j,T){return j?wo(j.width,T):0},Kc=function(p,c){return p?wo(p.height,c):0},wo=function(t,T,g){if(!t||!t.func)return t;var F,Y=t.func,U=t.value;return F=hh(Y)?Y(T,g):T?Nh.test(Y)?T.s(Y.slice(6)):Zo.test(Y)?T.a(Y.slice(5)):wi.test(Y)?T[Y.slice(6)]:T[Y]?T[Y](g):U:U,U!==x&&F==H?U:F},Xj=e.drawImage=function(){var q,T,B,X,K,m=function(G,V,b){var d=G[V];return d&&d.func?(d=wo(d,T,B),b&&(d=b(d))):b&&(d=G[V]=b(d)),d},c=function(J,O){var w=m(J,O);if(K&&w){var F=of(K);return w=Ek(w),"rgba("+p(w[0]*F[0])+","+p(w[1]*F[1])+","+p(w[2]*F[2])+","+w[3]+")"}return w},i=function(y){if(ro(y)){for(var $=new yo,L=y.length,Z=0;L>Z;Z+=2)$.add({x:y[Z],y:y[Z+1]});y=$}return y},Z=function(z,u){var S=m(z,Un);if(ro(S)){var $=S.length,f=m(z,"relative"),N=u.width,H=u.height;if(4===$)S={x:S[0],y:S[1],width:S[2],height:S[3]},f&&(S.x*=N,S.y*=H,S.width*=N,S.height*=H);else if(3===$){var X=S[0];S={width:S[1],height:S[2]},f&&(S.width*=N,S.height*=H),X=Ui(X,u,S),S.x=X.x-S.width/2,S.y=X.y-S.height/2}var C=m(z,"offsetX");C&&(S.x+=C),C=m(z,"offsetY"),C&&(S.y+=C)}return S},F=function(H){return ro(H)?new yo(H):H},g=function(W,V){if(W){var $=V.x+V.width/2,M=V.y+V.height/2;q.save(),Vj(q,$,M),pd(q,W),Vj(q,-$,-M)}},Y=function(c){c&&q.restore()},f=function(E,T,W){var R=m(E,"path"),P=m(E,Bh),G=H,Z=oe(null,R);if(W||(W=E.unionRect,W||(W=Ro(Z),E.path.func||(E.unionRect=W)),G=W),W){G||(G=E.unionRect,G||(G=Ro(Z),E.path.func||(E.unionRect=G)));var U=Pr(G,W);if(U)g(P,G);else{var D=G.width,A=G.height,v=W.width,$=W.height,h=v/D,F=$/A;q.save(),Vj(q,W.x+v/2,W.y+$/2),q.scale(h,F),P&&pd(q,P),Vj(q,-G.x-D/2,-G.y-A/2)}var d=m(E,"borderPattern"),K=mn(q,d),o=c(E,"background"),b=c(E,"borderColor"),L=m(E,"borderWidth"),i=m(E,"gradient"),f=c(E,"gradientColor"),S=m(E,"border3d"),V=m(E,"border3dColor"),t=m(E,"border3dAccuracy"),J=q.lineJoin,O=q.lineCap;if(q.lineJoin=m(E,"borderJoin")||zg,q.lineCap=m(E,"borderCap")||sd,o?(Wf(q,o,i,f,G),oe(q,R),q.fill(),K!==q&&oe(q,R)):oe(q,R),L&&b&&(q.lineWidth=L,q.strokeStyle=b,q.stroke(),S&&Eq(q,b,V,L,X,t)),wk(q,d),m(E,"dash")){var s=m(E,"dashWidth")||L;if(s>0){d=m(E,"dashPattern")||Ep;var K=mn(q,d,m(E,"dashOffset")),z=m(E,"dashColor")||Rb;K!==q&&oe(q,R),q.strokeStyle=z,q.lineWidth=s,q.stroke(),m(E,"dash3d")&&Eq(q,z,m(E,"dash3dColor"),s,X,m(E,"dash3dAccuracy")),wk(q,d)}}T===Un&&jo(q,o,m(E,"depth"),G),q.lineJoin=J,q.lineCap=O,U?Y(P):q.restore()}},O=function(f,u,U){var y=m(f,zh,i),z=m(f,Bh),r=u===Ad,I=H;if(!U&&r&&(U=f.unionRect,U||(U=Ro(y),f.points.func||(f.unionRect=U)),I=U),U){r?I||(I=f.unionRect,I||(I=Ro(y),f.points.func||(f.unionRect=I))):I=U;var a=Pr(I,U);if(a)g(z,I);else{var P=I.width,l=I.height,O=U.width,n=U.height,E=O/P,W=n/l;q.save(),Vj(q,U.x+O/2,U.y+n/2),q.scale(E,W),z&&pd(q,z),Vj(q,-I.x-P/2,-I.y-l/2)}var J,p,j,b,v=m(f,"borderPattern"),o=mn(q,v),e=c(f,"background"),L=Dp(m(f,"repeatImage"),K),s=c(f,"borderColor"),w=m(f,"borderWidth"),D=m(f,"segments",F),x=m(f,"gradient"),Z=c(f,"gradientColor"),V=m(f,"border3d"),k=m(f,"border3dColor"),C=m(f,"border3dAccuracy"),R=m(f,"closePath"),Q=q.lineJoin,S=q.lineCap;if(q.lineJoin=m(f,"borderJoin")||zg,q.lineCap=m(f,"borderCap")||sd,r?e||L?(L?li(q,L):Wf(q,e,x,Z,I),sc(q,y,D,R),q.fill(),o!==q&&sc(o,y,D,R)):sc(o,y,D,R):("roundRect"===u?J=m(f,"cornerRadius"):"polygon"===u?J=m(f,"polygonSide"):"arc"===u&&(J=m(f,"arcFrom"),p=m(f,"arcTo"),j=m(f,"arcClose"),b=m(f,"arcOval")),e||L?(L?li(q,L):Wf(q,e,x,Z,I),Xn(q,u,I,J,p,j,b),q.fill(),q!==o&&Xn(o,u,I,J,p,j,b)):Xn(o,u,I,J,p,j,b)),w&&s&&(q.lineWidth=w,q.strokeStyle=s,q.stroke(),V&&Eq(q,s,k,w,X,C)),wk(q,v),m(f,"dash")){var d=m(f,"dashWidth")||w;if(d>0){v=m(f,"dashPattern")||Ep;var o=mn(q,v,m(f,"dashOffset")),N=m(f,"dashColor")||Rb;o!==q&&(r?sc(o,y,D,R):Xn(o,u,I,J,p,j,b)),q.strokeStyle=N,q.lineWidth=d,q.stroke(),m(f,"dash3d")&&Eq(q,N,m(f,"dash3dColor"),d,X,m(f,"dash3dAccuracy")),wk(q,v)}}u===Un&&jo(q,e,m(f,"depth"),I),q.lineJoin=Q,q.lineCap=S,a?Y(z):q.restore()}},j=function(V,R){var Z=K,D=K||m(V,Oo),n=Dp(m(V,"name"),D);n&&(gd(q,n,m(V,"stretch"),R.x,R.y,R.width,R.height,T,B,D),K=Z)},s=function(T,i){var j=m(T,"text");
j!=H&&Gi(q,j,m(T,"font"),c(T,Oo),i.x,i.y,i.width,i.height,m(T,"align"),m(T,"vAlign"))},k=function(G,v){Jr(q,c(G,Oo),v.x,v.y,v.width,v.height,m(G,"width"))},_=function(R,G){var Q=m(R,$j),p=0;if(Q&&(Q.forEach(function(e){p+=e}),p>0)){for(var n=m(R,"colors")||dh,Y=m(R,"startAngle")||0,I=m(R,"hollow"),K=m(R,jd),W=m(R,ke),k=m(R,Vq),N=K?new yo:H,S=G.x,X=G.y,j=G.width,E=G.height,M=S+j/2,e=X+E/2,h=P(j,E)/2,U=0,i=0;i<Q.length;i++){var f=Q[i],B=C*f/p,c=Y+B;if(q.fillStyle=n[U++],U===n.length&&(U=0),q.beginPath(),I){var x=M+L(Y)*h/2,b=e+D(Y)*h/2,d=M+L(c)*h,g=e+D(c)*h;q.moveTo(x,b),q.arc(M,e,h/2,Y,c,!1),q.lineTo(d,g),q.arc(M,e,h,c,Y,!0)}else q.moveTo(M,e),q.arc(M,e,h,c,Y,!0);N&&(B=(Y+c)/2,N.add({text:hh(K)?K(f,i,p,T):f,x:M+.75*L(B)*h,y:e+.75*D(B)*h})),q.closePath(),q.fill(),Y=c}N&&N.each(function(h){Gi(q,h.text,W,k,h.x,h.y,0,0,as)})}},A=function(w,F){var u=m(w,Yd);if(u&&u.length>0){var c=u.length,Z=m(w,jd),r=m(w,ke),O=m(w,Vq),$=Z?new yo:H,n=m(w,"minValue")||0,N=m(w,"maxValue");if(N==H&&(N=0,u.forEach(function(c){c.values.forEach(function(y){N=W(N,y)})})),n===N)return;for(var l=F.height/(N-n),Y=F.y+N*l,e=m(u[0],$j).length,s=F.width/(3*e+1),A=2*s/c,P=0,J=0;c>J;J++)for(var o=u[J],g=m(o,Oo),i=m(o,"colors"),f=m(o,$j),L=0;e>L;L++){i?q.fillStyle=i[L]:g?q.fillStyle=g:(q.fillStyle=dh[P++],P===dh.length&&(P=0));var b=f[L],a=b*l,K=F.x+(1+3*L)*s+J*A;if(Db(q,K,Y-a,A,a),$){var G=hh(Z)?Z(b,L,o,T):b,S=Yb(r,G).height;$.add({x:K,y:Y-a-S,width:A,height:S,text:G})}}$&&$.each(function(F){Gi(q,F.text,r,O,F.x,F.y,F.width,F.height,as)})}},l=function(X,x){var y=m(X,Yd);if(y&&y.length>0){var o=y.length,$=m(y[0],$j).length,p=x.width/(3*$+1),Z=0,J=m(X,"maxValue"),d=m(X,jd),G=m(X,ke),l=m(X,Vq),u=d?new yo:H;if(J==H){J=0;for(var i=0;$>i;i++){for(var S=0,b=0;o>b;b++)S+=m(y[b],$j)[i];J=W(J,S)}}if(J>0){for(var i=0;$>i;i++)for(var A=x.y+x.height,b=0;o>b;b++){var g=y[b],M=m(g,Oo),K=m(g,$j)[i],k=K/J*x.height;M?q.fillStyle=M:(q.fillStyle=dh[Z++],Z===dh.length&&(Z=0)),A-=k;var e={x:x.x+(1+3*i)*p,y:A,width:2*p,height:k};Db(q,e.x,e.y,e.width,e.height),u&&(e.text=hh(d)?d(K,i,g,T):K,u.add(e))}u&&u.each(function(n){Gi(q,n.text,G,l,n.x,n.y,n.width,n.height,as)})}}},Q=function(u,B){var $=m(u,Yd);if($&&$.length>0){for(var i=$.length,j=m($[0],$j).length,I=B.width/(3*j+1),d=0,x=m(u,jd),Y=m(u,ke),E=m(u,Vq),W=x?new yo:H,L=0;j>L;L++){for(var K=0,g=0;i>g;g++)K+=m($[g],$j)[L];if(K>0){var R=B.y+B.height;for(g=0;i>g;g++){var h=$[g],r=m(h,Oo),o=m(h,$j)[L],N=o/K*B.height;r?q.fillStyle=r:(q.fillStyle=dh[d++],d===dh.length&&(d=0)),R-=N;var s={x:B.x+(1+3*L)*I,y:R,width:2*I,height:N};Db(q,s.x,s.y,s.width,s.height),W&&(s.text=hh(x)?x(o,L,h,T):o,W.add(s))}}}W&&W.each(function(N){Gi(q,N.text,Y,E,N.x,N.y,N.width,N.height,as)})}},x=function(M,s){var O=m(M,Yd);if(O&&O.length>0){var r=O.length,N=m(M,"minValue")||0,U=m(M,"maxValue");if(U==H&&(U=0,O.forEach(function(T){T.values.forEach(function(N){U=W(U,N)})})),N===U)return;for(var G=s.height/(U-N),p=s.y+U*G,L=m(O[0],$j).length,z=s.width/(3*L+1),g=0,c=m(M,"lineWidth")||2,V=m(M,"line3d"),y=m(M,"linePoint"),B=m(M,jd),l=m(M,ke),i=m(M,Vq),h=0;r>h;h++){var j=O[h],J=m(j,Oo),Y=m(j,$j);J?q.strokeStyle=J:(J=q.strokeStyle=dh[g++],g===dh.length&&(g=0)),q.beginPath();for(var P=0;L>P;P++){var d=s.x+(2+3*P)*z,e=p-Y[P]*G;0===P?q.moveTo(d,e):q.lineTo(d,e)}if(q.lineWidth=c,q.stroke(),V&&Eq(q,J,H,c,X),y||B){var $,F=c/2+2;for(P=0;L>P;P++){var A=Y[P];if(d=s.x+(2+3*P)*z,e=p-A*G,hh(y)?y(q,d,e,J,P,j,T):y&&(q.fillStyle=J,q.beginPath(),q.arc(d,e,F,0,C,!0),q.fill()),hh(B)?$=B(A,P,j,T):B&&($=A),$){var K=Yb(l,$).height,x=q.shadowBlur;if(x){var _=q.shadowOffsetX,f=q.shadowOffsetY,S=q.shadowColor;q.shadowOffsetX=0,q.shadowOffsetY=0,q.shadowBlur=0,q.shadowColor=H}Gi(q,$,l,i,d,e-K-F+2,0,K,as),x&&(q.shadowOffsetX=_,q.shadowOffsetY=f,q.shadowColor=S,q.shadowBlur=x)}}}}}},y={border:k,image:j,text:s,pieChart:_,columnChart:A,stackedColumnChart:l,percentageColumnChart:Q,lineChart:x};return function(G,F,V,n,j,$,c,o,z){if(F&&j&&$){if(q=G,T=c,B=o,X=B?B._zoom?B._zoom:1:1,K=z,F.tagName)return q.drawImage(F,V,n,j,$),void 0;if(m(F,"visible")!==!1){K||(K=wo(F.color,T,B));var v=Dn(F,T),d=Kc(F,T),R={x:0,y:0,width:v,height:d},l=m(F,"clip"),u=m(F,"opacity");q.save(),Vj(q,V,n),(v!==j||d!==$)&&q.scale(j/v,$/d),l&&(hh(l)?l(q,v,d,T,B,F):(q.beginPath(),q.rect(0,0,v,d),q.clip())),u!=H&&(q.globalAlpha*=u),m(F,"comps").forEach(function(d){if(m(d,ue)!==!1){kd.splice(0,0,d);var G=m(d,"opacity"),N=m(d,"shadow"),P=m(d,"type"),o=Z(d,R);if(G!=H){var h=q.globalAlpha;q.globalAlpha*=G}if(N){var U=q.shadowOffsetX,b=q.shadowOffsetY,i=q.shadowBlur,u=q.shadowColor,s=m(d,"shadowOffsetX"),F=m(d,"shadowOffsetY"),r=m(d,"shadowBlur"),w=m(d,"shadowColor");q.shadowOffsetX=s==H?3:s,q.shadowOffsetY=F==H?3:F,q.shadowBlur=r==H?6:r,q.shadowColor=w||uo}if(hh(P))P(q,o,d,T,B);else if(e.getCompType(P))e.getCompType(P)(q,o,d,T,B);else if(so[P]||P===Ad)O(d,P,o);else if("SVGPath"===P)f(d,P,o);else if(y[P]&&o){var J=m(d,Bh);g(J,o),y[P](d,o),Y(J)}N&&(q.shadowOffsetX=U,q.shadowOffsetY=b,q.shadowBlur=i,q.shadowColor=u),G!=H&&(q.globalAlpha=h),kd.splice(0,1)}}),q.restore()}}}}();e.getCurrentComp=function(){return kd[0]},e.getParentComp=function(){return kd[1]},e.getInternal=function(){return{isEnter:oq,isEsc:yp,isSpace:Hi,isLeft:Dg,isUp:uq,isRight:uf,isDown:Ip,addMethod:hq,superCall:yi,toPointsArray:sl,translateAndScale:pf,appendArray:Sj,createWorldMatrix:xm,vec3TransformMat4:Dq,setCanvas:Fe,createDiv:Vb,createCanvas:Lm,createImage:rb,initContext:Qi,layout:gp,fillRect:Db,Mat:Ah,drawBorder:Jr,isString:Kf,setBorder:dc,getPropertyValue:rn,setPropertyValue:Pc,drawVerticalLine:tp,draw3DRect:jo,getPinchDist:cs,isSameRect:Pr,getPosition:Ui,intersectionLineRect:Hf,getNodeRect:ji,getImageWidth:Dn,getImageHeight:Kc,formatNumber:yd,initItemElement:pq,drawPoints:sc,createG2:mn,closePopup:Uc,isH:Kl,createAnim:Bl,createNormalMatrix:qf,createNormals:nr,toFloatArray:Xk,glMV:fg,batchShape:ml,createNodeMatrix:Pq,getFaceInfo:Vg,transformAppend:zk,drawFaceInfo:$g,to3dPointsArray:zf,setGLDebugMode:function(x){Qr=x},cube:function(){return{vs:Yl,is:ec,uv:Qc}},ui:function(){return{DataUI:dq,NodeUI:Wq,EdgeUI:tb,GroupUI:Ic,ShapeUI:ah,GridUI:$m,Data3dUI:sb,Node3dUI:Nk,Shape3dUI:As}},getInternalVersion:function(){return"U2FsdGVkX18/EIXTACGZjLjYgQE3mk3HNeu32l27i8UpD84CzB49P++PCY0loQRa"},getDragger:function(){return Oe},addMSMap:function(x){hq(ze,x)},k:o}},function(s){function $(j,F){j!=H&&(F==H&&Lq!=typeof j?this._54O(j,256):this._54O(j,F))}function f(){return new $(H)}function m(n,y,x,e,N,J){for(;--J>=0;){var g=y*this[n++]+x[e]+N;N=p(g/67108864),x[e++]=67108863&g}return N}function l(c,Z,L,v,C,R){for(var G=32767&Z,_=Z>>15;--R>=0;){var r=32767&this[c],z=this[c++]>>15,d=_*r+z*G;r=G*r+((32767&d)<<15)+L[v]+(1073741823&C),C=(r>>>30)+(d>>>15)+_*z+(C>>>30),L[v++]=1073741823&r}return C}function z(m,q,n,w,z,I){for(var H=16383&q,u=q>>14;--I>=0;){var A=16383&this[m],X=this[m++]>>14,D=u*A+X*H;A=H*A+((16383&D)<<14)+n[w]+z,z=(A>>28)+(D>>14)+u*X,n[w++]=268435455&A}return z}function e(_){return xk.charAt(_)}function K(A,h){var K=Sn[A.charCodeAt(h)];return K==H?-1:K}function h(M){for(var j=this.t-1;j>=0;--j)M[j]=this[j];M.t=this.t,M.s=this.s}function _(E){this.t=1,this.s=0>E?-1:0,E>0?this[0]=E:-1>E?this[0]=E+this.DV:this.t=0}function R(a){var P=f();return P._58O(a),P}function w(q,c){var F,V=this;if(16==c)F=4;else if(8==c)F=3;else if(256==c)F=8;else if(2==c)F=1;else if(32==c)F=5;else{if(4!=c)return V.fromRadix(q,c),void 0;F=2}V.t=0,V.s=0;for(var t=q.length,I=!1,E=0;--t>=0;){var p=8==F?255&q[t]:K(q,t);0>p?"-"==q.charAt(t)&&(I=!0):(I=!1,0==E?V[V.t++]=p:E+F>V.DB?(V[V.t-1]|=(p&(1<<V.DB-E)-1)<<E,V[V.t++]=p>>V.DB-E):V[V.t-1]|=p<<E,E+=F,E>=V.DB&&(E-=V.DB))}8==F&&0!=(128&q[0])&&(V.s=-1,E>0&&(V[V.t-1]|=(1<<V.DB-E)-1<<E)),V._57O(),I&&$.ZERO._78O(V,V)}function r(){for(var A=this,v=A.s&A.DM;A.t>0&&A[A.t-1]==v;)--A.t}function F(I){var X=this;if(X.s<0)return"-"+X._85O()[Yk](I);var D;if(16==I)D=4;else if(8==I)D=3;else if(2==I)D=1;else if(32==I)D=5;else{if(4!=I)return X.toRadix(I);D=2}var n,L=(1<<D)-1,B=!1,p="",$=X.t,i=X.DB-$*X.DB%D;if($-->0)for(i<X.DB&&(n=X[$]>>i)>0&&(B=!0,p=e(n));$>=0;)D>i?(n=(X[$]&(1<<i)-1)<<D-i,n|=X[--$]>>(i+=X.DB-D)):(n=X[$]>>(i-=D)&L,0>=i&&(i+=X.DB,--$)),n>0&&(B=!0),B&&(p+=e(n));return B?p:"0"}function V(){var C=f();return $.ZERO._78O(this,C),C}function O(){return this.s<0?this._85O():this}function M(u){var v=this,n=v.s-u.s;if(0!=n)return n;var z=v.t;if(n=z-u.t,0!=n)return v.s<0?-n:n;for(;--z>=0;)if(0!=(n=v[z]-u[z]))return n;return 0}function A(t){var h,B=1;return 0!=(h=t>>>16)&&(t=h,B+=16),0!=(h=t>>8)&&(t=h,B+=8),0!=(h=t>>4)&&(t=h,B+=4),0!=(h=t>>2)&&(t=h,B+=2),0!=(h=t>>1)&&(t=h,B+=1),B}function g(){var j=this;return j.t<=0?0:j.DB*(j.t-1)+A(j[j.t-1]^j.s&j.DM)}function t(d,p){var z;for(z=this.t-1;z>=0;--z)p[z+d]=this[z];for(z=d-1;z>=0;--z)p[z]=0;p.t=this.t+d,p.s=this.s}function x(d,L){for(var X=d;X<this.t;++X)L[X-d]=this[X];L.t=W(this.t-d,0),L.s=this.s}function Z(s,R){var T,L=this,Z=s%L.DB,h=L.DB-Z,q=(1<<h)-1,V=p(s/L.DB),y=L.s<<Z&L.DM;for(T=L.t-1;T>=0;--T)R[T+V+1]=L[T]>>h|y,y=(L[T]&q)<<Z;for(T=V-1;T>=0;--T)R[T]=0;R[V]=y,R.t=L.t+V+1,R.s=L.s,R._57O()}function c(b,e){var V=this;e.s=V.s;var E=p(b/V.DB);if(E>=V.t)return e.t=0,void 0;var H=b%V.DB,x=V.DB-H,W=(1<<H)-1;e[0]=V[E]>>H;for(var i=E+1;i<V.t;++i)e[i-E-1]|=(V[i]&W)<<x,e[i-E]=V[i]>>H;H>0&&(e[V.t-E-1]|=(V.s&W)<<x),e.t=V.t-E,e._57O()}function y(K,D){for(var O=this,U=0,j=0,w=P(K.t,O.t);w>U;)j+=O[U]-K[U],D[U++]=j&O.DM,j>>=O.DB;if(K.t<O.t){for(j-=K.s;U<O.t;)j+=O[U],D[U++]=j&O.DM,j>>=O.DB;j+=O.s}else{for(j+=O.s;U<K.t;)j-=K[U],D[U++]=j&O.DM,j>>=O.DB;j-=K.s}D.s=0>j?-1:0,-1>j?D[U++]=O.DV+j:j>0&&(D[U++]=j),D.t=U,D._57O()}function Q(T,C){var K=this.abs(),s=T.abs(),k=K.t;for(C.t=k+s.t;--k>=0;)C[k]=0;for(k=0;k<s.t;++k)C[k+K.t]=K.am(0,s[k],C,k,0,K.t);C.s=0,C._57O(),this.s!=T.s&&$.ZERO._78O(C,C)}function T(G){for(var M=this.abs(),z=G.t=2*M.t;--z>=0;)G[z]=0;for(z=0;z<M.t-1;++z){var q=M.am(z,M[z],G,2*z,0,1);(G[z+M.t]+=M.am(z+1,2*M[z],G,2*z+1,q,M.t-z-1))>=M.DV&&(G[z+M.t]-=M.DV,G[z+M.t+1]=1)}G.t>0&&(G[G.t-1]+=M.am(z,M[z],G,2*z,0,1)),G.s=0,G._57O()}function B(k,h,l){var O=k.abs(),R=this;if(!(O.t<=0)){var o=R.abs();if(o.t<O.t)return h!=H&&h._58O(0),l!=H&&R._77O(l),void 0;l==H&&(l=f());var m=f(),E=R.s,F=k.s,z=R.DB-A(O[O.t-1]);z>0?(O._44O(z,m),o._44O(z,l)):(O._77O(m),o._77O(l));var r=m.t,K=m[r-1];if(0!=K){var x=K*(1<<R.F1)+(r>1?m[r-2]>>R.F2:0),I=R.FV/x,d=(1<<R.F1)/x,X=1<<R.F2,V=l.t,q=V-r,G=h==H?f():h;for(m._59O(q,G),l._52O(G)>=0&&(l[l.t++]=1,l._78O(G,l)),$.ONE._59O(r,G),G._78O(m,m);m.t<r;)m[m.t++]=0;for(;--q>=0;){var c=l[--V]==K?R.DM:p(l[V]*I+(l[V-1]+X)*d);if((l[V]+=m.am(0,c,l,q,0,r))<c)for(m._59O(q,G),l._78O(G,l);l[V]<--c;)l._78O(G,l)}h!=H&&(l._45O(r,h),E!=F&&$.ZERO._78O(h,h)),l.t=r,l._57O(),z>0&&l._46O(z,l),0>E&&$.ZERO._78O(l,l)}}}function j(y){var N=f();return this.abs()._49O(y,H,N),this.s<0&&N._52O($.ZERO)>0&&y._78O(N,N),N}function U(O){this.m=O}function I(K){return K.s<0||K._52O(this.m)>=0?K.mod(this.m):K}function d(a){return a}function G(J){J._49O(this.m,H,J)}function E(o,i,H){o._47O(i,H),this._74O(H)}function u(f,v){f._48O(v),this._74O(v)}function i(){if(this.t<1)return 0;var M=this[0];if(0==(1&M))return 0;var l=3&M;return l=15&l*(2-(15&M)*l),l=255&l*(2-(255&M)*l),l=65535&l*(2-(65535&(65535&M)*l)),l=l*(2-M*l%this.DV)%this.DV,l>0?this.DV-l:-l}function N(S){var Y=this;Y.m=S,Y.mp=S._50O(),Y.mpl=32767&Y.mp,Y.mph=Y.mp>>15,Y.um=(1<<S.DB-15)-1,Y.mt2=2*S.t}function X(S){var s=f();return S.abs()._59O(this.m.t,s),s._49O(this.m,H,s),S.s<0&&s._52O($.ZERO)>0&&this.m._78O(s,s),s}function n(Z){var z=f();return Z._77O(z),this._74O(z),z}function b(q){for(var U=this;q.t<=U.mt2;)q[q.t++]=0;for(var n=0;n<U.m.t;++n){var y=32767&q[n],$=y*U.mpl+((y*U.mph+(q[n]>>15)*U.mpl&U.um)<<15)&q.DM;for(y=n+U.m.t,q[y]+=U.m.am(0,$,q,n,0,U.m.t);q[y]>=q.DV;)q[y]-=q.DV,q[++y]++}q._57O(),q._45O(U.m.t,q),q._52O(U.m)>=0&&q._78O(U.m,q)}function um(l,b){l._48O(b),this._74O(b)}function pl(u,I,_){u._47O(I,_),this._74O(_)}function ao(){return 0==(this.t>0?1&this[0]:this.s)}function rf(y,t){if(y>4294967295||1>y)return $.ONE;var O=f(),n=f(),s=t._73O(this),r=A(y)-1;for(s._77O(O);--r>=0;)if(t._76O(O,n),(y&1<<r)>0)t._75O(n,s,O);else{var P=O;O=n,n=P}return t.revert(O)}function ib(H,u){var Y;return Y=256>H||u._51O()?new U(u):new N(u),this.exp(H,Y)}function Gb(){var G=this;if(G.s<0){if(1==G.t)return G[0]-G.DV;if(0==G.t)return-1}else{if(1==G.t)return G[0];if(0==G.t)return 0}return(G[1]&(1<<32-G.DB)-1)<<G.DB|G[0]}function Tf(X,i){return new $(X,i)}function gk(){var n=this;n.n=H,n.e=0,n.d=H,n.p=H,n.q=H,n.dmp1=H,n.dmq1=H,n._10A=H}function On(L){return L._53O(this.e,this.n)}function Uk(s){var N,V,L,w="",d=0;for(N=0;N<s.length&&s.charAt(N)!=bn;++N)L=tr.indexOf(s.charAt(N)),0>L||(0==d?(w+=e(L>>2),V=3&L,d=1):1==d?(w+=e(V<<2|L>>4),V=15&L,d=2):2==d?(w+=e(V),w+=e(L>>2),V=3&L,d=3):(w+=e(V<<2|L>>4),w+=e(15&L),d=0));return 1==d&&(w+=e(V<<2)),w}function ee(c){var N=c.split(""),W=Uk(c);return N.forEach(function(L){var r=L.length;r>0&&W&&(lc+=S(L))}),W}function wd(D,U){var S=vk._4O.Util._56O(D,"ss"),o={},Z=0;return o.v=S==U,o.t=1,o.s=0>Z?-1:0,Pd=o.v,Z>0?o[0]=Z:-1>Z?o[0]=Z+o.DV:o.t=0,[S,o]}function ar(V){var D=38,F=V.substring(0,D);if(F&&30==F.indexOf("05000420")){var M=["ss",V.substring(D)];return M}return[]}function Ln(q,r){r=r.replace(dj,""),r=r.replace(/[ \n]+/g,"");var Z=Tf(r,16);if(Z._55O()>this.n._55O())return 0;var B=this._37O(Z),g=B[Yk](16).replace(/^1f+00/,""),E=ar(g);if(0==E.length)return!1;for(var v,x,F,_=.5,O=gl,o=[0,.5,.75,.875,.9375],V=[],n=[],I=[],i=C/O,T=E[1],e=wd(q,T)[0],H=0,J=0;H<o.length;H++){var P=0===H%2?0:.5;for(v=0;O>=v;v++)x=(v+P)*i,F=1-o[H],V.push(L(x)*_*F,-_+2*o[H]*_,-D(x)*_*F),n.push((v+P)/O,F)}for(H=0;H<o.length-1;H++){var K=H*(O+1),d=(H+1)*(O+1);for(v=0;O>v;v++)I.push(K+v,d+v+1,d+v,K+v,K+v+1,d+v+1)}return I.forEach(function(Z){J+=Z}),T==e&&J>10}var lk,Iq=0xdeadbeefcafe,ae=15715070==(16777215&Iq),Yk="toString",fk="",Pi="nat",Tm=function(){};J=s["D"+11182[Yk](Y(2,5))];var nm=$.prototype;si+=Td.substr(0,1);var Ge=s.navigator?s.navigator.appName:"";ae&&"Microsoft Internet Explorer"==Ge?(nm.am=l,lk=30):ae&&"Netscape"!=Ge?(nm.am=m,lk=26):(nm.am=z,lk=28),nm.DB=lk,nm.DM=(1<<lk)-1,nm.DV=1<<lk;var wq=52;nm.FV=Y(2,wq),nm.F1=wq-lk,nm.F2=2*lk-wq;var Sr,Ap,xk="0123456789abcdefghijklmnopqrstuvwxyz",Sn=[],wh=function(b){return String.fromCharCode(b)};for(Sr="0".charCodeAt(0),Ap=0;9>=Ap;++Ap)Sn[Sr++]=Ap;for(Sr="a".charCodeAt(0),Ap=10;36>Ap;++Ap)Sn[Sr++]=Ap;for(Sr="A".charCodeAt(0),Ap=10;36>Ap;++Ap)Sn[Sr++]=Ap;var Jk=U.prototype;Jk._73O=I,Jk.revert=d,Jk._74O=G,Jk._75O=E,Jk._76O=u;var $l=N.prototype;$l._73O=X,$l.revert=n,$l._74O=b,$l._75O=pl,$l._76O=um,nm._77O=h,nm._58O=_,nm._54O=w,nm._57O=r,nm._59O=t,nm._45O=x,nm._44O=Z,nm._46O=c,nm._78O=y,nm._47O=Q,nm._48O=T,nm._49O=B,nm._50O=i,nm._51O=ao,nm.exp=rf,nm.toString=F,nm._85O=V,nm.abs=O,nm._52O=M,nm._55O=g,nm.mod=j,nm._53O=ib,$.ZERO=R(0),$.ONE=R(1),nm._86O=Gb;var vl=function(x,W){var U=this;U.isPublic=!0,typeof x!==Lq?(U.n=x,U.e=W):x!=H&&W!=H&&x.length>0&&W.length>0&&(U.n=Tf(x,16),U.e=S(W,16))};rj=function(){var p,v,y=ee(pc),f=y.substr(0,4),d=y.substr(4,2),Y=y.substr(6,2),k=1,P=!k,N=o,Q=[],h=Oi.charAt(7);if(J&&(J[Yk]().indexOf(Pi)<0||J[si][Yk]().indexOf(Pi)<0||!y?p=Cb(dm[h]):(y=new J(f-0,d-k,Y-0),v=y.setHours(9),J[si]()>v?p=Cb(dm[h]):P=!0)),y&&p&&N){for(var X in p)Q.push(X);var H,j=p[Q[0]],Z=p[Q[1]],r=p[Q[2]],E=p[Q[4]],O=p[Q[5]],L=p[Q[6]],C=Rj._27O(N);C&&L&&(H=j+Z+r+E+""+O,H&&C._31O(H,L)&&(P=!0))}return P||(Xn=xf),h};var Uq=gk.prototype;Uq._37O=On,Uq._38O=vl;var tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bn="=",Xd=25,sm=10,pc="IBUQAQ==",$i=$i||function(x,u){var s={},r=s._7A={},g=r._6A=function(){function T(){}return{_80O:function(U){T.prototype=this;var Z=new T;return U&&Z._5A(U),Z.hasOwnProperty("_82O")||(Z._82O=function(){Z.$super._82O.apply(this,arguments)}),Z._82O.prototype=Z,Z.$super=this,Z},_3A:function(){var i=this._80O();return i._82O.apply(i,arguments),i},_82O:function(){},_5A:function(l){for(var S in l)l.hasOwnProperty(S)&&(this[S]=l[S]);l.hasOwnProperty(Yk)&&(this.toString=l.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),Q=r._39O=g._80O({_82O:function($,c){$=this._84O=$||[],this._65O=c!=u?c:4*$.length},toString:function(n){return(n||U).stringify(this)},_89O:function(t){var p=this._84O,k=t._84O,y=this._65O,f=t._65O;if(this._57O(),y%4)for(var g=0;f>g;g++){var T=255&k[g>>>2]>>>24-8*(g%4);p[y+g>>>2]|=T<<24-8*((y+g)%4)}else if(k.length>65535)for(var g=0;f>g;g+=4)p[y+g>>>2]=k[g>>>2];else p.push.apply(p,k);return this._65O+=f,this},_57O:function(){var L=this._84O,q=this._65O;L[q>>>2]&=4294967295<<32-8*(q%4),L.length=v(q/4)},_88O:function(){var k=g._88O.call(this);return k._84O=this._84O.slice(0),k},_87O:function(_){for(var o=[],M=0;_>M;M+=4)o.push(0|4294967296*k);return new Q._82O(o,_)}}),M=s._2A={},U=M._69O={stringify:function(F){var j,b=F._84O,U=F._65O,r=[];for(j=0;U>j;j++){var T=255&b[j>>>2]>>>24-8*(j%4);r.push((T>>>4).toString(16)),r.push((15&T).toString(16))}return r.join("")},_68O:function(g){for(var i=g.length,u=[],x=0;i>x;x+=2)u[x>>>3]|=S(g.substr(x,2),16)<<24-4*(x%8);return new Q._82O(u,i/2)}},A=M._8A={stringify:function(K){var Z,Y=K._84O,M=K._65O,e=[];for(Z=0;M>Z;Z++){var y=255&Y[Z>>>2]>>>24-8*(Z%4);e.push(wh(y))}return e.join("")},_68O:function(G){var H,K=G.length,U=[];for(H=0;K>H;H++)U[H>>>2]|=(255&G.charCodeAt(H))<<24-8*(H%4);return new Q._82O(U,K)}},D=M._9A={stringify:function(F){try{return decodeURIComponent(escape(A.stringify(F)))}catch(O){throw new Error("")}},_68O:function(K){return A._68O(unescape(encodeURIComponent(K)))}},V=r._32O=g._80O({_1A:function(){this._83O=new Q._82O,this._23O=0},_33O:function(V){typeof V==Lq&&(V=D._68O(V)),this._83O._89O(V),this._23O+=V._65O},_25O:function(V){var o=this._83O,b=o._84O,L=o._65O,T=this._79O,j=4*T,E=L/j;E=V?v(E):W((0|E)-this._22O,0);var A=E*T,U=P(4*A,L);if(A){for(var f=0;A>f;f+=T)this._20O(b,f);var R=b.splice(0,A);o._65O-=U}return new Q._82O(R,U)},_88O:function(){var t=g._88O.call(this);return t._83O=this._83O._88O(),t},_22O:0});r._66O=V._80O({cfg:g._80O(),_82O:function(D){this.cfg=this.cfg._80O(D),this._1A()},_1A:function(){V._1A.call(this),this._34O()},_81O:function(U){return this._33O(U),this._25O(),this},_72O:function(M){M&&this._33O(M);var F=this._21O();return F},_79O:16,_26O:function(o){return function(L,N){return new o._82O(N)._72O(L)}},_19O:function(A){return function(t,O){return new p._71O._82O(A,O)._72O(t)}}});var p=s._67O={};return s}();!function(){var s=$i,I=s._7A,T=I._39O,J=I._66O,U=s._67O,o=[],W=[];!function(){function E(s){for(var o=a(s),S=2;o>=S;S++)if(!(s%S))return!1;return!0}function r(K){return 0|4294967296*(K-(0|K))}for(var X=2,B=0;64>B;)E(X)&&(8>B&&(o[B]=r(Y(X,.5))),W[B]=r(Y(X,1/3)),B++),X++}();var v=[],r=U._41O=J._80O({_34O:function(){this._64O=new T._82O(o.slice(0))},_20O:function(V,B){for(var P=this._64O._84O,q=P[0],p=P[1],E=P[2],H=P[3],L=P[4],N=P[5],f=P[6],R=P[7],S=0;64>S;S++){if(16>S)v[S]=0|V[B+S];else{var z=v[S-15],n=(z<<25|z>>>7)^(z<<14|z>>>18)^z>>>3,t=v[S-2],w=(t<<15|t>>>17)^(t<<13|t>>>19)^t>>>10;v[S]=n+v[S-7]+w+v[S-16]}var j=L&N^~L&f,s=q&p^q&E^p&E,U=(q<<30|q>>>2)^(q<<19|q>>>13)^(q<<10|q>>>22),O=(L<<26|L>>>6)^(L<<21|L>>>11)^(L<<7|L>>>25),F=R+O+j+W[S]+v[S],T=U+s;R=f,f=N,N=L,L=0|H+F,H=E,E=p,p=q,q=0|F+T}P[0]=0|P[0]+q,P[1]=0|P[1]+p,P[2]=0|P[2]+E,P[3]=0|P[3]+H,P[4]=0|P[4]+L,P[5]=0|P[5]+N,P[6]=0|P[6]+f,P[7]=0|P[7]+R},_21O:function(){var t=this._83O,O=t._84O,w=8*this._23O,X=8*t._65O;return O[X>>>5]|=128<<24-X%32,O[(X+64>>>9<<4)+14]=p(w/4294967296),O[(X+64>>>9<<4)+15]=w,t._65O=4*O.length,this._25O(),this._64O},_88O:function(){var c=J._88O.call(this);return c._64O=this._64O._88O(),c}});s._41O=J._26O(r),s._42O=J._19O(r)}();var dj=new RegExp("");dj.compile("[^0-9a-f]","gi"),gk._28O=-1,gk._29O=-2,Uq._31O=Ln,Uq._63O=Ln,gk._43O=-2;var vo=new function(){var p=this;p._5O=function(T,X){if("8"!=T.substring(X+2,X+3))return 1;var o=S(T.substring(X+3,X+4));return 0==o?-1:o>0&&10>o?o+1:-2},p._13O=function(I,C){var T=p._5O(I,C);return 1>T?"":I.substring(C+2,C+2+2*T)},p._12O=function(Q,R){var Y=p._13O(Q,R);if(""==Y)return-1;var J;return J=S(Y.substring(0,1))<8?new $(Y,16):new $(Y.substring(2),16),J._86O()},p._6O=function(s,_){var I=p._5O(s,_);return 0>I?I:_+2*(I+1)},p._11O=function(r,F){var v=p._6O(r,F),b=p._12O(r,F);return r.substring(v,v+2*b)},p._10O=function(O,H){var b=p._6O(O,H),t=p._12O(O,H);return b+2*t},p._7O=function(c,S){var B=[],b=p._6O(c,S);B.push(b);for(var $=p._12O(c,S),A=b,q=0;;){var N=p._10O(c,A);if(N==H||N-b>=2*$)break;if(q>=200)break;B.push(N),A=N,q++}return B}};if(vo._90O=wh(sm+24),vo._91O=q+wh(sm*sm+8),vk==H||!vk)var vk={};vk._4O!=H&&vk._4O||(vk._4O={}),vk._4O.Util=new function(){var R=this;R._56O=function(l){var Z=new vk._4O._3O;return Z._30O(l)},R._4A=function(F){var d=new vk._4O._3O;return d._36O(F)}},vk._4O._3O=function(){var J=this;J._8O=function(r,w){if("ss"==r&&"cj"==w){try{J.md=$i._67O._41O._3A()}catch(v){Tm(fk)}J._24O=function(u){J.md._81O(u)},J._35O=function(F){var V=$i._2A._69O._68O(F);J.md._81O(V)},J._60O=function(){var h=J.md._72O();return h[Yk]($i._2A._69O)},J._30O=function(q){return J._24O(q),J._60O()},J._36O=function(S){return J._35O(S),J._60O()}}},J._24O=function(){Tm(fk)},J._35O=function(){Tm(fk)},J._60O=function(){Tm(fk)},J._30O=function(){Tm(fk)},J._36O=function(){Tm(fk)},J._8O("ss","cj")},Hm=function(h){var f=s[vo._91O],K=1,m=!1;if(ng.forEach(function(N){K*=N}),ng.a)return ng.a;if(h>K){if(f){f=f.split(vo._90O);var L=f[3],v=f[7],R=f[11],c=f[19],B=f[23],g=f[27],J=L+v+R+c+B;m=_b()(J,g)}m||(dq.prototype._42=mj)}else m=!0;return ng.a=m,m},Xd=String.fromCharCode(Xd+20);var ri=function(e){return e=e.replace(dj,fk),e=e.replace(/[ \n]+/g,fk)},rq="30",bd="06",Ll="02",so="03",Mp=Tf,fb=/^1f+00/,Rj=function(){var y;return y={_18O:function(J){var B=J,W=B.replace(/\s+/g,""),T=Uk(W);return T},_14O:function(c){var O=this._18O(c),Z=this._15O(O);return Z},_15O:function(N){var x=this._17O(N);if("2a864886f70d010101"==x._61O){var F=this._16O(x.key),D=new gk;return D._38O(F.n,F.e),D}Tm(fk)},_16O:function(B){var Q={};B.substr(0,2)!=rq&&Tm(fk);var l=vo._7O(B,0);return 2!=l.length&&Tm(fk),B.substr(l[0],2)!=Ll&&Tm(fk),Q.n=vo._11O(B,l[0]),B.substr(l[1],2)!=Ll&&Tm(fk),Q.e=vo._11O(B,l[1]),Q},_17O:function(V){var W={};W._40O=H;var D=vo._7O(V,0);2!=D.length&&Tm(fk);var B=D[0];V.substr(B,2)!=rq&&Tm(fk);var L=vo._7O(V,B);return 2!=L.length&&Tm(fk),V.substr(L[0],2)!=bd&&Tm(fk),W._61O=vo._11O(V,L[0]),V.substr(L[1],2)==bd?W._40O=vo._11O(V,L[1]):V.substr(L[1],2)==rq&&(W._40O={},W._40O.p=vo._70O(V,L[1],[0],Ll),W._40O.q=vo._70O(V,L[1],[1],Ll),W._40O.g=vo._70O(V,L[1],[2],Ll)),V.substr(D[1],2)!=so&&Tm(fk),W.key=vo._11O(V,D[1]).substr(2),W}},y._17O?y:H}(),Oh=Rj._27O=function($){return Rj._14O($)};return _b=function(){return function(N,l){l=ri(l);var S=Mp(l,Y(2,4)),v=this;if(!v||!v.n||S._55O()>v.n._55O())return 0;var L=v._37O(S),Z=L[Yk](Y(2,4)).replace(fb,""),I=ar(Z);if(0==I.length)return!1;var T=I[0],A=I[1],o=function(k){return vk._4O.Util._56O(k,T)},F=o(N);return A==F}.bind(Oh(o))},Rj}(R,O);var yo=j.List=function(){this._as=[];var t,A,Y=arguments.length;if(1===Y){var W=arguments[0];if(Hq(W)&&(W=W._as),ro(W))for(A=W.length,t=0;A>t;t++)this._as.push(W[t]);else W!=H&&this._as.push(W)}else if(Y>1)for(t=0;Y>t;t++)this._as.push(arguments[t])};Ae("List",O,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(Z,E){return E===x?this._as.push(Z):this._as.splice(E,0,Z)},addAll:function(j){Hq(j)&&(j=j._as),ro(j)?Sj(this._as,j):this._as.push(j)},get:function(e){return this._as[e]},slice:function(i,x){return new yo(this._as.slice(i,x))},remove:function(B){var R=this._as.indexOf(B);return R>=0&&R<this._as.length&&this.removeAt(R),R},removeAt:function(r){return this._as.splice(r,1)[0]},set:function(l,X){return this._as[l]=X},clear:function(){return this._as.splice(0,this._as.length)},contains:function(H){return this._as.indexOf(H)>=0},indexOf:function(_){return this._as.indexOf(_)},each:function(w,V){for(var s=0,$=this._as.length;$>s;s++){var b=this._as[s];V?w.call(V,b):w(b)}},reverseEach:function(F,R){for(var z=this._as.length-1;z>=0;z--){var t=this._as[z];R?F.call(R,t):F(t)}},toArray:function(_,w){if(_){for(var u,a=[],G=0,H=this._as.length;H>G;G++)u=this._as[G],w?_.call(w,u)&&a.push(u):_(u)&&a.push(u);return a}return this._as.concat()},toList:function(X,t){if(X){for(var O,G=new yo,k=0,M=this._as.length;M>k;k++)O=this._as[k],t?X.call(t,O)&&G.add(O):X(O)&&G.add(O);return G}return new yo(this)},reverse:function(){this._as.reverse()},sort:function(K){return this._as.sort(K?K:ae),this},toString:function(){return this._as.toString()}});var $f=new yo;hq($f,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:He,each:He,reverseEach:He,toArray:function(){return[]},toList:function(){return new yo},add:ej,addAll:ej,set:ej,remove:ej,removeAt:ej,clear:ej});var Tg=j.Notifier=function(){};Ae("Notifier",O,{contains:function(D,m){if(this._ls)for(var M,t=0,q=this._ls.size();q>t;t++)if(M=this._ls.get(t),D===M.l&&m===M.s)return!0;return!1},add:function(z,f,Q){var A=this,h={l:z,s:f,a:Q};A._ls||(A._ls=new yo),A._f?(A._as||(A._as=new yo),A._as.add(h)):h.a?A._ls.add(h,0):A._ls.add(h)},remove:function(k,u){var $=this;$._ls&&($._f?($._rs||($._rs=new yo),$._rs.add({l:k,s:u})):$._remove(k,u))},_remove:function(w,X){for(var v,M=this._ls,$=0,d=M.size();d>$;$++)if(v=M.get($),v.l===w&&v.s===X)return M.removeAt($),void 0},fire:function(q){var E=this,Z=E._ls;if(E._b=1,Z){E._f=1;for(var k,v=0,L=Z.size();L>v;v++)k=Z.get(v),k.s?k.l.call(k.s,q):k.l(q);if(delete E._f,E._rs){for(L=E._rs.size(),v=0;L>v;v++)k=E._rs.get(v),E._remove(k.l,k.s);delete E._rs}if(E._as){for(L=E._as.size(),v=0;L>v;v++)k=E._as.get(v),k.a?Z.add(k,0):Z.add(k);delete E._as}}}});var Tk=j.Data=function(){this._id=xl()};Ae("Data",O,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:H,_parent:H,_children:$f,_childMap:H,_styleMap:H,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return H},_22Q:function(){return H},s:function(k,E){var K=this;if(2===arguments.length)K.setStyle(k,E);else{if(!Gb(k))return K.getStyle(k);for(var w in k)K.setStyle(w,k[w])}return K},fp:function(F,O,z){return this.firePropertyChange(F,O,z)},firePropertyChange:function(U,I,z){if(I===z)return!1;var q=this,V={property:U,oldValue:I,newValue:z,data:q};return q._dataModel&&q._dataModel.handleDataPropertyChange(V),q.onPropertyChanged(V),!0},onPropertyChanged:function(k){var s=this,K=s._parent,O=k.property;if(nn(K)){var I=s.s(Ze),N="s:ingroup"===O;(I&&Qm[O]||O===N)&&K._81I(),(I||N)&&K.fp("childChange",!0,!1)}},_21I:function(H){var j=this;if(H&&j._dataModel)throw"HT-DM";j._dataModel=H},getId:function(){return this._id},setId:function(X){this._id=X},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(w,Y){return this._children.toList(w,Y)},eachChild:function(O,C){this._children.each(O,C)},addChild:function(e,A){var B=this;e!==B&&(B._children===$f&&(B._children=new yo,B._childMap={}),A===x&&(A=B._children.size()),B._childMap[e._id]||B.isDescendantOf(e)||(e._parent&&e._parent.removeChild(e),(0>A||A>B._children.size())&&(A=B._children.size()),B._children.add(e,A),B._childMap[e._id]=e,e.setParent(B),B.onChildAdded(e,A),B.fp(ak,H,e)))},onChildAdded:function(){},removeChild:function(n){var P=this;if(P._childMap&&P._childMap[n._id]){var g=P._children.remove(n);delete P._childMap[n._id],P.fp(ak,n,H),n.setParent(H),P.onChildRemoved(n,g)}},onChildRemoved:function(){},getChildAt:function(V){return this._children.get(V)},clearChildren:function(){var y=this;if(!y._children.isEmpty())for(var x=0,F=y._children.toArray(),B=F.length;B>x;x++)y.removeChild(F[x])},getParent:function(){return this._parent},setParent:function(p){var t=this;if(!(t._73I||t._parent===p||t===p||p&&p.isDescendantOf(t))){var y=t._parent;t._parent=p,t._73I=1,y&&y.removeChild(t),p&&p.addChild(t),delete t._73I,t.fp("parent",y,p),t.onParentChanged(y,p)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(_){return _?this.isDescendantOf(_)||_.isDescendantOf(this):!1},isParentOf:function(h){return h&&this._childMap?!!this._childMap[h._id]:!1},isDescendantOf:function(G){if(!G||G.isEmpty())return!1;for(var N=this._parent;N;){if(G===N)return!0;N=N._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(v,R){R===x&&(R=1);var V=this._styleMap?this._styleMap[v]:x;return V===x&&R?g[v]:V},setStyle:function(w,l){var n=this;n._styleMap||(n._styleMap={});var I=n._styleMap[w];l===x?delete n._styleMap[w]:n._styleMap[w]=l,n.fp("s:"+w,I,l)&&n.onStyleChanged(w,I,l)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var w=this;return w._displayName||w._name||w._tag||w._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(O,S){var m=this,I=m.s(Xf);I||m.s(Xf,I={}),S?I[O]=S:delete I[O],m.fp(Xf,H,I)},removeStyleIcon:function($){var W=this.s(Xf);if(W){var P=W[$];delete W[$],this.fp(Xf,H,W)}return P},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var N,C={};for(N in this._styleMap)C[N]=1;return C}});var hr=j.DataModel=function(){var E=this;E._datas=new yo,E._dataMap={},E._roots=new yo,E._rootMap={},E._78O={},E._36I=new Tg,E._35I=new Tg,E._3o=new Cq(E);var Q=E._29Q=[],D=E._scheduleCallback=function(){for(var t=Date.now(),G=0;G<Q.length;G++){var J=Q[G];J.enabled&&t-J.lastTime>J.interval&&(E.each(function(_){J.action(_)}),J.lastTime=t)}Q.length&&(E._30Q=R.requestAnimationFrame(D))}};Ae("DataModel",O,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(H,Y,q){this.addDataModelChangeListener(H,Y,q)},umm:function(b,P){this.removeDataModelChangeListener(b,P)},md:function(b,H,r){this.addDataPropertyChangeListener(b,H,r)},umd:function(P,r){this.removeDataPropertyChangeListener(P,r)},mh:function($,J,s){this.addHierarchyChangeListener($,J,s)},umh:function(s,d){this.removeHierarchyChangeListener(s,d)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(F){return this._attrObject=F},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(b){return this._dataMap[b]},removeDataById:function(m){this.remove(this.getDataById(m))},toDatas:function(y,U){return this._datas.toList(y,U)},each:function(y,B){this._datas.each(y,B)},getDataByTag:function(R){return this._78O[R]},removeDataByTag:function($){this.remove(this.getDataByTag($))},add:function($,X){var i=this,m=$._id,T=$._tag,e=i._roots;if(i._dataMap[m])throw"'"+m+"' already exists";T!=H&&(i._78O[T]=$),i._dataMap[m]=$,i._datas.add($),$._parent||(i._rootMap[m]=$,X>=0?e.add($,X):e.add($)),$._21I(i),i.onAdded($),i._36I.fire({kind:"add",data:$})},onAdded:function(){},remove:function(f){if(f){var k=this,s=f._id,L=f.getTag(),e=k.getHistoryManager();f._dataModel===k&&(e&&e.beginInteraction(),k.prepareRemove(f),f.toChildren().each(k.remove,k),f._parent&&f._parent.removeChild(f),k._datas.remove(f),delete k._dataMap[s],L!=H&&delete k._78O[L],k._rootMap[s]&&(delete k._rootMap[s],k._roots.remove(f)),f._21I(H),k.onRemoved(f),k._36I.fire({kind:Sq,data:f}),e&&e.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var O=this;O._datas.size()>0&&(O._datas.each(function(v){v._21I(H)}),O._datas.clear(),O._dataMap={},O._roots.clear(),O._rootMap={},O._78O={},O._36I.fire({kind:In}))},contains:function($){return $&&$._dataModel===this},handleDataPropertyChange:function(T){var J=this,C=T.data,d=T.property;if("parent"===d){var V=C._id,t=J._rootMap,a=J._roots;C._parent?t[V]&&(delete t[V],a.remove(C)):t[V]||(t[V]=C,a.add(C))
}else if("tag"===d){var q=T.oldValue,w=T.newValue,A=J._78O;q!=H&&delete A[q],w!=H&&(A[w]=C)}this.onDataPropertyChanged(C,T),this._35I.fire(T)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(F,o,Y){this._36I.add(F,o,Y)},removeDataModelChangeListener:function(J,y){this._36I.remove(J,y)},addDataPropertyChangeListener:function(J,N,X){this._35I.add(J,N,X)},removeDataPropertyChangeListener:function(o,b){this._35I.remove(o,b)},_38I:function(s,R,N){this._37I&&this._37I.fire({data:s,oldIndex:R,newIndex:N})},addHierarchyChangeListener:function(Y,n,d){this._37I||(this._37I=new Tg),this._37I.add(Y,n,d)},removeHierarchyChangeListener:function(h,U){this._37I.remove(h,U)},getSiblings:function(B){var O=B._parent;return O?O._children:this._roots},eachByDepthFirst:function(q,Y,g){if(Y)this._11I(q,Y,g);else for(var l=0,$=this._roots,Z=$.size();Z>l;l++)if(this._11I(q,$.get(l),g)===!1)return},_11I:function(v,e,P){for(var Y=e.size(),p=0;Y>p;p++)if(this._11I(v,e.getChildAt(p),P)===!1)return!1;if(P){if(v.call(P,e)===!1)return!1}else if(v(e)===!1)return!1;return!0},eachByBreadthFirst:function(S,Q,b){var G=new yo;for(Q?G.add(Q):this._roots.each(G.add,G);G.size()>0;)if(Q=G.removeAt(0),Q.eachChild(G.add,G),b){if(S.call(b,Q)===!1)return!1}else if(S(Q)===!1)return!1;return!0},moveTo:function(t,p){var w=this.getSiblings(t),S=w.indexOf(t);S===p||0>S||p>=0&&p<=w.size()&&(w.remove(t),p>w.size()&&p--,w.add(t,p),this._38I(t,S,p))},moveUp:function(l){this.moveTo(l,this.getSiblings(l).indexOf(l)-1)},moveDown:function(h){this.moveTo(h,this.getSiblings(h).indexOf(h)+1)},moveToTop:function(M){this.moveTo(M,0)},moveToBottom:function(S){this.moveTo(S,this.getSiblings(S).size())},moveSelectionUp:function(V){V||(V=this.sm());var D=new yo;Qd(V,D,this._roots),D.each(this.moveUp,this)},moveSelectionDown:function(K){K||(K=this.sm());var _=new yo;Kk(K,_,this._roots),_.each(this.moveDown,this)},moveSelectionToTop:function(j){j||(j=this.sm());var L=new yo;kq(j,L,this._roots),L.each(this.moveToTop,this)},moveSelectionToBottom:function(O){O||(O=this.sm());var o=new yo;ao(O,o,this._roots),o.each(this.moveToBottom,this)},addScheduleTask:function(Y){var K=this;K.removeScheduleTask(Y),Y.enabled==H&&(Y.enabled=!0),Y.interval==H&&(Y.interval=10),Y.action==H&&(Y.action=He),Y.lastTime=Date.now(),K._29Q.push(Y),K._30Q==H&&(K._30Q=R.requestAnimationFrame(K._scheduleCallback))},removeScheduleTask:function(D){var v=this,c=v._29Q,F=c.indexOf(D);F>=0&&c.splice(F,1),c.length||v._30Q==H||(R.cancelAnimationFrame(v._30Q),delete v._30Q)}});var Cq=j.SelectionModel=function(o){var e=this;e._68O=B,e._map={},e._73O=new yo,e._74I=new Tg,e._21I(o)};Ae("SelectionModel",O,{ms_fire:1,ms_dm:1,ms:function(d,o,b){this.addSelectionChangeListener(d,o,b)},ums:function(d,P){this.removeSelectionChangeListener(d,P)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===M},co:function(n){return this._map[n._id]!=H},ss:function(o){this.setSelection(o)},as:function(S){this.appendSelection(S)},rs:function(r){this.removeSelection(r)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(n){var v=this;if(v._68O!==n&&(n===nq||n===M||n===B)){v.cs();var H=v._68O;v._68O=n,v.fp("selectionMode",H,n)}},_21I:function(X){var h=this,b=h._dataModel;b!==X&&(b&&(h.cs(),b.umm(h.handleDataModelChange,h)),h._dataModel=X,X.mm(h.handleDataModelChange,h,!0),h.fp(pn,b,X))},dispose:function(){var B=this;B.cs(),B._dataModel.umm(B.handleDataModelChange,B)},handleDataModelChange:function(q){var w=this;if(q.kind===Sq){var s=q.data;w.co(s)&&(w._73O.remove(s),delete w._map[s._id],w._75I(Sq,new yo(s)))}else q.kind===In&&w.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(y){var t=this;if(t._filterFunc!==y){t.cs();var m=t._filterFunc;t._filterFunc=y,t.fp("filterFunc",m,t._filterFunc)}},_75I:function(J,x,$,l){$&&(this._73O.each(function(w){l[w._id]?$.remove(w):$.add(w)}),x=$.toList()),this._74I.fire({kind:J,datas:new yo(x)})},addSelectionChangeListener:function(A,H,S){this._74I.add(A,H,S)},removeSelectionChangeListener:function(l,X){this._74I.remove(l,X)},_97O:function(Q,O){for(var B,P=this,w=0,Z=new yo(Q);w<Z.size();w++)B=Z.get(w),(P._filterFunc&&!P._filterFunc(B)||O&&P.co(B)||!O&&!P.co(B)||!P._dataModel.contains(B))&&(Z.removeAt(w),w--);return Z},appendSelection:function(g){var K=this;if(K._68O!==nq){var z,T,B=K._73O,o=K._97O(g,!0);o.isEmpty()||(K.sg()&&(z=new yo(B),T=K._map,B.clear(),K._map={},o=new yo(o.get(o.size()-1))),o.each(function(n){B.add(n),K._map[n._id]=n}),K._75I("append",o,z,T))}},removeSelection:function(C){var s=this,J=s._97O(C),r=0,Q=J.size();if(0!==Q){for(;Q>r;r++){var E=J.get(r);s._73O.remove(E),delete s._map[E._id]}s._75I(Sq,J)}},toSelection:function(w,A){return this._73O.toList(w,A)},getSelection:function(){return this._73O},each:function(x,m){this._73O.each(x,m)},setSelection:function(F){var x=this,K=x._73O;if(x._68O!==nq&&!(K.isEmpty()&&!F||1===K.size()&&x.ld()===F)){var E=new yo(K),Y=x._map;K.clear(),x._map={};var U=x._97O(F,!0);x.sg()&&U.size()>1&&(U=new yo(U.get(U.size()-1))),U.each(function(P){K.add(P),x._map[P._id]=P}),x._75I("set",H,E,Y)}},clearSelection:function(){var A=this,z=A._73O;if(z.size()>0){var O=z.toList();z.clear(),A._map={},A._75I(In,O)}},selectAll:function(){var C=this;if(C._68O!==nq){var E,$,R=C._dataModel.toDatas();if(C._filterFunc)for(E=0;E<R.size();E++)$=R.get(E),C._filterFunc($)||(R.removeAt(E),E--);var b=C._73O,U=new yo(b),p=C._map;b.clear(),C._map={},C.sg()&&R.size()>1&&(R=new yo(R.get(R.size()-1)));var m=R.size();for(E=0;m>E;E++)$=R.get(E),b.add($),C._map[$._id]=$;C._75I("all",H,U,p)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(W){return this._map[W._id]!=H},getLastData:function(){var t=this._73O;return t.size()>0?t.get(t.size()-1):H},getFirstData:function(){var P=this._73O;return P.size()>0?P.get(0):H},isSelectable:function(Y){var I=this;return Y&&I._68O!==nq?I._filterFunc?I._filterFunc(Y):!0:!1}}),hq(e,{edgeGroupAgentFunc:H,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:s.rectSelectBorder,graphViewRectSelectBackground:Si,graphViewEditPointSize:h?17:7,graphViewEditPointBorderColor:s.editPointBorder,graphViewEditPointBackground:s.editPointBackground,setEdgeType:function(i,G,V){tq[i]=G,Rl[i]=V},getEdgeType:function(p){return tq[p]}},!0),hq(g,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":x,"image.stretch":"fill",icons:x,ingroup:!0,"body.color":x,opacity:x,pixelPerfect:!0,"select.color":jb,"select.width":1,"select.padding":2,"select.type":Un,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":jb,"border.color":x,"border.width":2,"border.padding":2,"border.type":Un,label:x,"label.font":x,"label.color":em,"label.background":x,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":x,"label.max":x,"label.opacity":x,"label.scale":1,"label.align":x,label2:x,"label2.font":x,"label2.color":em,"label2.background":x,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":x,"label2.max":x,"label2.opacity":x,"label2.scale":1,"label2.align":x,note:x,"note.expanded":!0,"note.font":x,"note.color":yb,"note.background":jb,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":x,"note.toggleable":!0,"note.border.width":1,"note.border.color":x,"note.opacity":x,"note.scale":1,"note.align":x,note2:x,"note2.expanded":!0,"note2.font":x,"note2.color":yb,"note2.background":jb,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":x,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":x,"note2.opacity":x,"note2.scale":1,"note2.align":x,"group.type":x,"group.image":x,"group.image.stretch":"fill","group.repeat.image":x,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":x,"group.title.color":yb,"group.title.background":s.groupTitleBackground,"group.title.align":U,"group.background":s.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":x,"group.border.color":Fo,"group.border.cap":sd,"group.border.join":zg,"group.gradient":H,"group.gradient.color":"#FFF",shape:x,"shape.background":Fo,"shape.repeat.image":x,"shape.border.width":0,"shape.border.color":Fo,"shape.border.3d":!1,"shape.border.3d.color":x,"shape.border.3d.accuracy":x,"shape.border.cap":sd,"shape.border.join":zg,"shape.border.pattern":x,"shape.gradient":H,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":Ep,"shape.dash.offset":0,"shape.dash.color":Rb,"shape.dash.width":x,"shape.dash.3d":!1,"shape.dash.3d.color":x,"shape.dash.3d.accuracy":x,"shape.polygon.side":6,"shape.arc.from":G,"shape.arc.to":C,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":x,"edge.type":x,"edge.points":x,"edge.segments":x,"edge.color":Fo,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":x,"edge.3d.accuracy":x,"edge.cap":sd,"edge.join":zg,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":x,"edge.dash":!1,"edge.dash.pattern":Ep,"edge.dash.offset":0,"edge.dash.color":Rb,"edge.dash.width":x,"edge.dash.3d":!1,"edge.dash.3d.color":x,"edge.dash.3d.accuracy":x,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":x,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":x,"grid.column.percents":x,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":s.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":s.gridCellBorderColor,"grid.block":x,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":s.gridBlockColor},!0),hq(hr,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(u){this._5I=u},_76I:function(S,q,y){this._39I&&this._39I.fire({data:S,oldIndex:q,newIndex:y})},addIndexChangeListener:function(i,v,J){var $=this;$._39I||($._39I=new Tg),$._39I.add(i,v,J)},removeIndexChangeListener:function(I,T){this._39I.remove(I,T)},prepareRemove:function(G){dl(G)&&(G.setSource(H),G.setTarget(H)),G._70O&&G._70O.toList().each(this.remove,this),G._69O&&G._69O.toList().each(function(L){L.setHost(H)}),G._host&&G.setHost(H)},onAdded:function(j){this.isAutoAdjustIndex()&&this._76O(j)},onDataPropertyChanged:function(b,u){ns[u.property]&&this.isAutoAdjustIndex()&&this._76O(b)},isAdjustable:function(Y){return vp(Y)||dl(Y)},isAdjustedToBottom:function(g){return nn(g)?g.isExpanded()&&fr(g):!1},_76O:function(o){var e=this;e.isAdjustedToBottom(o)?(e.sendToBottom(o),o.eachChild(e._76O,e)):e.sendToTop(o)},sendToTop:function(K){var s=this;if(s.contains(K)&&s.isAdjustable(K)){var w=s._datas;if(K!==w.get(s.size()-1)){var S=w.indexOf(K);w.removeAt(S),w.add(K),s._76I(K,S,s.size()-1)}if(dl(K)){var n=K._40I;n&&!s.isAdjustedToBottom(n)&&s.sendToTop(n),n=K._41I,n&&!s.isAdjustedToBottom(n)&&s.sendToTop(n)}K._69O&&K._69O.each(function(i){i.isRelatedTo(K)||vp(K)&&i.isLoopedHostOn(K)||s.sendToTop(i)}),K.ISubGraph||(!nn(K)||K.isExpanded())&&K._adjustChildrenToTop&&K.eachChild(function(E){dl(E)||s.sendToTop(E)})}},sendToBottom:function(Z,w){var z=this;if(Z!==w&&z.contains(Z)&&z.isAdjustable(Z)&&(!w||z.contains(w))){var J=z._datas,h=J.remove(Z),k=w?z._datas.indexOf(w):0;if(J.add(Z,k),h!==k){z._76I(Z,h,k);var $=Z._parent;!$||$.ISubGraph||dl($)||z.sendToBottom(Z._parent,Z)}}}}),hq(ze,{ms_edit:function($){$._46O=function(U){var d=this,q=d.gv.dm(),w=q.getHistoryManager(),j=d._index,e=d._89I,C=d._node,Y=d._shape,k=d._edge,$=d._77I;C&&e?(this.fi({kind:"endEditRect",event:U,data:C,direction:e}),w&&w.endInteraction()):Y&&j>=0?(d.fi({kind:"endEditPoint",event:U,data:Y,index:j}),w&&w.endInteraction()):k&&j>=0?(d.fi({kind:"endEditPoint",event:U,data:k,index:j}),w&&w.endInteraction()):$&&(d.fi({kind:"endEditRotation",event:U,data:$}),w&&w.endInteraction())},$._78I=function($){var m=this;m.autoScroll($);var P=m.gv.lp($),h=m._index,w=m._89I,U=m._node,C=m._shape,k=m._edge,q=m._77I;if(U&&w)m._80O(P),m.fi({kind:"betweenEditRect",event:$,data:U,direction:w});else if(C&&h>=0)P.e=C.getPoints().get(h).e,C.setPoint(h,P),m.fi({kind:"betweenEditPoint",event:$,data:C,index:h});else if(k&&h>=0){var f=k.s(fd);P.e=f.get(h).e,f.set(h,P),k.fp(fd,H,f),m.fi({kind:"betweenEditPoint",event:$,data:k,index:h})}else if(q){var e=q.p(),N=K+l(P.y-e.y,P.x-e.x);t(N)<.04&&(N=0),q.setRotation(N),m.fi({kind:"betweenEditRotation",event:$,data:q})}},$._80O=function(k){var T=this,J=T._rect,i=J.x,e=J.y,E=J.width,n=J.height,P=T._89I;"northwest"===P?J=Ro(k,{x:i+E,y:e+n}):P===se?J=Ro({x:i,y:k.y},{x:i+E,y:e+n}):"northeast"===P?J=Ro({x:i,y:k.y},{x:k.x,y:e+n}):P===Td?J=Ro({x:k.x,y:e},{x:i+E,y:e+n}):P===Qn?J=Ro({x:i,y:e},{x:k.x,y:e+n}):"southwest"===P?J=Ro({x:k.x,y:e},{x:i+E,y:k.y}):"south"===P?J=Ro({x:i,y:e},{x:i+E,y:k.y}):"southeast"===P&&(J=Ro({x:i,y:e},k)),T._node.setRect(J)},$._80I=function(F,Y,b,A,L){var I=this,e=I.gv.getEditPointSize()+2;return ap({x:Y-e/2,y:b-e/2,width:e,height:e},F)?(I._89I!==A&&(I.setCursor(L),I._89I=A),!0):!1},$._79I=function(V,b,e){var A=this,x=A.gv,s=b?x.getDataUI(b):H,k=s?s._55O:H;if(k){var S,J,c,K=x.getEditPointSize()+2,D=x.lp(V);if(vp(b)){if(k._56O&&vp(b)&&(J=k._98o,ap({x:J.x-K/2,y:J.y-K/2,width:K,height:K},D)))return A._77I=b,e&&A.fi({kind:"beginEditRotation",event:V,data:b}),A.setCursor("crosshair"),!0;if(k._43O&&b instanceof Zr)for(c=b.getPoints(),S=c.size()-1;S>=0;S--)if(J=c.get(S),ap({x:J.x-K/2,y:J.y-K/2,width:K,height:K},D))return A._index=S,A._shape=b,e&&A.fi({kind:"beginEditPoint",event:V,data:b,index:S}),A.setCursor("crosshair"),!0;if(k._42O){var _=b.getRect(),w=_.x,v=_.y,W=_.width,G=_.height;if(A._80I(D,w,v,"northwest","nwse-resize")||A._80I(D,w+W/2,v,se,Oi)||A._80I(D,w+W,v,"northeast","nesw-resize")||A._80I(D,w,v+G/2,Td,Jb)||A._80I(D,w+W,v+G/2,Qn,Jb)||A._80I(D,w,v+G,"southwest","nesw-resize")||A._80I(D,w+W/2,v+G,"south",Oi)||A._80I(D,w+W,v+G,"southeast","nwse-resize"))return A._node=b,A._rect=b.getRect(),e&&A.fi({kind:"beginEditRect",event:V,data:b,direction:A._89I}),!0}}if(k._43O&&dl(b)&&b.s(Tq)===zh&&(c=b.s(fd)))for(S=c.size()-1;S>=0;S--)if(J=c.get(S),ap({x:J.x-K/2,y:J.y-K/2,width:K,height:K},D))return A._index=S,A._edge=b,e&&A.fi({kind:"beginEditPoint",event:V,data:b,index:S}),A.setCursor("crosshair"),!0}return!1}},ms_gv:function(e){e._currentSubGraph=H,e.upSubGraph=function(){this.setCurrentSubGraph(fo(this._currentSubGraph))},e.isVisible=function($){var d=this;if(fo($)!==d._currentSubGraph)return!1;if(dl($)){var g=$._40I,z=$._41I;if(!g||!z)return!1;if(!($.s("edge.independent")||d.isVisible(g)&&d.isVisible(z)))return!1;if($.isEdgeGroupHidden())return!1}else for(var t=$._parent;t&&!t.ISubGraph;){if(nn(t)&&(!t.isExpanded()||!d.isVisible(t)))return!1;t=t._parent}if(d instanceof Mr){if(!$.s("3d.visible"))return!1}else if(!$.s("2d.visible"))return!1;return d._visibleFunc?d._visibleFunc($):!0},e._16o=function(W){var E=this;W.datas.each(function(r){E.invalidateData(r);var W=r._parent;nn(W)&&vp(r)&&r.s(Ze)&&(E.invalidateData(W),W._49I&&W._49I.each(function(U){E.invalidateData(U)}))}),E.onSelectionChanged(W)},e.onSelectionChanged=function(u){var r=this,q=r.sm();if(1===q.size()&&("set"===u.kind||"append"===u.kind)){var E=q.ld();r.isAutoMakeVisible()&&r.makeVisible(E),r._76O&&r._dataModel.isAutoAdjustIndex()&&r._76O(E)}},e.makeVisible=function(m){if(m){var a=this,k=a.getDataUI?a.getDataUI(m):a.getData3dUI(m);if(k){var i=m,p=fo(m);for(p!==a._currentSubGraph&&a.setCurrentSubGraph(p);(i=i._parent)&&i!==p;)nn(i)&&i.setExpanded(!0);a._23I=m,a.iv()}}},e.getLabel=function(S){var E=S.getStyle(jd);return E===x?S.getName():E},e.getLabelBackground=function(g){return g.getStyle("label.background")},e.getLabelColor=function(w){return w.getStyle("label.color")},e.getLabel2=function(z){return z.getStyle("label2")},e.getLabel2Background=function(q){return q.getStyle("label2.background")},e.getLabel2Color=function(j){return j.getStyle("label2.color")},e.getNote=function(f){return f.getStyle(ir)},e.getNoteBackground=function(g){return g.getStyle("note.background")},e.getNote2=function(e){return e.getStyle(nc)},e.getNote2Background=function(X){return X.getStyle("note2.background")},e.handleClick=function(n,u,M){var f=this;u?(f.fi({kind:"clickData",event:n,data:u,part:M}),f.onDataClicked(u,n)):(f.fi({kind:"clickBackground",event:n}),f.onBackgroundClicked(n))},e.handleDoubleClick=function(N,g,r){var G=this;Ue(N)&&(g?(G.fi({kind:"doubleClickData",event:N,data:g,part:r}),G.onDataDoubleClicked(g,N,r),G.checkDoubleClickOnNote(N,g,r)||G.checkDoubleClickOnRotation&&G.checkDoubleClickOnRotation(N,g,r)||(dl(g)?G.onEdgeDoubleClicked(g,N,r):g.ISubGraph?G.onSubGraphDoubleClicked(g,N,r):nn(g)?G.onGroupDoubleClicked(g,N,r):g.IDoorWindow?G.onDoorWindowDoubleClicked(g,N,r):g.ICSGBox&&G.onCSGBoxDoubleClicked(g,N,r))):(G.fi({kind:"doubleClickBackground",event:N}),G.onBackgroundDoubleClicked(N)))},e.onSubGraphDoubleClicked=function(z){this.setCurrentSubGraph(z)},e.onEdgeDoubleClicked=function(y,R){y.ISubGraph&&!Ji(R)?this.setCurrentSubGraph(y):y.s("edge.toggleable")&&y.toggle()},e.onGroupDoubleClicked=function(Z){Z.s("group.toggleable")&&Z.toggle()},e.onDoorWindowDoubleClicked=function(x){x.s("dw.toggleable")&&x.toggle(!0)},e.onCSGBoxDoubleClicked=function(W,I){var X=this;if(X instanceof Mr){var w=X.getHitFaceInfo(I);w&&w.face&&W.s(w.face+".toggleable")&&W.toggleFace(w.face,!0)}},e.onBackgroundClicked=function(){},e.onBackgroundDoubleClicked=function(){this.upSubGraph()},e.onDataClicked=function(){},e.onDataDoubleClicked=function(){},e.onAutoLayoutEnded=function(){},e.onMoveEnded=function(){},e.onPanEnded=function(){},e.onPinchEnded=function(){},e.onRectSelectEnded=function(){},e.onZoomEnded=function(){}},ms_icons:function(s){s.getRotation=function(X){return X==H?0:X},s._15O=function(){var K=this,B=K.s(Xf);if(B){var p=K,f=K.data||K._data,d=K._38o={icons:B,rects:{}};for(var g in B){var _=B[g],l=wo(_.shape3d,f,p);if(!(wo(_.visible,f,p)===!1||wo(_.for3d,f,p)&&!K.I3d||l&&!K.I3d)){var s=l?[l]:wo(_.names,f,p),t=s?s.length:0,I=wo(_.position,f,p)||3,R=wo(_.offsetX,f,p)||0,W=wo(_.offsetY,f,p)||0,P=wo(_.direction,f,p)||Qn,O=wo(_.gap,f,p),Y=O!=H?O:1,b=wo(_.rotation,f,p),U=wo(_.keepOrien,f,p),w=wo(_.rotationFixed,f,p)?b:K.getRotation(b,U,I),j=H,D=d.rects[g]=new Array(t);D.rotation=w;for(var C=0;t>C;C++){var o,Q,e,z,Z=s[C];if(l)e=0,z=0;else{var q=Dp(Z);e=wo(_.width,f,p),z=wo(_.height,f,p),e==H&&(e=Dn(q,f)),z==H&&(z=Kc(q,f))}if(j?P===Qn?R+=e/2:P===Td?R-=e/2:P===se?W-=z/2:W+=z/2:j={width:e,height:z},K.I3d){var F=-e/2,n=-z/2;Q={width:e,height:z,mat:K._16O(wo(_.autorotate,f,p),I,j,wo(_.face,f,p)||u,wo(_.t3,f,p),wo(_.r3,f,p),wo(_.rotationMode,f,p),R,W),vs:new Po([F,-n,0,F,-n-z,0,F+e,-n-z,0,F+e,-n,0])}}else o=K.getPosition(I,R,W,j,wo(_.positionFixed,f,p)),Q={x:o.x-e/2,y:o.y-z/2,width:e,height:z},K._68o(Q,w);D[C]=Q,P===Qn?R+=e/2+Y:P===Td?R-=e/2+Y:P===se?W-=z/2+Y:W+=z/2+Y}}}}}}});var Id={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Nc={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},or={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},ns={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Qm={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},Kd={"edge.type":1,"edge.group":1},bl={rotation:1,rotationX:1,rotationZ:1},ed={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},De={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},Ar={shape:1,thickness:1,position:1},zo=function(H,B){if(!H||!nn(B)||B.isEmpty())return!1;for(H=H._parent;nn(H);){if(H===B)return!0;H=H._parent}return!1},fo=function(Q){if(!Q)return H;if(dl(Q)){var U=Q._40I,M=Q._41I;if(!U||!M)return H;var N=fo(U),C=fo(M);return N===C?N:H}for(var m=Q._parent;dl(m)&&!m.ISubGraph;)m=m._parent;return m?m.ISubGraph?m:fo(m):H},Sg=function($,L,H,b){var I=L.getStyle(H)*b;I&&Zb($,I),I=L.getStyle(H+".left")*b,I&&($.x-=I,$.width+=I),I=L.getStyle(H+".right")*b,I&&($.width+=I),I=L.getStyle(H+".top")*b,I&&($.y-=I,$.height+=I),I=L.getStyle(H+".bottom")*b,I&&($.height+=I),$.width<0&&($.width=-$.width,$.x-=$.width),$.height<0&&($.height=-$.height,$.y-=$.height)},fr=function(I){for(var i,D=0,_=I.size();_>D;D++)if(i=I.getChildAt(D),vp(i)&&fr(i))return!0;return I.hasAgentEdges()},nb=function(I){if(!I)return H;for(var c=I._parent;nn(c);){if(!nn(c._parent))return c.isExpanded()?I:c;c.isExpanded()||(I=c),c=c._parent}return I},hk=function(K,F){if(!K||!F)return H;var t,O,s,M=fo(K),d=fo(F);if(M!==d){for(;d&&M!==d;)d=fo(d);if(M===d)return K;t=new yo,t.add(K,0);for(var E=K._parent;vp(E)&&!F.isDescendantOf(E);)t.add(E,0),E=E._parent;for(s=t.size(),O=0;s>O;O++){var $=t.get(O);if(nn($)&&!$.isExpanded())return $;if($.ISubGraph)return $}return K}return K},ko=function(Z){if(Z.isLooped())return Z._source;var k=nb(Z._source),l=nb(Z._target);return k===l?Z._source:hk(k,l)},_r=function(Z){if(Z.isLooped())return Z._target;var j=nb(Z._source),o=nb(Z._target);return j===o?Z._target:hk(o,j)},ji=function(p,x){var C;if(nn(x)&&x.isExpanded()){var m=p.getDataUI(x);m&&m._88I&&(C=m._88I.rect)}return C?C:x.getRect()},Od=function(D,Z,S,I,p){return Z?(S=Ui(S,ji(D,Z)),S.x+=I,S.y+=p,S):H},wn=function(d,n){if(!d||!n)return H;var C,u,X,w,j,o;if(d===n){if(w=d.getLoopedEdges(),!w)return H;w=new yo(w)}else{if(j=d.getAgentEdges(),o=n.getAgentEdges(),!j||!o)return H;for(u=j.size(),C=0;u>C;C++)X=j.get(C),o.contains(X)&&(w||(w=new yo),w.add(X))}if(w)for(C=0;C<w.size();C++)X=w.get(C),X.getStyle(Tq)===zh&&(X._22I(H),w.removeAt(C),C--);return w},lh=function($,b){var V=wn($,b);if(V&&!V.isEmpty()){if(1===V.size())return V.get(0)._22I(H),void 0;var k=new yo,e=new yo;V.each(function(q){var Q=q.s("edge.group");k.contains(Q)||k.add(Q)}),k.sort(),k.each(function(n){e.add(new j.EdgeGroup(V.toList(function(k){return n===k.s("edge.group")}),e))}),e.each(function(b){b.each(function(v){v._22I(b)})})}},yl=function(h,i){if(i){var Z=i.rect,S=i.color,s=i.rotation,g=i.labelWidth,a=i.background,l=i.opacity,v=i.scale,b=v!=H&&1!==v;if(l!=H){var E=h.globalAlpha;h.globalAlpha*=l}if(s||b){h.save();var q=Z.x+Z.width/2,K=Z.y+Z.height/2;Vj(h,q,K),s&&pd(h,s),b&&h.scale(v,v),Vj(h,-q,-K)}if(a&&Db(h,Z.x,Z.y,Z.width,Z.height,a),g){var u=Z.width,B=h.createLinearGradient(Z.x,Z.y,Z.x+u,Z.y);B.addColorStop(0,S),B.addColorStop(.9,S),B.addColorStop(1,un),S=B,Z.width=g}$p(h,i.ss,Z,i.font,S,i.align),g&&(Z.width=u),(s||b)&&h.restore(),l!=H&&(h.globalAlpha=E)}},Ke=function(E,R){if(R){var t=R.rect,T=t.x,Z=t.y,J=t.width,z=t.height,y=R.background,U=R.borderWidth,D=R.borderColor,M=R.labelWidth,I=R.opacity,m=R.scale,i=m!=H&&1!==m;if(I!=H){var e=E.globalAlpha;E.globalAlpha*=I}if(i){E.save();var X=t.x+t.width/2,p=t.y+t.height/2;Vj(E,X,p),E.scale(m,m),Vj(E,-X,-p)}if(R.expanded){var x=P(8,J/4),c=Z+z-8;if(E.fillStyle=y,E.beginPath(),E.moveTo(T,Z),E.lineTo(T,c),E.lineTo(T+J/2,c),E.lineTo(T+J/2,Z+z),E.lineTo(T+J/2+x,c),E.lineTo(T+J,c),E.lineTo(T+J,Z),E.closePath(),E.fill(),U&&(E.lineWidth=U,E.lineJoin="round",E.lineCap="round",E.strokeStyle=D?D:bg(y),E.beginPath(),E.moveTo(T+J,Z),E.lineTo(T+J,c),E.lineTo(T+J/2+x,c),E.lineTo(T+J/2,Z+z),E.stroke(),E.strokeStyle=D?D:Go(y),E.beginPath(),E.moveTo(T+J,Z),E.lineTo(T,Z),E.lineTo(T,c),E.lineTo(T+J/2,c),E.lineTo(T+J/2,Z+z),E.stroke()),t.height-=8,y=R.color,M){var Q=J,S=E.createLinearGradient(T,Z,T+Q,Z);S.addColorStop(0,y),S.addColorStop(.9,y),S.addColorStop(1,un),y=S,t.width=M}$p(E,R.ss,t,R.font,y,R.align),M&&(t.width=Q),t.height+=8}else{var L=J/2;U&&(E.lineWidth=U,E.lineJoin="round",E.lineCap="round",E.strokeStyle=D?D:bg(y),E.beginPath(),E.arc(T+L,Z+L,L,K,1.6*G,!0),E.moveTo(T+L,Z+z),E.lineTo(T+J-L/5,Z+L),E.stroke(),E.strokeStyle=D?D:Go(y),E.beginPath(),E.arc(T+L,Z+L,L,1.6*G,K,!0),E.moveTo(T+L,Z+z),E.lineTo(T+L/5,Z+L),E.stroke()),E.fillStyle=y,E.beginPath(),E.arc(T+L,Z+L,L,0,C,!0),E.moveTo(T+L,Z+z),E.lineTo(T+J-L/5,Z+L),E.lineTo(T+L/5,Z+L),E.closePath(),E.fill(),E.fillStyle=R.color,E.beginPath(),E.arc(T+L,Z+L,L/3,0,C,!0),E.fill()}i&&E.restore(),I!=H&&(E.globalAlpha=e)}},ag=function(o,x){return x>2*o?o:x/2},al=function(b,A,H,$){if(!b||!A)return 0;var E=l(A.y-b.y,A.x-b.x);return H||(E=A.x<b.x?E+G:E),E+$},Mn=function(z,D,T,A,k,J,P){P&&(z.x>D.x||z.x===D.x&&z.y>D.y)&&(T=tc[T],k=-k);var n=Ui(T,{x:0,y:0,width:Io(z,D),height:0},J);return n.x+=A,n.y+=k,n=new Ah(l(D.y-z.y,D.x-z.x)).tf(n),n.x+=z.x,n.y+=z.y,n},Lk=function(h,Y,P,l,K){if(h._19Q=!0,!P.getEdgeGroup())return l?P.s("edge.gap"):0;var r,w=0,p=0,m=0;if(P.getEdgeGroup().getSiblings().each(function(X){X.each(function(h){if(Y.isVisible(h)&&h.s(Tq)==K){var C=h.s("edge.gap");r?(p+=m/2+C/2,m=C):(r=h,m=C),h===P&&(w=p)}})}),l)return p-w+m;var Z=w-p/2;return r&&P._40I!==r._40I&&(h._19Q=!1),Z},ym=function(){var Q=function(q){var K=[];return q.forEach(function(v){K.push({x:v.x,y:v.y}),K.push({x:v.x+v.width,y:v.y+v.height}),K.push({x:v.x+v.width,y:v.y}),K.push({x:v.x,y:v.y+v.height})}),K};return function(o,c,y){if("oval"===o){var h=0,p=y.height/y.width,M=p*p,t=y.x+y.width/2,_=y.y+y.height/2,s=Q(c);s.forEach(function(y){var Z=y.x-t,v=y.y-_,T=Z*Z+v*v/M;T>h&&(h=T)}),h=a(h);var T=p*h;return{x:t-h,y:_-T,width:2*h,height:2*T}}if("circle"===o){var N=0,t=y.x+y.width/2,_=y.y+y.height/2,s=Q(c);return s.forEach(function(g){var T=g.x-t,$=g.y-_,o=T*T+$*$;o>N&&(N=o)}),N=a(N),{x:t-N,y:_-N,width:2*N,height:2*N}}return"roundRect"===o?(Zb(y,P(y.width,y.height)/16),y):y}}(),$d=j.graph={},Ib=function(j,i,w){oc(q+".graph."+j,i,w)};j.layout={};var ul={comps:[{type:Ad,points:[85,50,70,115,100,71,86,107,88,49,57,85,54,97,56,56,82,98,67,68,97,84,54,56,109,121,119,76,118,72,72,116,82,112,74,116,70,97,84,68,79,65,98,114,87,120,49,116,74,100,48,54,107,89,51,104,65,100,53,52,112,55,120,47],borderWidth:1,borderColor:H}]};ul[wd]=ul[aq]=160,$b("node_image",rb(30,30,[{type:Un,rect:[4,5,22,16],gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[2,3,26,20],borderWidth:1,borderColor:Fo},{type:Un,rect:[11,23,8,4],background:Fo},{type:Un,rect:[6,27,18,2],background:Fo}])),$b("node_icon",rb(16,16,[{type:Un,rect:[2,2,12,10],gradient:og,gradientColor:nm,background:Fo},{type:fq,rect:[2,2,12,10],width:1,color:Fo},{type:Un,rect:[6,12,4,2],background:Fo},{type:Un,rect:[4,14,8,1],background:Fo}])),$b("group_image",rb(66,39,[{type:Un,rect:[44.3,18,18.1,12.8],gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[3.3,17.8,18.1,12.8],gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Fo,gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[26.2,29.4,12.8,4.2],background:Fo},{type:Un,rect:[21.3,33.5,22.5,2.3],background:Fo},{type:Un,rect:[5.3,32.7,14.1,2.1],background:Fo},{type:Un,rect:[9,30.4,6.7,2.4],background:Fo},{type:Un,rect:[50,30.7,6.7,2.4],background:Fo},{type:Un,rect:[46.3,33,14.1,2.1],background:Fo}])),$b("group_icon",rb(16,16,[{type:Un,rect:[4,12,4,2],background:Fo},{type:Un,rect:[2,13,8,1],background:Fo},{type:Un,rect:[12,12,2,1],background:Fo},{type:Un,rect:[11,13,4,1],background:Fo},{type:Un,rect:[10,7,6,5],gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[1,2,10,10],gradient:og,gradientColor:nm,background:Fo},{type:fq,rect:[1,2,10,10],width:1,color:Fo}])),$b("edge_icon",rb(16,16,[{type:Un,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[10.8,1,4,4],background:Fo},{type:Un,rect:[1,11,4,4],background:Fo}])),$b("subGraph_image",rb(72,45,[{type:Ad,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[29.6,30.7,3.6,1.8],background:Fo},{type:Un,rect:[28.4,32.3,6,1.2],background:Fo},{type:Un,rect:[37.3,32,10.8,1.8],background:Fo},{type:Un,rect:[39.1,29.9,7.2,2.3],background:Fo},{type:Un,rect:[26.6,23.7,9.6,7.2],gradient:og,gradientColor:nm,background:Fo},{type:Un,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Fo,gradient:og,gradientColor:nm,background:Fo}])),$b("subGraph_icon",rb(17,17,[{type:Ad,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:og,gradientColor:nm,background:Fo}])),$b("shape_icon",rb(16,16,[{type:Ad,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Fo}])),$b("polyline_icon",rb(16,16,[{type:Ad,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Fo},Gf(7.5,.4),Gf(7.5,6.3),Gf(13.6,6.3),Gf(13.6,14),Gf(.7,13.9),Gf(.7,.3)])),$b("grid_icon",rb(16,16,[{type:Un,rect:[1,1,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[6,1,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[11,1,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[11,6,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[6,6,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[1,6,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[11,11,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[6,11,4,4],background:Fo,gradient:og,gradientColor:nm},{type:Un,rect:[1,11,4,4],background:Fo,gradient:og,gradientColor:nm}])),$b("light_icon",rb(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Fo},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Fo,gradient:og,gradientColor:nm,background:{func:function(k){var K=k?k.s(Yq):H;return ro(K)?"rgb("+S(255*K[0])+","+S(255*K[1])+","+S(255*K[2])+")":K||Fo}}}]));var Il=function(n,D){for(var a=n.vertices,p=0;p<a.length;p++){var c=a[p],b=c.y;c.y=c.z,c.z=-b,D&&(c.y+=D)}},hg=function(s){for(var b,Z,m,J,c,Y,p=[],I=[],W=[],C=s.faces,v=0,M=0,y=0,o=C.length;o>v;v++,M+=6,y+=9){var g=C[v];1===g.i?(b||(b=[],Z=[],m=[]),pe(g,v,M,y,s,b,m,Z)):2===g.i?(J||(J=[],c=[],Y=[]),pe(g,v,M,y,s,J,Y,c)):pe(g,v,M,y,s,p,W,I)}return{vs:p,uv:I,ns:W,top_vs:b,top_uv:Z,top_ns:m,bottom_vs:J,bottom_uv:c,bottom_ns:Y}},pe=function(O,f,S,L,Q,i,w,k){var V=Q.vertices,t=Q.faceVertexUvs,q=V[O.a],u=V[O.b],v=V[O.c];i[L]=q.x,i[L+1]=q.y,i[L+2]=q.z,i[L+3]=u.x,i[L+4]=u.y,i[L+5]=u.z,i[L+6]=v.x,i[L+7]=v.y,i[L+8]=v.z;var p=O.vertexNormals;if(3===p.length){var g=p[0],J=p[1],n=p[2];w[L]=g.x,w[L+1]=g.y,w[L+2]=g.z,w[L+3]=J.x,w[L+4]=J.y,w[L+5]=J.z,w[L+6]=n.x,w[L+7]=n.y,w[L+8]=n.z}else{var E=O.normal;w[L]=E.x,w[L+1]=E.y,w[L+2]=E.z,w[L+3]=E.x,w[L+4]=E.y,w[L+5]=E.z,w[L+6]=E.x,w[L+7]=E.y,w[L+8]=E.z}var e=t[0][f][0],h=t[0][f][1],P=t[0][f][2];k[S]=e.x,k[S+1]=e.y,k[S+2]=h.x,k[S+3]=h.y,k[S+4]=P.x,k[S+5]=P.y},tj=function(B,R,g,M,F,U,O,$,u){g==H&&(g=!0),M==H&&(M=!0),O==H&&(O=1),$==H&&($=0);var t=new Ac;return sc(t,B,R,u),hg(new hp(t,{top:g,bottom:M,curveSegments:F,amount:O,repeatUVLength:U},-O/2+$))},Gp=function(m,X){this.x=m||0,this.y=X||0};Gp.prototype={constructor:Gp,add:function(w){return this.x+=w.x,this.y+=w.y,this
},sub:function(g){return this.x-=g.x,this.y-=g.y,this},equals:function(b){return b.x===this.x&&b.y===this.y},multiplyScalar:function(K){return this.x*=K,this.y*=K,this},distanceTo:function(k){return a(this.distanceToSquared(k))},distanceToSquared:function(h){var f=this.x-h.x,M=this.y-h.y;return f*f+M*M},clone:function(){return new Gp(this.x,this.y)}};var is=function(l,T,y){this.x=l||0,this.y=T||0,this.z=y||0};is.prototype={constructor:is,set:function(Y,V,g){return this.x=Y,this.y=V,this.z=g,this},setY:function(V){return this.y=V,this},copy:function(J){return this.x=J.x,this.y=J.y,this.z=J.z,this},add:function(j){return this.x+=j.x,this.y+=j.y,this.z+=j.z,this},addVectors:function(q,$){return this.x=q.x+$.x,this.y=q.y+$.y,this.z=q.z+$.z,this},sub:function(V){return this.x-=V.x,this.y-=V.y,this.z-=V.z,this},subVectors:function(S,n){return this.x=S.x-n.x,this.y=S.y-n.y,this.z=S.z-n.z,this},multiplyScalar:function(Q){return this.x*=Q,this.y*=Q,this.z*=Q,this},applyMatrix4:function(h){var n=this.x,E=this.y,u=this.z,c=h.elements;return this.x=c[0]*n+c[4]*E+c[8]*u+c[12],this.y=c[1]*n+c[5]*E+c[9]*u+c[13],this.z=c[2]*n+c[6]*E+c[10]*u+c[14],this},divideScalar:function(a){if(0!==a){var t=1/a;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},dot:function(Z){return this.x*Z.x+this.y*Z.y+this.z*Z.z},length:function(){return a(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(X){var j=this.x,B=this.y,p=this.z;return this.x=B*X.z-p*X.y,this.y=p*X.x-j*X.z,this.z=j*X.y-B*X.x,this},crossVectors:function(W,U){var Q=W.x,z=W.y,t=W.z,y=U.x,q=U.y,k=U.z;return this.x=z*k-t*q,this.y=t*y-Q*k,this.z=Q*q-z*y,this},distanceTo:function(u){return a(this.distanceToSquared(u))},distanceToSquared:function(i){var Z=this.x-i.x,K=this.y-i.y,u=this.z-i.z;return Z*Z+K*K+u*u},clone:function(){return new is(this.x,this.y,this.z)}};var Bo=function(){this.elements=new Float32Array(16)};Bo.prototype={constructor:Bo,set:function($,h,w,Z,t,N,G,d,z,s,R,_,Q,g,B,l){var y=this.elements;return y[0]=$,y[4]=h,y[8]=w,y[12]=Z,y[1]=t,y[5]=N,y[9]=G,y[13]=d,y[2]=z,y[6]=s,y[10]=R,y[14]=_,y[3]=Q,y[7]=g,y[11]=B,y[15]=l,this},makeRotationAxis:function(z,o){var Y=L(o),W=D(o),n=1-Y,E=z.x,s=z.y,t=z.z,S=n*E,w=n*s;return this.set(S*E+Y,S*s-W*t,S*t+W*s,0,S*s+W*t,w*s+Y,w*t-W*E,0,S*t-W*s,w*t+W*E,n*t*t+Y,0,0,0,0,1),this}};var Rc=function(c){this.repeatUVLength=c};Rc.prototype={generateTopUV:function(r,N,i,S,u,l,Z){var x,U,h,L,y=r.vertices,Y=y[S].x,I=y[S].y,A=y[u].x,f=y[u].y,O=y[l].x,a=y[l].y,V=this.repeatUVLength;if(V)x=0,U=0,h=V,L=V;else{this._bb||(this._bb=N.getBoundingBox());var T=this._bb;x=T.minX,U=T.minY,h=T.maxX-x,L=T.maxY-U}return Z?[new Gp((Y-x)/h,(I-U)/L),new Gp((A-x)/h,(f-U)/L),new Gp((O-x)/h,(a-U)/L)]:[new Gp((Y-x)/h,1-(I-U)/L),new Gp((A-x)/h,1-(f-U)/L),new Gp((O-x)/h,1-(a-U)/L)]},generateBottomUV:function(M,e,E,i,W,t){return this.generateTopUV(M,e,E,i,W,t,!0)},generateSideWallUV:function(h,j,q,d,i,u,L,s,V,Z,m,g){if(!this._cl){for(var t,K,U=[],I=0,G=q.length,p=0;G>p;p++){t=q[p],K=q[(p+1)%G];var R=t.x-K.x,x=t.y-K.y,S=a(R*R+x*x);U.push(I),I+=S}for(var p=0;G>p;p++)U[p]/=I;this._cl=U}var U=this._cl,O=1-V/Z,P=1-(V+1)/Z,y=U[m],T=U[g];return T>y&&(y+=1),[new Gp(y,O),new Gp(T,O),new Gp(T,P),new Gp(y,P)]}};var mh=function(O,m,T,W,M,U){this.a=O,this.b=m,this.c=T,this.i=U,this.normal=W instanceof is?W:new is,this.vertexNormals=W instanceof Array?W:[]};mh.prototype={constructor:mh};var Ye=function(){},tf=Ye.prototype;tf.getPointAt=function(e){var U=this.getUtoTmapping(e);return this.getPoint(U)},tf.getPoints=function(Q){Q||(Q=5);var r,s=[];for(r=0;Q>=r;r++)s.push(this.getPoint(r/Q));return s},tf.getSpacedPoints=function(d){d||(d=5);var J,x=[];for(J=0;d>=J;J++)x.push(this.getPointAt(J/d));return x},tf.getLength=function(){var u=this.getLengths();return u[u.length-1]},tf.getLengths=function(f){if(f||(f=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==f+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var y,k,H=[],X=this.getPoint(0),O=0;for(H.push(0),k=1;f>=k;k++)y=this.getPoint(k/f),O+=y.distanceTo(X),H.push(O),X=y;return this.cacheArcLengths=H,H},tf.getUtoTmapping=function(P,R){var Y,o=this.getLengths(),y=0,r=o.length;Y=R?R:P*o[r-1];for(var O,v=0,D=r-1;D>=v;)if(y=p(v+(D-v)/2),O=o[y]-Y,0>O)v=y+1;else{if(!(O>0)){D=y;break}D=y-1}if(y=D,o[y]==Y){var J=y/(r-1);return J}var F=o[y],n=o[y+1],l=n-F,$=(Y-F)/l,J=(y+$)/(r-1);return J},tf.getTangent=function(q){var a=1e-4,Y=q-a,z=q+a;0>Y&&(Y=0),z>1&&(z=1);var y=this.getPoint(Y),$=this.getPoint(z),A=$.clone().sub(y);return A.normalize()},tf.getTangentAt=function(T){var S=this.getUtoTmapping(T);return this.getTangent(S)},Ye.create=function(z,D){return z.prototype=Fn(Ye.prototype),z.prototype.getPoint=D,z};var _p=function(){this.curves=[],this.autoClose=!1},ne=_p.prototype=Fn(tf);ne.add=function(r){this.curves.push(r)},ne.closePath=function(){var z=this.curves[0].getPoint(0),$=this.curves[this.curves.length-1].getPoint(1);z.equals($)||this.curves.push(new oi($,z))},ne.getPoint=function(x){for(var W,_,y=x*this.getLength(),I=this.getCurveLengths(),G=0;G<I.length;){if(I[G]>=y){W=I[G]-y,_=this.curves[G];var D=1-W/_.getLength();return _.getPointAt(D)}G++}return null},ne.getLength=function(){var S=this.getCurveLengths();return S[S.length-1]},ne.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,B=[],g=0,O=this.curves.length;for(e=0;O>e;e++)g+=this.curves[e].getLength(),B.push(g);return this.cacheLengths=B,B},ne.getTransformedPoints=function(O){return this.getPoints(O)},ne.getBoundingBox=function(){var V,x,q,b,p,i,f=this.getPoints();V=x=Number.NEGATIVE_INFINITY,b=p=Number.POSITIVE_INFINITY;var T,n,s,L,A=f[0]instanceof is;for(L=A?new is:new Gp,n=0,s=f.length;s>n;n++)T=f[n],T.x>V&&(V=T.x),T.x<b&&(b=T.x),T.y>x&&(x=T.y),T.y<p&&(p=T.y),A&&(T.z>q&&(q=T.z),T.z<i&&(i=T.z)),L.add(T);var S={minX:b,minY:p,maxX:V,maxY:x};return A&&(S.maxZ=q,S.minZ=i),S};var Ge=function(X){_p.call(this),this.actions=[],X&&this.fromPoints(X)},pj=Ge.prototype=Fn(_p.prototype),Ub="moveTo",zd="lineTo",vk="quadraticCurveTo",Uq="bezierCurveTo",js="arc",ek="ellipse";pj.fromPoints=function(b){this.moveTo(b[0].x,b[0].y);for(var A=1,D=b.length;D>A;A++)this.lineTo(b[A].x,b[A].y)},pj.moveTo=function(){var Q=Array.prototype.slice.call(arguments);this.actions.push({action:Ub,args:Q})},pj.lineTo=function(_,p){var E=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,s=i[i.length-2],Q=i[i.length-1],K=new oi(new Gp(s,Q),new Gp(_,p));this.curves.push(K),this.actions.push({action:zd,args:E})},pj.quadraticCurveTo=function(p,v,e,N){var g=Array.prototype.slice.call(arguments),Y=this.actions[this.actions.length-1].args,X=Y[Y.length-2],$=Y[Y.length-1],o=new jp(new Gp(X,$),new Gp(p,v),new Gp(e,N));this.curves.push(o),this.actions.push({action:vk,args:g})},pj.bezierCurveTo=function(j,t,r,U,Z,I){var Y=Array.prototype.slice.call(arguments),$=this.actions[this.actions.length-1].args,A=$[$.length-2],n=$[$.length-1],s=new sf(new Gp(A,n),new Gp(j,t),new Gp(r,U),new Gp(Z,I));this.curves.push(s),this.actions.push({action:Uq,args:Y})},pj.arc=function(b,w,l,n,N,Q){var K=this.actions[this.actions.length-1].args,F=K[K.length-2],g=K[K.length-1];this.absarc(b+F,w+g,l,n,N,Q)},pj.absarc=function(W,B,N,q,z,v){this.absellipse(W,B,N,N,q,z,v)},pj.ellipse=function(n,W,z,v,J,p,C){var d=this.actions[this.actions.length-1].args,E=d[d.length-2],F=d[d.length-1];this.absellipse(n+E,W+F,z,v,J,p,C)},pj.absellipse=function(i,u,o,p,s,U,I){var h=Array.prototype.slice.call(arguments),k=new Fq(i,u,o,p,s,U,I);this.curves.push(k);var A=k.getPoint(1);h.push(A.x),h.push(A.y),this.actions.push({action:ek,args:h})},pj.getSpacedPoints=function(O){O||(O=40);for(var d=[],w=0;O>w;w++)d.push(this.getPoint(w/O));return d},pj.getPoints=function(g,O){g=g||12;var P,i,d,$,r,u,p,H,B,o,q,C,X,J,G,K,A,h,e=[];for(P=0,i=this.actions.length;i>P;P++)switch(d=this.actions[P],$=d.action,r=d.args,$){case Ub:e.push(new Gp(r[0],r[1]));break;case zd:e.push(new Gp(r[0],r[1]));break;case vk:for(u=r[2],p=r[3],o=r[0],q=r[1],e.length>0?(J=e[e.length-1],C=J.x,X=J.y):(J=this.actions[P-1].args,C=J[J.length-2],X=J[J.length-1]),G=1;g>=G;G++)K=G/g,A=Do.b2(K,C,o,u),h=Do.b2(K,X,q,p),e.push(new Gp(A,h));break;case Uq:for(u=r[4],p=r[5],o=r[0],q=r[1],H=r[2],B=r[3],e.length>0?(J=e[e.length-1],C=J.x,X=J.y):(J=this.actions[P-1].args,C=J[J.length-2],X=J[J.length-1]),G=1;g>=G;G++)K=G/g,A=Do.b3(K,C,o,H,u),h=Do.b3(K,X,q,B,p),e.push(new Gp(A,h));break;case js:var V,T=r[0],Y=r[1],S=r[2],F=r[3],W=r[4],x=!!r[5],I=W-F,Z=2*g;for(G=1;Z>=G;G++)K=G/Z,x||(K=1-K),V=F+K*I,A=T+S*L(V),h=Y+S*D(V),e.push(new Gp(A,h));break;case ek:var V,T=r[0],Y=r[1],U=r[2],w=r[3],F=r[4],W=r[5],x=!!r[6],I=W-F,Z=2*g;for(G=1;Z>=G;G++)K=G/Z,x||(K=1-K),V=F+K*I,A=T+U*L(V),h=Y+w*D(V),e.push(new Gp(A,h))}var N=e[e.length-1],j=1e-10;return t(N.x-e[0].x)<j&&t(N.y-e[0].y)<j&&e.splice(e.length-1,1),O&&e.push(e[0]),e},pj.toShapes=function(Z,O){function m(c){var M,U,p,f,l,R=[],G=new Ge;for(M=0,U=c.length;U>M;M++)p=c[M],l=p.args,f=p.action,f==Ub&&0!=G.actions.length&&(R.push(G),G=new Ge),G[f].apply(G,l);return 0!=G.actions.length&&R.push(G),R}function M(I){for(var D=[],j=0,z=I.length;z>j;j++){var S=I[j],F=new Ac;F.actions=S.actions,F.curves=S.curves,D.push(F)}return D}function I(f,K){for(var D=1e-10,s=K.length,O=!1,R=s-1,C=0;s>C;R=C++){var N=K[R],H=K[C],E=H.x-N.x,U=H.y-N.y;if(t(U)>D){if(0>U&&(N=K[C],E=-E,H=K[R],U=-U),f.y<N.y||f.y>H.y)continue;if(f.y==N.y){if(f.x==N.x)return!0}else{var g=U*(f.x-N.x)-E*(f.y-N.y);if(0==g)return!0;if(0>g)continue;O=!O}}else{if(f.y!=N.y)continue;if(H.x<=f.x&&f.x<=N.x||N.x<=f.x&&f.x<=H.x)return!0}}return O}var H=m(this.actions);if(0==H.length)return[];if(O===!0)return M(H);var y,L,j,E=[];if(1==H.length)return L=H[0],j=new Ac,j.actions=L.actions,j.curves=L.curves,E.push(j),E;var s=!Ac.Utils.isClockWise(H[0].getPoints());s=Z?!s:s;var w,Y=[],l=[],S=[],b=0;l[b]=x,S[b]=[];var n,W;for(n=0,W=H.length;W>n;n++)L=H[n],w=L.getPoints(),y=Do.isClockWise(w),y=Z?!y:y,y?(!s&&l[b]&&b++,l[b]={s:new Ac,p:w},l[b].s.actions=L.actions,l[b].s.curves=L.curves,s&&b++,S[b]=[]):S[b].push({h:L,p:w[0]});if(!l[0])return M(H);if(l.length>1){for(var U=!1,v=[],u=0,p=l.length;p>u;u++)Y[u]=[];for(var u=0,p=l.length;p>u;u++){l[u];for(var c=S[u],V=0;V<c.length;V++){for(var h=c[V],N=!0,F=0;F<l.length;F++)I(h.p,l[F].p)&&(u!=F&&v.push({froms:u,tos:F,hole:V}),N?(N=!1,Y[F].push(h)):U=!0);N&&Y[u].push(h)}}v.length>0&&(U||(S=Y))}var f,G,o;for(n=0,W=l.length;W>n;n++)for(j=l[n].s,E.push(j),f=S[n],G=0,o=f.length;o>G;G++)j.holes.push(f[G].h);return E};var Ac=function(){Ge.apply(this,arguments),this.holes=[]},Lb=Ac.prototype=Fn(pj);Lb.getPointsHoles=function(k){var f,Q=this.holes.length,P=[];for(f=0;Q>f;f++)P[f]=this.holes[f].getTransformedPoints(k);return P},Lb.extractAllPoints=function(x){return{shape:this.getTransformedPoints(x),holes:this.getPointsHoles(x)}},Lb.extractPoints=function(J){return this.extractAllPoints(J)};var Do={triangulateShape:function(P,b){function l(c,E,F){return c.x!=E.x?c.x<E.x?c.x<=F.x&&F.x<=E.x:E.x<=F.x&&F.x<=c.x:c.y<E.y?c.y<=F.y&&F.y<=E.y:E.y<=F.y&&F.y<=c.y}function k(X,k,i,Y,Q){var n=1e-10,q=k.x-X.x,v=k.y-X.y,p=Y.x-i.x,B=Y.y-i.y,C=X.x-i.x,o=X.y-i.y,s=v*p-q*B,I=v*C-q*o;if(t(s)>n){var g;if(s>0){if(0>I||I>s)return[];if(g=B*C-p*o,0>g||g>s)return[]}else{if(I>0||s>I)return[];if(g=B*C-p*o,g>0||s>g)return[]}if(0==g)return!Q||0!=I&&I!=s?[X]:[];if(g==s)return!Q||0!=I&&I!=s?[k]:[];if(0==I)return[i];if(I==s)return[Y];var L=g/s;return[{x:X.x+L*q,y:X.y+L*v}]}if(0!=I||B*C!=p*o)return[];var M=0==q&&0==v,F=0==p&&0==B;if(M&&F)return X.x!=i.x||X.y!=i.y?[]:[X];if(M)return l(i,Y,X)?[X]:[];if(F)return l(X,k,i)?[i]:[];var b,x,w,z,m,R,G,D;return 0!=q?(X.x<k.x?(b=X,w=X.x,x=k,z=k.x):(b=k,w=k.x,x=X,z=X.x),i.x<Y.x?(m=i,G=i.x,R=Y,D=Y.x):(m=Y,G=Y.x,R=i,D=i.x)):(X.y<k.y?(b=X,w=X.y,x=k,z=k.y):(b=k,w=k.y,x=X,z=X.y),i.y<Y.y?(m=i,G=i.y,R=Y,D=Y.y):(m=Y,G=Y.y,R=i,D=i.y)),G>=w?G>z?[]:z==G?Q?[]:[m]:D>=z?[m,x]:[m,R]:w>D?[]:w==D?Q?[]:[b]:D>=z?[b,x]:[b,R]}function G(a,v,I,B){var z=1e-10,X=v.x-a.x,G=v.y-a.y,T=I.x-a.x,Q=I.y-a.y,i=B.x-a.x,r=B.y-a.y,g=X*Q-G*T,h=X*r-G*i;if(t(g)>z){var D=i*Q-r*T;return g>0?h>=0&&D>=0:h>=0||D>=0}return h>0}function L(F,p){function W(L,b){var K=$.length-1,Z=L-1;0>Z&&(Z=K);var N=L+1;N>K&&(N=0);var X=G($[L],$[Z],$[N],u[b]);if(!X)return!1;var f=u.length-1,c=b-1;0>c&&(c=f);var w=b+1;return w>f&&(w=0),X=G(u[b],u[c],u[w],$[L]),X?!0:!1}function r(r,R){var c,U,J;for(c=0;c<$.length;c++)if(U=c+1,U%=$.length,J=k(r,R,$[c],$[U],!0),J.length>0)return!0;return!1}function i(X,y){var Q,R,e,f,i;for(Q=0;Q<q.length;Q++)for(R=p[q[Q]],e=0;e<R.length;e++)if(f=e+1,f%=R.length,i=k(X,y,R[e],R[f],!0),i.length>0)return!0;return!1}for(var u,P,U,o,S,b,Z,h,I,O,z,$=F.concat(),q=[],D=[],E=0,g=p.length;g>E;E++)q.push(E);for(var H=0,y=2*q.length;q.length>0&&(y--,!(0>y));)for(U=H;U<$.length;U++){o=$[U],P=-1;for(var E=0;E<q.length;E++)if(b=q[E],Z=o.x+":"+o.y+":"+b,D[Z]===x){u=p[b];for(var m=0;m<u.length;m++)if(S=u[m],W(U,m)&&!r(o,S)&&!i(o,S)){P=m,q.splice(E,1),h=$.slice(0,U+1),I=$.slice(U),O=u.slice(P),z=u.slice(0,P+1),$=h.concat(O).concat(z).concat(I),H=U;break}if(P>=0)break;D[Z]=!0}if(P>=0)break}return $}for(var p,N,c,_,E,w,v={},o=P.concat(),H=0,B=b.length;B>H;H++)Array.prototype.push.apply(o,b[H]);for(p=0,N=o.length;N>p;p++)E=o[p].x+":"+o[p].y,v[E]!==x,v[E]=p;var e=L(P,b),i=Lg.Triangulate(e,!1);for(p=0,N=i.length;N>p;p++)for(_=i[p],c=0;3>c;c++)E=_[c].x+":"+_[c].y,w=v[E],w!==x&&(_[c]=w);return i.concat()},isClockWise:function(o){return Lg.Triangulate.area(o)<0},b2p0:function(_,Q){var s=1-_;return s*s*Q},b2p1:function(F,K){return 2*(1-F)*F*K},b2p2:function(F,j){return F*F*j},b2:function(e,z,f,k){return this.b2p0(e,z)+this.b2p1(e,f)+this.b2p2(e,k)},b3p0:function(U,o){var u=1-U;return u*u*u*o},b3p1:function(S,u){var v=1-S;return 3*v*v*S*u},b3p2:function(g,j){var $=1-g;return 3*$*g*g*j},b3p3:function(c,E){return c*c*c*E},b3:function(j,q,v,b,Z){return this.b3p0(j,q)+this.b3p1(j,v)+this.b3p2(j,b)+this.b3p3(j,Z)}},Lg={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(g){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(y){var m=y.familyName.toLowerCase(),v=this;return v.faces[m]=v.faces[m]||{},v.faces[m][y.cssFontWeight]=v.faces[m][y.cssFontWeight]||{},v.faces[m][y.cssFontWeight][y.cssFontStyle]=y,v.faces[m][y.cssFontWeight][y.cssFontStyle]=y,y},drawText:function(B){var A,e=this.getFace(),o=this.size/e.resolution,P=0,x=String(B).split(""),Q=x.length,R=[];for(A=0;Q>A;A++){var X=new Ge,K=this.extractGlyphPoints(x[A],e,o,P,X);P+=K.offset,R.push(K.path)}var m=P/2;return{paths:R,offset:m}},extractGlyphPoints:function(c,L,E,u,X){var t,v,G,x,M,w,U,y,S,H,z,J,k,D,N,I,j,b,h,l=[],e=L.glyphs[c]||L.glyphs["?"];if(e){if(e.o)for(x=e._cachedOutline||(e._cachedOutline=e.o.split(" ")),w=x.length,U=E,y=E,t=0;w>t;)switch(M=x[t++]){case"m":S=x[t++]*U+u,H=x[t++]*y,X.moveTo(S,H);break;case"l":S=x[t++]*U+u,H=x[t++]*y,X.lineTo(S,H);break;case"q":if(z=x[t++]*U+u,J=x[t++]*y,N=x[t++]*U+u,I=x[t++]*y,X.quadraticCurveTo(N,I,z,J),h=l[l.length-1])for(k=h.x,D=h.y,v=1,G=this.divisions;G>=v;v++){var V=v/G;Do.b2(V,k,N,z),Do.b2(V,D,I,J)}break;case"b":if(z=x[t++]*U+u,J=x[t++]*y,N=x[t++]*U+u,I=x[t++]*y,j=x[t++]*U+u,b=x[t++]*y,X.bezierCurveTo(N,I,j,b,z,J),h=l[l.length-1])for(k=h.x,D=h.y,v=1,G=this.divisions;G>=v;v++){var V=v/G;Do.b3(V,k,N,j,z),Do.b3(V,D,I,b,J)}}return{offset:e.ha*E,path:X}}}};Lg.generateShapes=function(d,t){t=t||{};var j=t.size!==x?t.size:100,B=t.curveSegments!==x?t.curveSegments:4,X=t.font!==x?t.font:"helvetiker",b=t.weight!==x?t.weight:"normal",Z=t.style!==x?t.style:"normal";Lg.size=j,Lg.divisions=B,Lg.face=X,Lg.weight=b,Lg.style=Z;for(var C=Lg.drawText(d),w=C.paths,A=[],o=0,O=w.length;O>o;o++)Array.prototype.push.apply(A,w[o].toShapes());return A},function(j){var h=1e-10,s=function(I,S){var e=I.length;if(3>e)return null;var D,M,B,p=[],W=[],T=[];if(a(I)>0)for(M=0;e>M;M++)W[M]=M;else for(M=0;e>M;M++)W[M]=e-1-M;var Y=e,q=2*Y;for(M=Y-1;Y>2;){if(q--<=0)return S?T:p;if(D=M,D>=Y&&(D=0),M=D+1,M>=Y&&(M=0),B=M+1,B>=Y&&(B=0),f(I,D,M,B,Y,W)){var F,Q,H,N,k;for(F=W[D],Q=W[M],H=W[B],p.push([I[F],I[Q],I[H]]),T.push([W[D],W[M],W[B]]),N=M,k=M+1;Y>k;N++,k++)W[N]=W[k];Y--,q=2*Y}}return S?T:p},a=function(F){for(var l=F.length,q=0,I=l-1,o=0;l>o;I=o++)q+=F[I].x*F[o].y-F[o].x*F[I].y;return.5*q},f=function(E,C,I,o,G,m){var B,x,S,A,g,n,e,H,f;if(x=E[m[C]].x,S=E[m[C]].y,A=E[m[I]].x,g=E[m[I]].y,n=E[m[o]].x,e=E[m[o]].y,h>(A-x)*(e-S)-(g-S)*(n-x))return!1;var j,L,Q,i,$,p,N,W,c,l,D,V,z,v,M;for(j=n-A,L=e-g,Q=x-n,i=S-e,$=A-x,p=g-S,B=0;G>B;B++)if(H=E[m[B]].x,f=E[m[B]].y,!(H===x&&f===S||H===A&&f===g||H===n&&f===e)&&(N=H-x,W=f-S,c=H-A,l=f-g,D=H-n,V=f-e,M=j*l-L*c,z=$*W-p*N,v=Q*V-i*D,M>=-h&&v>=-h&&z>=-h))return!1;return!0};return j.Triangulate=s,j.Triangulate.area=a,j}(Lg),R._typeface_js={faces:Lg.faces,loadFace:Lg.loadFace};var zs=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},Qj=zs.prototype={constructor:zs,computeFaceNormals:function(){for(var d=new is,u=new is,f=0,A=this.faces.length;A>f;f++){var w=this.faces[f],V=this.vertices[w.a],Y=this.vertices[w.b],I=this.vertices[w.c];d.subVectors(I,Y),u.subVectors(V,Y),d.cross(u),d.normalize(),w.normal.copy(d)}},computeVertexNormals:function(q){var K,A,E,O,e,L;for(L=new Array(this.vertices.length),K=0,A=this.vertices.length;A>K;K++)L[K]=new is;if(q){var b,Z,G,C=new is,B=new is;for(E=0,O=this.faces.length;O>E;E++)e=this.faces[E],b=this.vertices[e.a],Z=this.vertices[e.b],G=this.vertices[e.c],C.subVectors(G,Z),B.subVectors(b,Z),C.cross(B),L[e.a].add(C),L[e.b].add(C),L[e.c].add(C)}else for(E=0,O=this.faces.length;O>E;E++)e=this.faces[E],L[e.a].add(e.normal),L[e.b].add(e.normal),L[e.c].add(e.normal);for(K=0,A=this.vertices.length;A>K;K++)L[K].normalize();for(E=0,O=this.faces.length;O>E;E++)e=this.faces[E],e.vertexNormals[0]=L[e.a].clone(),e.vertexNormals[1]=L[e.b].clone(),e.vertexNormals[2]=L[e.c].clone()},mergeVertices:function(){var b,T,X,n,H,S,M,N,o={},z=[],e=[],V=4,t=Y(10,V);for(X=0,n=this.vertices.length;n>X;X++)b=this.vertices[X],T=y(b.x*t)+"_"+y(b.y*t)+"_"+y(b.z*t),o[T]===x?(o[T]=X,z.push(this.vertices[X]),e[X]=z.length-1):e[X]=e[o[T]];var u=[];for(X=0,n=this.faces.length;n>X;X++){H=this.faces[X],H.a=e[H.a],H.b=e[H.b],H.c=e[H.c],S=[H.a,H.b,H.c];for(var J=0;3>J;J++)if(S[J]==S[(J+1)%3]){u.push(X);break}}for(X=u.length-1;X>=0;X--){var I=u[X];for(this.faces.splice(I,1),M=0,N=this.faceVertexUvs.length;N>M;M++)this.faceVertexUvs[M].splice(I,1)}var r=this.vertices.length-z.length;return this.vertices=z,r}},Fq=function(v,w,j,r,o,H,X){this.aX=v,this.aY=w,this.xRadius=j,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=H,this.aClockwise=X};Fq.prototype=Fn(tf),Fq.prototype.getPoint=function(R){var w,g=this.aEndAngle-this.aStartAngle;0>g&&(g+=C),g>C&&(g-=C),w=this.aClockwise===!0?this.aEndAngle+(1-R)*(C-g):this.aStartAngle+R*g;var I=this.aX+this.xRadius*L(w),V=this.aY+this.yRadius*D(w);return new Gp(I,V)};var oi=function(g,P){this.v1=g,this.v2=P},Xg=oi.prototype=Fn(tf);Xg.getPoint=function(v){var U=this.v2.clone().sub(this.v1);return U.multiplyScalar(v).add(this.v1),U},Xg.getPointAt=function(K){return this.getPoint(K)},Xg.getTangent=function(){var I=this.v2.clone().sub(this.v1);return I.normalize()};var jp=function(S,s,T){this.v0=S,this.v1=s,this.v2=T};jp.prototype=Fn(tf),jp.prototype.getPoint=function(P){var v,b;return v=Do.b2(P,this.v0.x,this.v1.x,this.v2.x),b=Do.b2(P,this.v0.y,this.v1.y,this.v2.y),new Gp(v,b)};var sf=function(C,V,w,L){this.v0=C,this.v1=V,this.v2=w,this.v3=L};sf.prototype=Fn(tf),sf.prototype.getPoint=function(J){var f,d;return f=Do.b3(J,this.v0.x,this.v1.x,this.v2.x,this.v3.x),d=Do.b3(J,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Gp(f,d)},Ye.create(function(h,K){this.v1=h,this.v2=K},function(W){var j=new is;return j.subVectors(this.v2,this.v1),j.multiplyScalar(W),j.add(this.v1),j});var Aq=Ye.create(function(n,O,E){this.v0=n,this.v1=O,this.v2=E},function(d){var E,X,H;return E=Do.b2(d,this.v0.x,this.v1.x,this.v2.x),X=Do.b2(d,this.v0.y,this.v1.y,this.v2.y),H=Do.b2(d,this.v0.z,this.v1.z,this.v2.z),new is(E,X,H)}),jg=Ye.create(function(I,S,F,i){this.v0=I,this.v1=S,this.v2=F,this.v3=i},function(n){var $,I,y;return $=Do.b3(n,this.v0.x,this.v1.x,this.v2.x,this.v3.x),I=Do.b3(n,this.v0.y,this.v1.y,this.v2.y,this.v3.y),y=Do.b3(n,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new is($,I,y)}),Dc=function(X,N,P,I,A,R,t,f){zs.call(this),I=I!==x?I:.5,A=A!==x?A:.5,f=f!==x?f:1,X=X||8,R=R||0,t=t||C;var O,i,y=1,o=f/2,m=[],H=[],K=this.vertices,Z=this.faces,c=this.faceVertexUvs;for(i=0;y>=i;i++){var z=[],U=[],l=i/y,j=l*(A-I)+I;for(O=0;X>=O;O++){var B=O/X,k=new is,s=-(B*t+R);k.z=j*D(s),k.y=-l*f+o,k.x=j*L(s),K.push(k),z.push(K.length-1),U.push(new Gp(B,l))}m.push(z),H.push(U)}var $,G,u=(A-I)/f;for(O=0;X>O;O++)for(0!==I?($=K[m[0][O]].clone(),G=K[m[0][O+1]].clone()):($=K[m[1][O]].clone(),G=K[m[1][O+1]].clone()),$.setY(a($.x*$.x+$.z*$.z)*u).normalize(),G.setY(a(G.x*G.x+G.z*G.z)*u).normalize(),i=0;y>i;i++){var q=m[i][O],v=m[i+1][O],T=m[i+1][O+1],Q=m[i][O+1],S=$.clone(),h=$.clone(),M=G.clone(),b=G.clone(),V=H[i][O].clone(),e=H[i+1][O].clone(),Y=H[i+1][O+1].clone(),p=H[i][O+1].clone();Z.push(new mh(q,v,Q,[S,h,b])),c[0].push([V,e,p]),Z.push(new mh(v,T,Q,[h.clone(),M,b.clone()])),c[0].push([e.clone(),Y,p.clone()])}if(N&&I>0)for(this.vertices.push(new is(0,o,0)),O=0;X>O;O++){var q=m[0][O],v=m[0][O+1],T=this.vertices.length-1,S=new is(0,1,0),h=new is(0,1,0),M=new is(0,1,0),V=H[0][O].clone(),e=H[0][O+1].clone(),Y=new Gp(e.x,0);Z.push(new mh(q,v,T,[S,h,M],null,1));var g=O/X*C,d=L(g),E=D(g),W=(O+1)/X*C,w=L(W),J=D(W);c[0].push([new Gp(.5+.5*d,.5+.5*E),new Gp(.5+.5*w,.5+.5*J),new Gp(.5,.5)])}if(P&&A>0)for(this.vertices.push(new is(0,-o,0)),O=0;X>O;O++){var q=m[i][O+1],v=m[i][O],T=K.length-1,S=new is(0,-1,0),h=new is(0,-1,0),M=new is(0,-1,0),V=H[i][O+1].clone(),e=H[i][O].clone();Z.push(new mh(q,v,T,[S,h,M],null,2));var g=O/X*C,d=L(g),E=D(g),W=(O+1)/X*C,w=L(W),J=D(W);c[0].push([new Gp(.5+.5*w,.5-.5*J),new Gp(.5+.5*d,.5-.5*E),new Gp(.5,.5)])}};Dc.prototype=Fn(Qj);var Xc=function(X,h,V,J,$,m,T){zs.call(this),T=T||.5,X=X||16,h=h||16,V=(V!==x?V:0)-G,J=J!==x?J:C,$=$!==x?$:0,m=m!==x?m:G;var N,A,l=[],u=[],B=this.vertices,k=this.faces,S=this.faceVertexUvs;for(A=0;h>=A;A++){var e=[],Z=[];for(N=0;X>=N;N++){var M=N/X,v=A/h,b=new is;b.x=-T*L(V+M*J)*D($+v*m),b.y=T*L($+v*m),b.z=T*D(V+M*J)*D($+v*m),B.push(b),e.push(B.length-1),Z.push(new Gp(M,v))}l.push(e),u.push(Z)}for(A=0;h>A;A++)for(N=0;X>N;N++){var Y=l[A][N+1],R=l[A][N],i=l[A+1][N],K=l[A+1][N+1],z=B[Y].clone().normalize(),p=B[R].clone().normalize(),I=B[i].clone().normalize(),P=B[K].clone().normalize(),f=u[A][N+1].clone(),H=u[A][N].clone(),s=u[A+1][N].clone(),Q=u[A+1][N+1].clone();t(B[Y].y)===T?(f.x=(f.x+H.x)/2,k.push(new mh(Y,i,K,[z,I,P])),S[0].push([f,s,Q])):t(B[i].y)===T?(s.x=(s.x+Q.x)/2,k.push(new mh(Y,R,i,[z,p,I])),S[0].push([f,H,s])):(k.push(new mh(Y,R,K,[z,p,P])),S[0].push([f,H,Q]),k.push(new mh(R,i,K,[p.clone(),I,P.clone()])),S[0].push([H.clone(),s,Q.clone()]))}};Xc.prototype=Fn(Qj);var xo=function(k,o,V,T,E,F){zs.call(this),k=k||.33,o=o||.17,T=T||8,V=V||6,E=E||0,F=F||C;for(var R=new is,m=[],l=[],B=0;T>=B;B++)for(var S=B/T*C+G,s=0;V>=s;s++){var i=s/V*F+E;R.x=k*L(i),R.z=-k*D(i);var g=new is,z=k+o*L(S);g.x=z*L(i),g.z=-z*D(i),g.y=o*D(S),this.vertices.push(g),m.push(new Gp(s/V,1-B/T)),l.push(g.clone().sub(R).normalize())}for(var B=1;T>=B;B++)for(var s=1;V>=s;s++){var O=(V+1)*B+s-1,y=(V+1)*(B-1)+s-1,M=(V+1)*(B-1)+s,a=(V+1)*B+s,u=new mh(O,y,a,[l[O].clone(),l[y].clone(),l[a].clone()]);this.faces.push(u),this.faceVertexUvs[0].push([m[O].clone(),m[y].clone(),m[a].clone()]),u=new mh(y,M,a,[l[y].clone(),l[M].clone(),l[a].clone()]),this.faces.push(u),this.faceVertexUvs[0].push([m[y].clone(),m[M].clone(),m[a].clone()])}this.computeFaceNormals()};xo.prototype=Fn(Qj);var hp=function(D,M,J){return D?(zs.call(this),D=D instanceof Array?D:[D],this.addShapeList(D,M),Il(this,J),this.computeFaceNormals(),void 0):(D=[],void 0)},Cd=hp.prototype=Fn(zs.prototype);Cd.addShapeList=function(T,N){for(var S=T.length,_=0;S>_;_++){var F=T[_];this.addShape(F,N)}},Cd.addShape=function(X,j){function z(){if(j.bottom)for(var s=0;E>s;s++)K=G[s],i(K[2],K[1],K[0],!0);if(j.top)for(s=0;E>s;s++)K=G[s],i(K[0]+g*n,K[1]+g*n,K[2]+g*n,!1)}function U(){var B=0;for(V(m,B),B+=m.length,Y=0,r=b.length;r>Y;Y++)A=b[Y],V(A,B),B+=A.length}function V(I,u){for(var $,F,T=I.length;--T>=0;){$=T,F=T-1,0>F&&(F=I.length-1);var j=0,K=n;for(j=0;K>j;j++){var Y=g*j,o=g*(j+1),J=u+$+Y,p=u+F+Y,z=u+F+o,c=u+$+o;M(J,p,z,c,I,j,K,$,F)}}}function H(_,e,w){$.vertices.push(new is(_,e,w))}function i(Z,G,m,D){Z+=u,G+=u,m+=u,$.faces.push(new mh(Z,G,m,null,null,D?2:1));var P=D?e.generateBottomUV($,X,j,Z,G,m):e.generateTopUV($,X,j,Z,G,m);$.faceVertexUvs[0].push(P)}function M(H,t,N,O,d,P,k,h,s){H+=u,t+=u,N+=u,O+=u,$.faces.push(new mh(H,t,O)),$.faces.push(new mh(t,N,O));var A=e.generateSideWallUV($,X,d,j,H,t,N,O,P,k,h,s);$.faceVertexUvs[0].push([A[0],A[1],A[3]]),$.faceVertexUvs[0].push([A[1],A[2],A[3]])}var D,Z,F,B,d,s=j.amount,y=j.curveSegments||Wc,n=j.steps||1,P=j.extrudePath,h=!1,e=new Rc(j.repeatUVLength);P&&(D=P.getSpacedPoints(n),h=!0,Z=j.frames!==x?j.frames:new gk.FrenetFrames(P,n,!1),F=new is,B=new is,d=new is);var A,Y,r,$=this,u=this.vertices.length,_=X.extractPoints(y),o=_.shape,b=_.holes,k=!Do.isClockWise(o);if(k){for(o=o.reverse(),Y=0,r=b.length;r>Y;Y++)A=b[Y],Do.isClockWise(A)&&(b[Y]=A.reverse());k=!1}var G=Do.triangulateShape(o,b),m=o;for(Y=0,r=b.length;r>Y;Y++)A=b[Y],o=o.concat(A);for(var S,K,g=o.length,E=G.length,N=0;g>N;N++)S=o[N],h?(B.copy(Z.normals[0]).multiplyScalar(S.x),F.copy(Z.binormals[0]).multiplyScalar(S.y),d.copy(D[0]).add(B).add(F),H(d.x,d.y,d.z)):H(S.x,S.y,0);var a;for(a=1;n>=a;a++)for(N=0;g>N;N++)S=o[N],h?(B.copy(Z.normals[a]).multiplyScalar(S.x),F.copy(Z.binormals[a]).multiplyScalar(S.y),d.copy(D[a]).add(B).add(F),H(d.x,d.y,d.z)):H(S.x,S.y,s/n*a);z(),U()};var gk=function(h,Y,K,b,n){function Q(q,Q,X){return x.vertices.push(new is(q,Q,X))-1}zs.call(this),Y=Y||64,K=K||1,b=b||8,n=n||!1;var f,S,t,B,l,k,j,r,z,E,$,U,P,p,o,c,s,G,e,M,T=[],x=this,i=Y+1,R=new is,Z=new gk.FrenetFrames(h,Y,n),w=Z.tangents,V=Z.normals,v=Z.binormals;for(this.tangents=w,this.normals=V,this.binormals=v,z=0;i>z;z++)for(T[z]=[],B=z/(i-1),r=h.getPointAt(B),f=w[z],S=V[z],t=v[z],E=0;b>E;E++)l=E/b*C,k=-K*L(l),j=K*D(l),R.copy(r),R.x+=k*S.x+j*t.x,R.y+=k*S.y+j*t.y,R.z+=k*S.z+j*t.z,T[z][E]=Q(R.x,R.y,R.z);for(z=0;Y>z;z++)for(E=0;b>E;E++)$=n?(z+1)%Y:z+1,U=(E+1)%b,P=T[z][E],p=T[$][E],o=T[$][U],c=T[z][U],s=new Gp(z/Y,E/b),G=new Gp((z+1)/Y,E/b),e=new Gp((z+1)/Y,(E+1)/b),M=new Gp(z/Y,(E+1)/b),this.faces.push(new mh(P,p,c)),this.faceVertexUvs[0].push([s,G,M]),this.faces.push(new mh(p,o,c)),this.faceVertexUvs[0].push([G.clone(),e,M.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};gk.prototype=Fn(Qj),gk.FrenetFrames=function(v,j,D){function r(){$[0]=new is,p[0]=new is,N=Number.MAX_VALUE,S=t(F[0].x),V=t(F[0].y),P=t(F[0].z),N>=S&&(N=S,W.set(1,0,0)),N>=V&&(N=V,W.set(0,1,0)),N>=P&&W.set(0,0,1),J.crossVectors(F[0],W).normalize(),$[0].crossVectors(F[0],J),p[0].crossVectors(F[0],$[0])}var E,N,S,V,P,T,y,W=new is,F=[],$=[],p=[],J=new is,f=new Bo,g=j+1,n=1e-4;for(this.tangents=F,this.normals=$,this.binormals=p,T=0;g>T;T++)y=T/(g-1),F[T]=v.getTangentAt(y),F[T].normalize();for(r(),T=1;g>T;T++)$[T]=$[T-1].clone(),p[T]=p[T-1].clone(),J.crossVectors(F[T-1],F[T]),J.length()>n&&(J.normalize(),E=I(Wl(F[T-1].dot(F[T]),-1,1)),$[T].applyMatrix4(f.makeRotationAxis(J,E))),p[T].crossVectors(F[T],$[T]);if(D)for(E=I(Wl($[0].dot($[g-1]),-1,1)),E/=g-1,F[0].dot(J.crossVectors($[0],$[g-1]))>0&&(E=-E),T=1;g>T;T++)$[T].applyMatrix4(f.makeRotationAxis(F[T],E*T)),p[T].crossVectors(F[T],$[T])};var Vm=function(K,e,$,j){zs.call(this),e=e||18,$=$||0,j=j==H?C:j;for(var N=1/(K.length-1),t=1/e,o=0,W=e;W>=o;o++)for(var P=$+o*t*j,r=L(P),d=D(P),F=0,z=K.length;z>F;F++){var V=K[F],f=new is;f.x=r*V.x-d*V.y,f.y=d*V.x+r*V.y,f.z=V.z,this.vertices.push(f)}for(var s=K.length,o=0,W=e;W>o;o++)for(var F=0,z=K.length-1;z>F;F++){var M=F+s*o,Y=M,x=M+s,r=M+1+s,g=M+1,J=o*t,p=F*N,w=J+t,O=p+N;this.faces.push(new mh(Y,g,x)),this.faceVertexUvs[0].push([new Gp(J,p),new Gp(J,O),new Gp(w,p)]),this.faces.push(new mh(x,g,r)),this.faceVertexUvs[0].push([new Gp(w,p),new Gp(J,O),new Gp(w,O)])}this.mergeVertices(),Il(this),this.computeFaceNormals(),this.computeVertexNormals()};Vm.prototype=Fn(Qj);var nl=function(u,h){h=h||{};var X=Lg.generateShapes(u,h);h.amount=h.height!==x?h.height:50,hp.call(this,X,h)};nl.prototype=Fn(Cd);var qj=j.Node=function(){yi(qj,this)},eb={X:fk,Y:Up,Z:di},Jl={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Pi="xzy",ik=function(a,I,g){if(I){var o=I[0],V=I[1],m=I[2];"xzy"===g?(Up(a,V),di(a,m),fk(a,o)):"xyz"===g?(di(a,m),Up(a,V),fk(a,o)):"yxz"===g?(di(a,m),fk(a,o),Up(a,V)):"yzx"===g?(fk(a,o),di(a,m),Up(a,V)):"zxy"===g?(Up(a,V),fk(a,o),di(a,m)):"zyx"===g?(fk(a,o),Up(a,V),di(a,m)):(Up(a,V),di(a,m),fk(a,o))}};Ae("Node",Tk,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Pi,_64O:0,_rotationX:0,_53O:0,_host:H,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return Wq},_22Q:function(){return Nk},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(K,p){Dq(K,xm(H,H,this.r3(),this.getRotationMode())),this.translate3d(K[0]*p,K[1]*p,K[2]*p)},translateFront:function(e){this.translate3dBy([0,0,1],e)},translateBack:function(i){this.translate3dBy([0,0,-1],i)},translateLeft:function($){this.translate3dBy([-1,0,0],$)},translateRight:function(h){this.translate3dBy([1,0,0],h)},translateTop:function(L){this.translate3dBy([0,1,0],L)},translateBottom:function(c){this.translate3dBy([0,-1,0],c)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(U,A,b){1===arguments.length&&(A=U[1],b=U[2],U=U[0]),this.p(U,b),this.setElevation(A)},translate3d:function(s,R,U){1===arguments.length&&(R=s[1],U=s[2],s=s[0]),this.translate(s,U),this.setElevation(this._54O+R)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(x,I,W){1===arguments.length&&(I=x[1],W=x[2],x=x[0]),this.setSize(x,W),this.setTall(I)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(l,e,K){1===arguments.length&&(e=l[1],K=l[2],l=l[0]),this.setRotationX(l),this.setRotation(-e),this.setRotationZ(K)},setRotationY:function(U){this.setRotation(-U)},getRotationY:function(){return-this._64O},lookAt:function(I,M){M=M||u;var W=this,L=Wg(I,W.p3()),p=Io(L);M===u?(W.r3([-w(L[1]/p),-l(L[2],L[0])+K,0]),W.setRotationMode("xzy")):M===X?(W.r3(0,-l(L[2],L[0]),w(L[1]/p)),W.setRotationMode("zyx")):M===U?(W.r3(0,-l(L[2],L[0])+G,-w(L[1]/p)),W.setRotationMode("zyx")):M===Ol?(W.r3([-w(L[1]/p)+K,-l(L[2],L[0])+K,0]),W.setRotationMode("xzy")):M===Ko&&(W.r3([-w(L[1]/p)-K,-l(L[2],L[0])+K,0]),W.setRotationMode("xzy")),M===n&&(W.r3([-w(L[1]/p)+G,-l(L[2],L[0])+K,G]),W.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(M){var A=this;if(A!==M&&A._host!==M){var k=A._host;k&&k._removeAttach(A),A._host=M,A._host&&A._host._addAttach(A),A.fp("host",k,M),A.onHostChanged(k,M)}},getAttaches:function(){return this._69O},_addAttach:function(O){var u=this;
u._69O||(u._69O=new yo),u._69O.add(O),u.fp("attaches",H,O)},_removeAttach:function(M){var k=this;k._69O.remove(M),k._69O.isEmpty()&&delete k._69O,k.fp("attaches",M,H)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(j){var Q=this;Q._44I||(Q._44I=new yo),Q._42I||(Q._42I=new yo),Q._44I.add(j),Q._42I.add(j),Q._20I()},_4I:function(k){var o=this;o._44I||(o._44I=new yo),o._43I||(o._43I=new yo),o._44I.add(k),o._43I.add(k),o._20I()},_16I:function(g){var l=this;l._44I.remove(g),l._42I.remove(g),l._44I.isEmpty()&&delete l._44I,l._42I.isEmpty()&&delete l._42I,l._20I()},_18I:function(W){var U=this;U._44I.remove(W),U._43I.remove(W),U._44I.isEmpty()&&delete U._44I,U._43I.isEmpty()&&delete U._43I,U._20I()},_20I:function(){var h=this;if(delete h._45I,!h._44I||h._44I.isEmpty())return delete h._70O,void 0;var m;h._44I.each(function(z){z.isLooped()&&(m||(m={}),m[z._id]||(h._45I||(h._45I=new yo),h._45I.add(z),m[z._id]=z))}),m?(h._70O=new yo,h._44I.each(function(Q){m[Q._id]?"A"===m[Q._id]||(m[Q._id]="A",h._70O.add(Q)):h._70O.add(Q)})):h._70O=h._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(_){var y=this;y._46I||(y._46I=new yo),y._48I||(y._48I=new yo),y._46I.add(_),y._48I.add(_),y._19I()},_3I:function(d){var J=this;J._47I||(J._47I=new yo),J._48I||(J._48I=new yo),J._47I.add(d),J._48I.add(d),J._19I()},_15I:function(B){var f=this;f._46I.remove(B),f._48I.remove(B),f._46I.isEmpty()&&delete f._46I,f._48I.isEmpty()&&delete f._48I,f._19I()},_17I:function(z){var a=this;a._47I.remove(z),a._48I.remove(z),a._47I.isEmpty()&&delete a._47I,a._48I.isEmpty()&&delete a._48I,a._19I()},_19I:function(){var q=this;delete q._49I;var w=q._48I;if(w&&!w.isEmpty()){var W={};w.each(function(p){W[p._id]?q._49I||(q._49I=new yo):W[p._id]=p}),q._49I?w.each(function(I){W[I._id]&&(q._49I.add(I),delete W[I._id])}):q._49I=w}},getImage:function(){return this._image},setImage:function(J){var u=this,W=u._image,g=u.getWidth(),i=u.getHeight();u._image=J,u.fp("image",W,J),u.fp(wd,g,u.getWidth()),u.fp(aq,i,u.getHeight())},getElevation:function(){return this._54O},setElevation:function(h){var b=this;if(!b._50O){b._50O=1;var L=b._54O;b._54O=h,b.fp(Xr,L,h),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(w){var v=this;if(!v._49O){v._49O=1;var h=v._64O;v._64O=w,v.fp(Bh,h,w),delete v._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(t){var r=this;if(!r._51O){r._51O=1;var E=r._rotationX;r._rotationX=t,r.fp("rotationX",E,t),delete r._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(I){var g=this;if(!g._52O){g._52O=1;var T=g._53O;g._53O=I,g.fp("rotationZ",T,I),delete g._52O}},getPosition:function(){return this._position},setPosition:function(A,B){var c=this;if(!c._50I){c._50I=1;var b;if(b=2===arguments.length?{x:A,y:B}:A,b.x!==c._position.x||b.y!==c._position.y){var S=c._position;c._position=b,c.fp(Fm,S,b)}delete c._50I}},translate:function(c,F){var y=this._position;this.p(y.x+c,y.y+F)},getWidth:function(){var _=this;if(_._width>=0)return _._width;var z=Dp(_._image);return z?Dn(z,_):20},setWidth:function(w){var G=this,M=G._width;G._width=w,G.fp(wd,M,w)},getHeight:function(){var w=this;if(w._height>=0)return w._height;var L=Dp(w._image);return L?Kc(L,w):20},setHeight:function(s){var Y=this,y=Y._height;Y._height=s,Y.fp(aq,y,s)},setSize:function($,H){var r=this;2===arguments.length?(r.setWidth($),r.setHeight(H)):(r.setWidth($.width),r.setHeight($.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(W,U,s,F){var n=this;1===arguments.length?(n.p(W.x+W.width/2,W.y+W.height/2),n.setWidth(W.width),n.setHeight(W.height)):(n.p(W+s/2,U+F/2),n.setWidth(s),n.setHeight(F))},getRect:function(){var F=this,v=F.getWidth(),H=F.getHeight();return Tn({x:F._position.x-v/2,y:F._position.y-H/2,width:v,height:H},F._64O)},getCorners:function(Q,C){Q==H&&(Q=0),C==H&&(C=Q);var i=this,w=i._position,y=i.getWidth()/2+Q,n=i.getHeight()/2+C,S=new Ah(i._64O,w.x,w.y);return[S.tf(-y,-n),S.tf(y,-n),S.tf(y,n),S.tf(-y,n)]},rotateAt:function(d,w,i){var K=this,Z=K._position,v=K._64O,M=new Ah(v,Z.x,Z.y).tf(d,w),N=a(d*d+w*w),R=l(Z.y-M.y,Z.x-M.x)+i;K.setRotation(v+i),K.p(M.x+N*L(R),M.y+N*D(R))},onParentChanged:function(){qj.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(X){X._7I()})},onPropertyChanged:function(b){var c=this;qj.superClass.onPropertyChanged.call(c,b),c._69O&&c._69O.each(function(Z){Z.handleHostPropertyChange(b)}),c._49I&&c._49I.each(function(_){_.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(C){this.updateAttach(C)},onStyleChanged:function(w){qj.superClass.onStyleChanged.apply(this,arguments),De[w]&&this.updateAttach()},updateAttach:function(M){var J=this;J._51I||cn||(J._51I=1,J._71O(M),delete J._51I)},_71O:function(T){var v,h,P,i,k,M,X=this,F=X._host,_=T?T.property:H,z=T?T.oldValue:H,I=T?T.newValue:H;if(F instanceof Hr){if(_===Xr)X.setElevation(X._54O+I-z);else if(!T||ed[_]){if(v=X.s("attach.row.index"),h=X.s("attach.column.index"),P=F.getCellRect(v,h),!P)return;i=X.s("attach.row.span"),k=X.s("attach.column.span"),(1!==i||1!==k)&&(P=re(P,F.getCellRect(v+i-1,h+k-1))),Sg(P,X,"attach.padding",1),X.setRect(P)}}else if(F instanceof Zr&&(M=X.s("attach.index"))>=0&&(!T||Ar[_])){var Z=X.s("attach.thickness");Z!=H&&X.setHeight(F.getThickness()*Z);var y=X.s("attach.offset"),s=F.getPoints(),a=s.size();if(a>M){var t=s.get(M),p=a===M+1?s.get(0):s.get(M+1),W=[p.x-t.x,p.y-t.y],m=Io(W);if(m){X.s("attach.offset.relative")&&(y*=m),X.s("attach.offset.opposite")&&(y=m-y);var $={x:t.x+W[0]/m*y,y:t.y+W[1]/m*y},w=X.s("attach.gap");w&&(X.s("attach.gap.relative")&&(w*=F.getThickness()),$=lo(H,$,p,w)),X.p($),X.setRotation(l(W[1],W[0]))}}}else T&&(_===Fm?X.translate(I.x-z.x,I.y-z.y):_===Xr?X.setElevation(X._54O+I-z):bl[_]&&X._11Q(F,_,I-z))},_11Q:function(v,n,X){var f=this,I=v.p3(),d=Wg(f.p3(),I),W=Gk(),u=Jl[f.getRotationMode()],$=u[0],B=u[1],J=u[2],M=eb[$],U=eb[B],N=eb[J];n===Bh&&(n="rotationY",X=-X),n===Bh+$?(N(W,v[xe+J]()),U(W,v[xe+B]()),M(W,X),U(W,-v[xe+B]()),N(W,-v[xe+J]()),f[_h+$](f[xe+$]()+X)):n===Bh+B?(N(W,v[xe+J]()),U(W,X),N(W,-v[xe+J]()),f[_h+B](f[xe+B]()+X)):n===Bh+J&&(N(W,X),f[_h+J](f[xe+J]()+X)),Dq(d,W),f.p3(I[0]+d[0],I[1]+d[1],I[2]+d[2])},isHostOn:function(V){var O=this;if(O._host&&V&&V._69O)for(var X={},g=O._host;g&&g!==O&&!X[g._id];){if(g===V)return!0;X[g._id]=g,g=g._host}return!1},isLoopedHostOn:function(e){return this.isHostOn(e)&&e.isHostOn(this)},getSerializableProperties:function(){var N=qj.superClass.getSerializableProperties.call(this);return hq(N,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),N}});var jf=j.Edge=function(p,X){var w=this;yi(jf,w),w.setSource(p),w.setTarget(X)};Ae("Edge",Tk,{_icon:"edge_icon",getUIClass:function(){return tb},_22Q:function(){return kk},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(r){var g=this;if(g._source!==r){var e=g._source;g._source=r,e&&e._16I(g),r&&r._2I(g),g._7I(),g.fp("source",e,r)}},setTarget:function(l){var x=this;if(x._target!==l){var y=x._target;x._target=l,y&&y._18I(x),l&&l._4I(x),x._7I(),x.fp("target",y,l)}},isLooped:function(){var D=this;return D._source===D._target&&!!D._source&&!!D._target},_7I:function(){var F,C=this,l=ko(C);C._40I!==l&&(F=this._40I,F&&F._15I(C),C._40I=l,l&&l._1I(C),C.fp("sourceAgent",F,l),lh(F,C._41I),lh(l,C._41I));var s=_r(C);C._41I!==s&&(F=C._41I,F&&F._17I(C),C._41I=s,s&&s._3I(C),C.fp("targetAgent",F,s),lh(F,C._40I),lh(s,C._40I))},_22I:function(g){this._52I=g,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var C=this;return C._52I&&C._52I.get(0)!==C&&!C.getStyle(Ln)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var F=this,A=F._52I;return A&&!F.getStyle(Ln)&&A.size()>1&&F===A.get(0)},toggle:function(){var W=this._52I,h=!this.s(Ln);W&&W.size()>1&&(W.each(function(p){p.s(Ln,h)}),W.getSiblings().each(function(t){t!==W&&t.each(function(n){n.fp("edgeGroup",H,t)})}))},setStyle:function(i,c){(i===fd||"edge.segments"===i)&&(c=Mb(c)),jf.superClass.setStyle.call(this,i,c)},onStyleChanged:function(X){jf.superClass.onStyleChanged.apply(this,arguments),Kd[X]&&lh(this._41I,this._40I)},getSerializableProperties:function(){var R=jf.superClass.getSerializableProperties.call(this);return hq(R,{source:1,target:1}),R}});var dd=j.Group=function(){yi(dd,this)};Ae("Group",qj,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Ic},onChildAdded:function(){dd.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){dd.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var h=this;if(!h._54I&&!cn){var d=h.getChildrenRect();d&&(h._53I=1,h.p(Ui(h.s("group.position"),d,h.getSize())),delete h._53I)}},getChildrenRect:function(){var l,O=this;return O.eachChild(function(Q){l=re(l,O.getChildRect(Q))}),l},getChildRect:function(U){var c;return vp(U)&&U.s(Ze)&&(nn(U)&&U.isExpanded()&&U.eachChild(function(D){c=re(c,U.getChildRect(D))}),!c&&U.getRect&&(c=U.getRect())),c},setPosition:function(G,c){var q=this;if(!q._54I){var V;V=2===arguments.length?{x:G,y:c}:G,cn||q._53I||(q._54I=1,ab(q._children,V.x-q._position.x,V.y-q._position.y),delete q._54I),dd.superClass.setPosition.call(this,V)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(q){var b=this;if(b._57O!==q){var f=b._57O;b._57O=q,b.fp("expanded",f,b._57O),b._8I()}},_8I:function(){dd.superClass._8I.call(this),this.eachChild(function(T){vp(T)&&T._8I()})},onStyleChanged:function(D){dd.superClass.onStyleChanged.apply(this,arguments),"group.position"===D&&this._81I()},getSerializableProperties:function(){var U=dd.superClass.getSerializableProperties.call(this);return U.expanded=1,U}});var Hr=j.Grid=function(){yi(Hr,this)};Ae("Grid",qj,{IRotatable:!1,_icon:"grid_icon",_image:H,getUIClass:function(){return $m},setRotation:function(){},getCellRect:function(w,c){var o=this,Q=o.s("grid.row.count"),s=o.s("grid.column.count");if(0>=Q||0>=s||0>w||w>=Q||0>c||c>=s)return H;var B,u,R,i=o.getRect(),d=o.s("grid.row.percents"),J=o.s("grid.column.percents");if(Sg(i,o,"grid.border",-1),d&&d._as&&(d=d._as),J&&J._as&&(J=J._as),d&&d.length===Q){for(R=0,B=0;w>B;B++)R+=i.height*d[B];i.y+=R,i.height=i.height*d[w]}else i.height=i.height/Q,i.y+=i.height*w;if(J&&J.length===s){for(u=0,B=0;c>B;B++)u+=i.width*J[B];i.x+=u,i.width=i.width*J[c]}else i.width=i.width/s,i.x+=i.width*c;return Zb(i,-o.s("grid.gap")),i}});var Zr=j.Shape=function(){yi(Zr,this),this._59O=new yo};Zr.__de__=ul,Ae("Shape",qj,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return ah},_22Q:function(){return As},getLength:function(o){return um(sl(this._59O,this._58O,o,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var M=this._58O;return M?new yo(M._as.slice(0)):M},setSegments:function(p){var V=this._58O;p=p?ro(p)?new yo(p.slice(0)):new yo(p._as.slice(0)):new yo,(V&&p&&V._as.join(",")!==p._as.join(",")||V!==p)&&(this._58O=p,this.fp("segments",V,p))},getPoints:function(){return this._59O},toPoints:function(){var t=this._59O;return new yo(t._as.slice(0))},setPoints:function(P){var y=this._59O;P=P?ro(P)?new yo(P.slice(0)):new yo(P._as.slice(0)):new yo,(y&&P&&y._as.join(",")!==P._as.join(",")||y!==P)&&(this._59O=P,this.fs(),this.fp("points",y,P))},addPoint:function(u,d){var _=this.toPoints();_.add(u,d),this.setPoints(_)},setPoint:function(L,X){var l=this.toPoints();l.set(L,X),this.setPoints(l)},removePointAt:function(d){var q=this.toPoints();q.removeAt(d),this.setPoints(q)},setWidth:function(R){var q=this;if(1>R&&(R=1),!q._55I&&!cn&&q.getWidth()){q._55I=1;var L=q._position.x,O=R/q.getWidth(),I=q.toPoints(),E=new yo;I.each(function(m){E.add({x:(m.x-L)*O+L,y:m.y,e:m.e})}),q.setPoints(E),q.fs(),delete q._55I}Zr.superClass.setWidth.call(q,R)},setHeight:function(Q){var r=this;if(1>Q&&(Q=1),!r._55I&&!cn&&r.getHeight()){r._55I=1;var $=r._position.y,o=Q/r.getHeight(),B=r.toPoints(),Y=new yo;B.each(function(q){Y.add({x:q.x,y:(q.y-$)*o+$,e:q.e})}),r.setPoints(Y),r.fs(),delete r._55I}Zr.superClass.setHeight.call(r,Q)},setPosition:function(w,m){var J,f=this;if(!f._28Q){if(f._28Q=1,!f._55I&&!cn){J=2===arguments.length?{x:w,y:m}:w;var y=J.x-f._position.x,Y=J.y-f._position.y;if(0===y&&0===Y)return delete f._28Q,void 0;f._55I=1;var O=f.toPoints(),z=new yo;O.each(function(h){z.add({x:h.x+y,y:h.y+Y,e:h.e})}),f.setPoints(z),f.fs(),delete f._55I}Zr.superClass.setPosition.apply(f,arguments),delete f._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var j=this;if(!j._55I&&!cn){var M=Ro(j._59O);M&&(j._55I=1,j.setRect(M),delete j._55I)}j.fp(Ad,!1,!0)},getSerializableProperties:function(){var b=Zr.superClass.getSerializableProperties.call(this);return b.segments=1,b.points=1,b.thickness=1,b.closePath=1,b}});var Lc=j.Polyline=function(){yi(Lc,this),this.s({"shape.background":null,"shape.border.width":2})};Ae("Polyline",Zr,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return le},getUIClass:function(){return En},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function($){var q=this;if(!q._24Q&&!cn&&q.getTall()){q._24Q=1;var R=q._54O,m=$/q.getTall();q._59O.each(function(A){A.e=A.e==H?R:(A.e-R)*m+R}),q.fs(),delete q._24Q}Lc.superClass.setTall.call(q,$)},setElevation:function(P){var i=this;if(!i._24Q&&!cn){i._24Q=1;var S=P-i._54O;i._59O.each(function(B){B.e==H?B.e=P:B.e+=S}),i.fs(),delete i._24Q}Lc.superClass.setElevation.apply(i,arguments)},fireShapeChange:function(){var L=this,q=L._59O;if(!L._24Q&&!cn){var p=q.size();if(p){var M=1,X=q.get(0),D=L._54O;X.e==H&&(X.e=D);for(var j=X.e,w=0;p>M;M++){X=q.get(M),X.e==H&&(X.e=D);var i=P(j,X.e),c=W(j+w,X.e);j=i,w=c-i}L._24Q=1,L.setTall(w),L.setElevation(j+w/2),delete L._24Q}}Lc.superClass.fireShapeChange.apply(L,arguments)}});var Xd=j.SubGraph=function(){yi(Xd,this)};Ae("SubGraph",qj,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){Xd.superClass._8I.call(this),this.eachChild(function(T){vp(T)&&T._8I()})}}),j.EdgeGroup=function(z,v){this._70O=z,this._siblings=v;for(var $,R,W=0,C=z.size(),d=g[Ln];C>W;W++)if($=z.get(W).getStyle(Ln,!1),$!=H){d=$;break}d==H&&(d=!0);var f=e.edgeGroupAgentFunc;for(f&&(R=f(z),R&&R!==z.get(0)&&(z.remove(R),z.add(R,0))),W=0;C>W;W++)z.get(W).s(Ln,d)},Ae("EdgeGroup",O,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(P){return this._70O.get(P)},indexOf:function(A){return this._70O.indexOf(A)},each:function(s,w){this._70O.each(s,w)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(T,x){this._siblings.each(function(D){D._70O.each(T,x)})}});var Tr=j.JSONSerializer=function(A,c){this.dm=this._dataModel=A,this._hierarchical=!!c};Ae("JSONSerializer",O,{ms_ac:["hierarchical"],serialize:function($){return JSON.stringify(this.toJSON(),function(p,w){return Se(w)?yd(w):w},$==H?2:$)},toJSON:function(){var q=this,Q=q.dm,z=Q.getRoots(),V=q.json={v:e.getVersion(),d:[],a:{}},v=Q.getSerializableAttrs();for(var K in v){var i=Q.a(K);i!==x&&q[Cc](K,i,V.a)}return ws(V.a)&&delete V.a,q._hierarchical?z.each(q.serializeData,this):Q.each(function(d){q.serializeData(d)}),V},isSerializable:function(){return!0},getProperties:function(a){return a.getSerializableProperties()},getStyles:function(n){return n.getSerializableStyles()},getAttrs:function(I){return I.getSerializableAttrs()},serializeData:function(d){var E=this;if(E.isSerializable(d)){var y,V,m,A,L=d.getClass(),F=new L,i={c:d.getClassName(),i:d.getId(),p:{},s:{},a:{}};E.json.d.push(i),y=E.getProperties(d);for(V in y)A=Gc(V),d[A]&&(m=d[A](),m!==F[A]()&&E[Cc](V,m,i.p));y=E.getStyles(d);for(V in y)m=d.s(V),m!==F.s(V)&&E[Cc](V,m,i.s);y=E.getAttrs(d);for(V in y)m=d.a(V),m!==F.a(V)&&E[Cc](V,m,i.a);ws(i.p)&&delete i.p,ws(i.s)&&delete i.s,ws(i.a)&&delete i.a}E._hierarchical&&d.getChildren().each(E.serializeData,E)},serializeValue:function(A,B,G){Hq(B)?B={__a:B._as}:B instanceof Tk&&(B={__i:B.getId()}),G[A]=B},deserialize:function(C,y,r){cn=!0;var w=this;C=w.json=Kf(C)?JSON.parse(C):C,w._82I={};for(var F=w.dm,j=new yo,p=new yo,N=0,T=C.d.length;T>N;N++){var D=C.d[N],h=Ob(D.c),E=new h,l=D.i;r&&l!=H&&(E._id=l),w._82I[l]=E,j.add(E),p.add(D)}for(N=0;T>N;N++)w.deserializeData(j.get(N),p.get(N));j.each(function(Q){y&&!Q.getParent()&&Q.setParent(y),F.add(Q)});for(var M in C.a)F.a(M,w[Sc](C.a[M]));return cn=!1,j},deserializeData:function(T,G){for(var M in G.p)T[Ph(M)](this[Sc](G.p[M]));for(M in G.s)T.s(M,this[Sc](G.s[M]));for(M in G.a)T.a(M,this[Sc](G.a[M]))},deserializeValue:function(B){if(Gb(B)){var O=B.__i;if(O!=H)return this._82I[O];if(O=B.__a,ro(O))return new yo(O)}return B}}),hq(hr,{serialize:function(J,q){return new Tr(this,q).serialize(J)},toJSON:function(n){return new Tr(this,n).toJSON()},deserialize:function(L,a,M){return new Tr(this).deserialize(L,a,M)}}),$d.GraphView=function(N){var k=this;k._24I={},k._34I=new yo,k._25I={},k._56I={},k._view=Vb(1),k._canvas=Lm(k._view),k.dm(N?N:new hr),k.setEditable(!1),k.setScrollBarVisible(e.graphViewScrollBarVisible)},Ib("GraphView",O,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",zb,os,Ee,gj,"resettable","editInteractor",Sr,"pannable","rectSelectable","autoScrollZone",gf,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground"],_resettable:e.graphViewResettable,_pannable:e.graphViewPannable,_rectSelectable:e.graphViewRectSelectable,_autoScrollZone:e.graphViewAutoScrollZone,_rectSelectBackground:e.graphViewRectSelectBackground,_rectSelectBorderColor:e.graphViewRectSelectBorderColor,_editPointSize:e.graphViewEditPointSize,_editPointBorderColor:e.graphViewEditPointBorderColor,_editPointBackground:e.graphViewEditPointBackground,_scrollBarColor:Gm,_scrollBarSize:Hh,_autoHideScrollBar:zc,_autoMakeVisible:Nr,setEditable:function(V){var $=this,e=$d.XEditInteractor;V?$.setInteractors([new Jf($),e?new e($):new Yn($),new Xi($),new Vf($),new Hd($,{editable:!e})]):$.setInteractors([new Jf($),new Xi($),new Vf($),new Hd($,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(I){var $=I.getUIClass();return $?new $(this,I):H},getDataUI:function(w){var V=this,K=V._25I[w._id];return K===x&&(K=V._33I(w),V._25I[w._id]=K),K},invalidateAll:function(V){var e=this;if(V){for(var U in e._25I){var r=e._25I[U];r&&r.dispose()}e._25I={},e._56I={},e._24I={},e._34I.clear(),e.redraw()}else e.dm().each(function(q){e.invalidateData(q)})},invalidateSelection:function(){var W=this;W.sm().each(function(w){W.invalidateData(w)})},invalidateData:function(u){var N=this;N._24I[u._id]=u,N._21Q(u),N.iv()},_21Q:function(v){var W=this,M=W._24I;if(dl(v)&&Rl[v.s(Tq)]){var X=v.getSourceAgent();X&&X.getAgentEdges().each(function(r){M[r._id]=r}),X=v.getTargetAgent(),X&&X.getAgentEdges().each(function(X){M[X._id]=X}),W.iv()}},redraw:function(g){var r=this;r._32I||(g?r._34I.add(g):(r._32I=1,r._34I.clear()),r.iv())},each:function(J,c){var h,r,C,Z=0,q=this._layers,U=this._dataModel._datas._as,y=U.length;if(q)for(var S=q.length;S>Z;Z++){C=q[Z];for(var $=0;y>$;$++)if(h=U[$],h._layer===C&&(r=c?J.call(c,h):J(h),r===!1))return}else for(;y>Z;Z++)if(h=U[Z],r=c?J.call(c,h):J(h),r===!1)return},reverseEach:function(j,H){var Q,F,I,x,v=this._layers,A=this._dataModel._datas._as,y=A.length;if(v)for(Q=v.length-1;Q>=0;Q--){x=v[Q];for(var m=y-1;m>=0;m--)if(F=A[m],F._layer===x&&(I=H?j.call(H,F):j(F),I===!1))return}else for(Q=y-1;Q>=0;Q--)if(F=A[Q],I=H?j.call(H,F):j(F),I===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var n=this,K=n._84I;return K||(n.each(function(g){n.isVisible(g)&&(K=re(K,n.getDataUIBounds(g)))}),n._84I=K?K:he),n._84I},getScrollRect:function(){return re(this.getContentRect(),this._29I)},fitData:function(Z,u,I,t,B){var O=this;if(!O.getWidth()||!O.getHeight())return B||Le(O.fitData,O,[Z,u,I,t,!0],200),void 0;O.makeVisible(Z),O.validate();var X=O.getDataUIBounds(Z);X&&(X=ef(X),Zb(X,I==H?20:I),O.fitRect(X,u,t))},fitContent:function(O,$,V,x){var E=this;if(!E.getWidth()||!E.getHeight())return x||Le(E.fitContent,E,[O,$,V,!0],200),void 0;E.validate();var m=ef(E.getContentRect());Zb(m,$==H?20:$),E.fitRect(m,O,V)},fitRect:function(O,Z,h){var N=this,s=N.getWidth(),L=N.getHeight(),y=O.x+O.width/2,w=O.y+O.height/2,j=P(s/O.width,L/O.height),e=N._zoom,r=-y*e+s/2,H=-w*e+L/2;0===j||isNaN(j)||(h&&(j=P(1,j)),Z?N.setTranslate(r,H,{finishFunc:function(){N.setZoom(j,Z)}}):(N.setTranslate(r,H),N.setZoom(j)))},toCanvas:function(b){this.validateImpl();var F=this,d=F.getContentRect(),m=Lm(),q=F._zoom,v=d.x*q,f=d.y*q,J=d.width*q,Z=d.height*q;Fe(m,J,Z,1);var $=Qi(m);return b&&Db($,0,0,J,Z,b),Vj($,-v,-f),$.scale(q,q),F._42($),$.restore(),m},toDataURL:function(Z,q){return this.toCanvas(Z).toDataURL(q||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(S,M){var s,m,X=this;X._93db(S,M),X.each(function(L){X._56I[L._id]&&(s=X.getDataUI(L),s&&(m=s._79o(),j.HtmlNode&&L instanceof j.HtmlNode?s._42(S):(!M||fl(M,m))&&s._42(S)))}),X._92db(S,M)},validateImpl:function(){var D,M,a,J,m,S=this,O=S.tx(),P=S.ty(),r=S._zoom,q=S._canvas,b=this.getWidth(),z=this.getHeight(),A=S._29I,j={x:-O/r,y:-P/r,width:b/r,height:z/r},Y={},K=S._34I,E=S._24I,y=S._32I,l=S._23I;(b!==q.clientWidth||z!==q.clientHeight)&&(Fe(q,b,z),y=1),y||Pr(j,A)||(y=1),S._29I=j,S.each(function(V){M=V._id;var t=Y[M]=S.isVisible(V);t!==S._56I[M]&&(E[M]=V,a=S.getDataUI(E[M]),a&&a._84o(t),S._84o(V,t))},S);for(M in E)a=S.getDataUI(E[M]),a&&(!y&&S._56I[M]&&(m=a._79o(),m&&K.add(m)),a.invalidate()),S._83I=1;if(S._56I=Y,!y)for(M in E)Y[M]&&(a=S.getDataUI(E[M]),a&&(m=a._79o(),m&&K.add(m)));if(y?J=j:(K.each(function(_){fl(j,_)&&(J=re(J,_))}),J&&(Zb(J,W(1,1/r)),J.x=p(J.x*r)/r,J.y=p(J.y*r)/r,J.width=v(J.width*r)/r,J.height=v(J.height*r)/r,J=Qk(j,J))),S._74O=J,J&&(D=Qi(q),pf(D,O,P,r),D.beginPath(),D.rect(J.x,J.y,J.width,J.height),D.clip(),D.clearRect(J.x,J.y,J.width,J.height),S._42(D,J),D.restore(),delete S._74O),S._24I={},K.clear(),delete S._32I,l&&b>0&&z>0){var a=S.getDataUI(l);if(a){var m=a._79o(),e=S._29I,k=e.x,X=e.y,H=e.width,n=e.height,r=S._zoom;m&&!fl(m,e)&&(m.x+m.width<k&&S.tx(-m.x*r),m.x>k+H&&S.tx(-(m.x+m.width-H)*r),m.y+m.height<X&&S.ty(-m.y*r),m.y>X+n&&S.ty(-(m.y+m.height-n)*r))}delete S._23I}S._83I&&(delete S._83I,delete S._84I),S._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(J){var L=this;J!==L.isScrollBarVisible()&&(J?(qr(L._view,L._79O=Vb()),qr(L._79O,L._27I=Vb()),qr(L._79O,L._28I=Vb())):(Mq(L._79O),delete L._79O,delete L._27I,delete L._28I),L.fp("scrollBarVisible",!J,J))},showScrollBar:function(){var n=this;n._79O&&(n._85I||(A(function(){n._86I()},Rf),n.iv()),n._85I=new Date)},_86I:function(){var z=this;if(z._85I){var $=new Date,G=$.getTime();G-z._85I.getTime()>=Rf?(delete z._85I,z.iv()):A(function(){z._86I()},Rf)}},_98O:function(){var R=this,O=this._27I,g=this._28I;if(R._79O){if(R._autoHideScrollBar&&!R._85I)return O.style.visibility=rr,g.style.visibility=rr,void 0;var U=R.getScrollBarColor(),C=R._zoom,_=R.getScrollBarSize(),Z=R.getViewRect(),B=R.getScrollRect(),M=Z.height*C,r=B.height*C,n=Z.width*C-_-2,v=M*((Z.y-B.y)*C/r),F=M*(M/r),c=O.style;r-.5>M?(Nn>F&&(v=v+F/2-Nn/2,0>v&&(v=0),v+Nn>M&&(v=M-Nn),F=Nn),gp(O,n,v,_,F),c.visibility=ue,c.background=U,c.borderRadius=_/2+sn):c.visibility=rr;var d=Z.width*C,N=B.width*C,v=Z.height*C-_-2,n=d*((Z.x-B.x)*C/N),S=d*(d/N),c=g.style;N-.5>d?(Nn>S&&(n=n+S/2-Nn/2,0>n&&(n=0),n+Nn>d&&(n=d-Nn),S=Nn),gp(g,n,v,S,_),c.visibility=ue,c.background=U,c.borderRadius=_/2+sn):c.visibility=rr}},setDataModel:function(m){var G=this,R=G._dataModel,D=G._3o;R!==m&&(R&&(R.umm(G.handleDataModelChange,G),R.umd(G.handleDataPropertyChange,G),R.removeIndexChangeListener(G._75O,G),D||R.sm().ums(G._16o,G)),G._dataModel=m,m.mm(G.handleDataModelChange,G),m.md(G.handleDataPropertyChange,G),m.addIndexChangeListener(G._75O,G),D?D._21I(m):m.sm().ms(G._16o,G),G.invalidateAll(!0),G.fp(pn,R,m))},handleDataPropertyChange:function(U){this.invalidateData(U.data)},onPropertyChanged:function(O){var N=this,o=O.property;N.redraw(),or[o]?N.showScrollBar():o===Sr&&N.onCurrentSubGraphChanged(O)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(t){var x=this,S=t.kind,c=t.data;if(x._83I=1,"add"===S)x.invalidateData(c),dl(c)&&c.getEdgeGroup()&&c.getEdgeGroup().eachSiblingEdge(x.invalidateData,x);else if(S===Sq){x._21Q(c);var A=c._id,u=x._25I[A];if(u){if(x._56I[A]){var p=u._79o();p&&x.redraw(p)}u.dispose(),delete x._25I[A],delete x._24I[A],delete x._56I[A]}c===x._currentSubGraph&&x.setCurrentSubGraph(H)}else S===In&&(x.invalidateAll(!0),x.setCurrentSubGraph(H))},_75O:function(l){this.invalidateData(l.data)},_76O:function(Q){var t=this;if(t.isVisible(Q)){for(var N=Q;N._parent&&t.isVisible(N._parent);)N=N._parent;N&&N!==Q&&t._dataModel._76O(N),t._dataModel._76O(Q)}},isMovable:function(H){var E=this;return dl(H)&&H.getStyle(Tq)!==zh?!1:H.s("2d.movable")?E._movableFunc?E._movableFunc(H):!0:!1},isSelectable:function(n){return n.s("2d.selectable")&&this.sm().isSelectable(n)},isEditable:function(f){var p=this;if(!p._editInteractor||!p.isSelected(f))return!1;if(nn(f)){var o=p.getDataUI(f);if(!o||o._88I)return!1}return dl(f)&&f.getStyle(Tq)!==zh?!1:f.s("2d.editable")?p._editableFunc?p._editableFunc(f):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(B){return vp(B)&&0!==B.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(B):!0},isRectEditable:function(T){return vp(T)&&0!==T.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(T):!0},isRotationEditable:function(R){return R.setRotation&&R.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(R):!0:!1},getRotationPoint:function(J){var e=dk(J.getRotation(),0,-J.getHeight()/2-(h?32:16)),c=J.p();return e.x+=c.x,e.y+=c.y,e},getLogicalPoint:function(g){var J=this;return Em(g,J._canvas,J.tx(),J.ty(),J._zoom,J._zoom)},getSelectedDataAt:function(i){var Q=this;return this.getDataAt(i,function(V){return Q.isSelected(V)})},getDataAt:function(D,N,C){D.target&&(D=this.lp(D));var A;return this.reverseEach(function(j){return(N?N(j):this.isSelectable(j))&&this.rectIntersects(j,Im(D.x,D.y,C))?(A=j,!1):void 0},this),A},getIconInfoAt:function(Y,$){var n=this;if(Y.target&&(Y=n.lp(Y)),$||($=n.getDataAt(Y)),$){var s=n.getDataUI($);if(s&&s._38o){var _,B=s._38o,O=new yo;for(_ in B.icons)O.add(_);for(var d=O.size()-1;d>=0;d--){_=O.get(d);for(var G=B.rects[_],R=G.rotation,g=G.length-1;g>=0;g--){var i=G[g],q=i.width,r=i.height,z={x:Y.x-i.x-q/2,y:Y.y-i.y-r/2};R!=H&&(z=dk(-R,z.x,z.y));var i={x:-q/2,y:-r/2,width:q,height:r};if(ap(i,z))return{key:_,index:g,name:B.icons[_].names[g],rect:G[g],point:Y,rotation:R,relativeRect:i,relativePoint:z,data:$}}}}}return H},getDatasInRect:function(H,d,D){D===x&&(D=1);var q=this,h=new yo;return q.reverseEach(function(G){D&&!q.isSelectable(G)||(d?q.rectIntersects(G,H):q.rectContains(G,H))&&h.add(G)}),h},moveSelection:function(U,p){var c,O=this,s=O.dm();s&&(c=s.getHistoryManager()),c&&c.beginInteraction(),ab(O.sm().toSelection(O.isMovable,O),U,p),c&&c.endInteraction()},getDataUIBounds:function(f){var P=this.getDataUI(f);return P?P._79o():H},getBoundsForGroup:function(T){return T.s(Ze)?this.getDataUIBounds(T):H},rectIntersects:function(C,x){this.validate();var X=H;if(this._56I[C._id]){var L=this._25I[C._id];if(L){var o=L._79o();if(Bp(x,o))X=!0;else if((x=Qk(x,o))&&(L.rectIntersects&&(X=L.rectIntersects(x)),X==H)){if(!C.s("pixelPerfect"))return!0;var l=x.x,I=x.y,M=x.width,n=x.height,d=1,W=e.hitMaxArea,p=M*n;p>W&&(d=W/p);var Y=Bq(M*d,n*d);Vj(Y,-l*d,-I*d),Y.scale(d,d),L._42(Y);try{for(var P=0,m=Y.getImageData(0,0,M*d,n*d).data;P<m.length;P+=4)if(0!==m[P+3]){X=!0;break}Y.restore()}catch(Q){mf=H,X=!0}}}}return X?!0:!1},rectContains:function(f,e){if(this._56I[f._id]){var D=this._25I[f._id];if(D)return Bp(e,D._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(f){var I=this,Y=I._focusData,y=Y&&I._25I[Y._id],F=0,N=I._dataModel._datas;Y&&Y._enabled&&Y._editable&&y&&y.onKeyDown&&y.onKeyDown(f)===!0||(9===f.keyCode&&(Y&&(F=N.indexOf(Y),tl(f)?-1===--F&&(F=0):++F===N.size()&&(F=0)),I._focusData=Y=N.get(F),I.sm().setSelection(Y)),bk(f)?I.selectAll():Hi(f)&&I.isResettable()&&I.reset(),I.sm().isEmpty()||(Nf(f)&&I.handleDelete(f),Dg(f)&&(I.moveSelection(-1,0),I.fi({kind:"moveLeft"})),uq(f)&&(I.moveSelection(0,-1),I.fi({kind:"moveUp"})),uf(f)&&(I.moveSelection(1,0),I.fi({kind:"moveRight"})),Ip(f)&&(I.moveSelection(0,1),I.fi({kind:"moveDown"}))))},handleScroll:function(S,r){Cg(S);var Z=this.lp(S);r>0?this.scrollZoomIn(Z):0>r&&this.scrollZoomOut(Z)},handlePinch:function(G,p,g){p>g?this.pinchZoomIn(G):this.pinchZoomOut(G)},checkDoubleClickOnNote:function(g,j){var a=this,K=a.lp(g),x=a.getDataUI(j),k=x.note2Info;return k&&j.s("note2.toggleable")&&ap(k.clickRect,K)?(j.s(Cm,!j.s(Cm)),a.fi({kind:"toggleNote2",event:g,data:j}),!0):(k=x.noteInfo,k&&j.s("note.toggleable")&&ap(k.clickRect,K)?(j.s(hb,!j.s(hb)),a.fi({kind:"toggleNote",event:g,data:j}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(d,w){var x=this,u=x.getAutoScrollZone(),z=u/x.getZoom(),E=u/4,q=x._29I,k=x.lp(d),C={x:x.tx(),y:x.ty()};return k&&u>0&&q&&(k.x-q.x<z?x.translate(E,0):q.x+q.width-k.x<z&&x.translate(-E,0),k.y-q.y<z?x.translate(0,E):q.y+q.height-k.y<z&&x.translate(0,-E)),C.x=x.tx()-C.x,C.y=x.ty()-C.y,w&&(w.x+=C.x,w.y+=C.y),C},getMoveMode:function(u,k){var W=k.s("2d.move.mode");return W?W:Kq["88"]?"x":Kq["89"]?"y":"xy"}});var dq=function(D,t){var S=this;S.gv=D,S.s=function(M){return t.getStyle(M)},S._data=t,S._87I=new yo};oc(dq,O,{_6I:H,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var N=this,P=N.gv.isSelected(N._data);return!P||N.isShadowed()?0:this.s("select.width")},getBodyColor:function(R){var K=this._data,l=this.gv.getBodyColor(K);return l?l:R?K.getStyle(R):H},_2Q:function(N){return this.s(N)},_1Q:function(b,W,d,P){var q=this.s,s=q(W+".dash.color");b.strokeStyle=s,b.lineWidth=d,b.stroke(),q(W+".dash.3d")&&Eq(b,s,q(W+".dash.3d.color"),d,this.gv._zoom,q(W+".dash.3d.accuracy")),wk(b,P)},invalidate:function(){this._6I=H},_79o:function(){var j=this;if(!j._6I){j.labelInfo=j.label2Info=j.noteInfo=j.note2Info=j._38o=H,j._87I.clear(),j._3O();var C=j._data,Y=j.gv;j._55O=Y.isEditable(C)?{_42O:Y.isRectEditable(C),_43O:Y.isPointEditable(C),_56O:Y.isRotationEditable(C)}:H,j._6I=j._81o()}return j._6I},_3O:function(){},getPosition:function(){return he},_68o:function(l,O){l&&this._87I.add(Tn(l,O))},_81o:function(){var p=this,r=p.s;p._24O(jd,"getLabel"),p._24O(mr,"getLabel2"),p._26O(ir,"getNote"),p._26O(nc,"getNote2"),p._15O(),p._55O&&p._48O();var t;if(p._87I.each(function(S){t=re(t,S)}),t&&p.isShadowed()){var c=ef(t);c.x+=r("shadow.offset.x"),c.y+=r("shadow.offset.y"),Zb(c,r("shadow.blur")),t=re(t,c)}return p._87I.clear(),t},_42:function(s){var h=this,T=h._data,u=h.gv,M=h.s,L=M("opacity"),Q=this.isShadowed();if(Q){var f=s.shadowOffsetX,P=s.shadowOffsetY,Z=s.shadowBlur,r=s.shadowColor;
s.shadowOffsetX=M("shadow.offset.x"),s.shadowOffsetY=M("shadow.offset.y"),s.shadowBlur=M("shadow.blur"),s.shadowColor=M("shadow.color")}if(L!=H){var q=s.globalAlpha;s.globalAlpha=L}h._80o(s),u.isLabelVisible(T)&&(yl(s,h.labelInfo),yl(s,h.label2Info)),u.isNoteVisible(T)&&(Ke(s,h.noteInfo),Ke(s,h.note2Info)),h._99O(s),L!=H&&(s.globalAlpha=q),Q&&(s.shadowOffsetX=f,s.shadowOffsetY=P,s.shadowBlur=Z,s.shadowColor=r),h._55O&&u.isEditVisible(T)&&h._47O(s)},_80o:function(){},_47O:function(){},_24O:function(h,S){var p=this,m=p._data,j=p.gv,$=p.s,u=j[S](m);if(u!=H){var K=$(h+".scale"),F=$(h+".max"),s=$(h+".position"),o=p[h+"Info"]={label:u,scale:K,color:j[S+"Color"](m),font:$(h+".font"),opacity:$(h+".opacity"),align:$(h+".align"),rotation:p.getRotation($(h+".rotation"),!1,s),background:j[S+"Background"](m)},T=Bi(o,u);F>0&&F<T.width&&(o.labelWidth=T.width,T.width=F),1!==K&&(T.width*=K,T.height*=K);var e=p.getPosition(s,$(h+".offset.x"),$(h+".offset.y"),T,$(h+".position.fixed"));if(T.x=e.x-T.width/2,T.y=e.y-T.height/2,p._68o(o.rect=T,o.rotation),1!==K){var d=T.width/K,L=T.height/K;o.rect={x:e.x-d/2,y:e.y-L/2,width:d,height:L}}}},_26O:function(n,c){var N=this,R=N.gv,Q=N._data,h=N.s,x=R[c](Q);if(x!=H){var l,W,e=h(n+".scale"),f=N[n+"Info"]={note:x,scale:e,expanded:h(n+".expanded"),font:h(n+".font"),color:h(n+".color"),opacity:h(n+".opacity"),align:h(n+".align"),borderWidth:h(n+".border.width"),borderColor:h(n+".border.color"),background:R[c+"Background"](Q)},M=N.getPosition(h(n+".position"),h(n+".offset.x"),h(n+".offset.y")),q=M.x,z=M.y;if(f.expanded){var r=h(n+".max"),V=Bi(f,x);V.width+=6,V.height+=2,r>0&&r<V.width&&(f.labelWidth=V.width,V.width=r),l=V.width,W=V.height+8,f.clickRect={x:q-l*e/2,y:z-W*e,width:l*e,height:W*e*V.height/W}}else l=12,W=18,f.clickRect={x:q-l*e/2,y:z-W*e,width:l*e,height:W*e};f.rect={x:q-l/2,y:z-W*e/2-W/2,width:l,height:W};var C=v(f.borderWidth/2)*e;N._68o({x:q-l*e/2-C,y:z-W*e-C,width:l*e+2*C,height:W*e+2*C})}},_48O:function(){},_99O:function(C){var S=this,X=S._38o;if(X){var e=S.gv,q=S._data,E=X.icons;for(var p in E){var v=E[p],b=X.rects[p];if(b){var K=wo(v.opacity,q,e),G=wo(v.names,q,e),n=G?G.length:0,o=b.rotation;if(K!=H){var M=C.globalAlpha;C.globalAlpha*=K}for(var s=0;n>s;s++){var j=G[s],J=Dp(j),N=b[s];if(o){var g=N.x+N.width/2,d=N.y+N.height/2;C.save(),Vj(C,g,d),pd(C,o),Vj(C,-g,-d)}gd(C,J,wo(v.stretch,q,e),N.x,N.y,N.width,N.height,S._data,S.gv),o&&C.restore()}K!=H&&(C.globalAlpha=M)}}}}});var Wq=function(_,V){yi(Wq,this,[_,V])};oc(Wq,dq,{_40O:function(X,Z){var t=this,m=t.s,P=X.rect;(X.borderColor=t.gv.getBorderColor(t._data))&&(X.borderType=m("border.type"),X.borderWidth=m("border.width"),X.borderPadding=m("border.padding"),Z=W(Z,X.borderPadding+X.borderWidth/2)),(X.selectWidth=t._2o())&&(X.selectType=m("select.type"),X._97o=m("select.color"),X.selectPadding=m("select.padding"),Z=W(Z,X.selectPadding+X.selectWidth/2)),Z>0&&(P=ef(P),Zb(P,Z)),t._68o(P)},_39O:function(J,I){var B=I.rect;if(I.borderWidth>0){var k=I.borderPadding;J.strokeStyle=I.borderColor,J.lineWidth=I.borderWidth,Xn(J,I.borderType,{x:B.x-k,y:B.y-k,width:B.width+2*k,height:B.height+2*k}),J.stroke()}I.selectWidth>0&&(k=I.selectPadding,J.strokeStyle=I._97o,J.lineWidth=I.selectWidth,Xn(J,I.selectType,{x:B.x-k,y:B.y-k,width:B.width+2*k,height:B.height+2*k}),J.stroke())},_3O:function(){var C=this,U=C.s,h=C._data,V=h.getStyle(Ad),g=C.getBodyColor(),v=C._83o=V?{shape:V,_53o:C.getBodyColor("shape.background"),_27Q:Dp(U("shape.repeat.image"),g),_54o:U("shape.border.width"),_55o:U("shape.border.color"),_56o:U("shape.border.3d"),_57o:U("shape.border.3d.color"),_58o:U("shape.border.3d.accuracy"),shapeGradient:U("shape.gradient"),_59o:U("shape.gradient.color"),_60o:U("shape.border.pattern"),_61o:U("shape.border.cap"),_62o:U("shape.border.join")}:{img:Dp(h.getImage(),g),bodyColor:g,stretch:U("image.stretch")};v.rect=h.getRect(),v.position=h.p(),v.rotation=h.getRotation(),V===Un&&(v._63o=U("shape.depth")),C._40O(v,V?wm(H,v._54o/2,v._62o):0)},getPosition:function(Q,w,N,c){var g=Ui(Q,this._83o.rect,c);return g.x+=w,g.y+=N,g},_80o:function(w){var G=this,F=G.s,$=G.gv,_=G._data,L=G._83o,s=L.rect,U=s,l=L.position,d=L.rotation,W=L.shape;if(s.width>0&&s.height>0){if(d&&(w.save(),Vj(w,l.x,l.y),pd(w,d),Vj(w,-l.x,-l.y),U=_.getSize(),U.x=l.x-U.width/2,U.y=l.y-U.height/2),G.freeDraw)G.freeDraw(w,U,L);else if(W){var R,N,n,Z,V=L._60o,u=mn(w,V),J=L._53o,f=L._27Q,p=L._54o,m=L._55o,Y=w.lineJoin,e=w.lineCap;if("roundRect"===W?R=F("shape.corner.radius"):"polygon"===W?R=F("shape.polygon.side"):"arc"===W&&(R=F("shape.arc.from"),N=F("shape.arc.to"),n=F("shape.arc.close"),Z=F("shape.arc.oval")),w.lineJoin=L._62o,w.lineCap=L._61o,J||f?(f?li(w,f):Wf(w,J,L.shapeGradient,L._59o,U),Xn(w,W,U,R,N,n,Z),w.fill(),w!==u&&Xn(u,W,U,R,N,n,Z)):Xn(u,W,U,R,N,n,Z),p>0&&(w.lineWidth=p,w.strokeStyle=m,w.stroke(),L._56o&&Eq(w,m,L._57o,p,$._zoom,L._58o)),wk(w,V),F("shape.dash")){var M=F("shape.dash.width")||p;if(M>0){V=F("shape.dash.pattern");var u=mn(w,V,G._2Q("shape.dash.offset"));u!==w&&Xn(u,W,U,R,N,n,Z),G._1Q(w,"shape",M,V)}}jo(w,J,L._63o,U),w.lineJoin=Y,w.lineCap=e}else gd(w,L.img,L.stretch,U.x,U.y,U.width,U.height,_,$,L.bodyColor);d&&w.restore()}G._39O(w,L)},_48O:function(){var D,I=this,d=I._data,l=I.gv,s=I._55O,J=l.getEditPointSize()/2+2;if(s._42O&&(D=d.getRect(),Zb(D,J)),s._56O){var o=s._98o=l.getRotationPoint(d);D=re(D,{x:o.x-J,y:o.y-J,width:2*J,height:2*J})}I._68o(D)},_47O:function(H){var l=this,B=l.gv,E=l._55O,x=l._data.getRect(),r=B.getEditPointSize(),k=E._98o;E._42O&&(H.fillStyle=B.getEditPointBackground(),H.strokeStyle=B.getEditPointBorderColor(),H.lineWidth=1,[{x:x.x,y:x.y},{x:x.x+x.width/2,y:x.y},{x:x.x+x.width,y:x.y},{x:x.x,y:x.y+x.height/2},{x:x.x+x.width,y:x.y+x.height/2},{x:x.x,y:x.y+x.height},{x:x.x+x.width/2,y:x.y+x.height},{x:x.x+x.width,y:x.y+x.height}].forEach(function(o){Db(H,o.x-r/2,o.y-r/2,r,r),H.stroke()})),E._56O&&(H.fillStyle=B.getEditPointBorderColor(),H.strokeStyle=B.getEditPointBackground(),H.lineWidth=1,H.beginPath(),H.arc(k.x,k.y,r/2,0,C,!0),H.fill(),H.stroke())}});var tb=function(p,h){yi(tb,this,[p,h])},Cn=function(N,O,z,l){var H=Io(N,O);return z=l?P(z,H):ag(z,H),H?z/=H:z=0,{x:N.x+(O.x-N.x)*z,y:N.y+(O.y-N.y)*z}};oc(tb,dq,{_3O:function(){var P,q=this,t=q._data,z=q.gv,L=q.s,K=L(Tq),o=t.isLooped(),v=L("edge.width"),f=L("edge.center"),$=L("edge.offset"),w=z.getBorderColor(t),g=w?L("border.width"):0,b=q._2o(),C=t._40I,E=t._41I,y=q._78o=C&&E?{looped:o,type:K,width:v,center:f,color:q.getBodyColor("edge.color"),borderColor:w,borderWidth:g,_97o:b?L("select.color"):H,selectWidth:b,pattern:L("edge.pattern"),cap:L("edge.cap"),join:L("edge.join"),is3d:L("edge.3d"),_67o:L("edge.3d.color"),_66o:L("edge.3d.accuracy")}:H;if(y){var Q=e.getEdgeType(K);if(Q){var D=Q(t,Lk(q,z,t,o,K),z,q._19Q);D.points&&D.points.size()>1&&(y._4O=D,P=Ro(y._4O.points))}else{var u=Od(z,C,L("edge.source.position"),L("edge.source.offset.x"),L("edge.source.offset.y")),s=Od(z,E,L("edge.target.position"),L("edge.target.offset.x"),L("edge.target.offset.y"));if(K===zh){var A=y.points=L(fd)||$f,V=A.size();if(y.segments=L("edge.segments"),!f)if($){var m=Cn(u,V?A.get(0):s,$,V),J=Cn(s,V?A.get(V-1):u,$,V);u=m,s=J}else{var W=ji(z,C),S=ji(z,E),X=Hf(u,V?A.get(0):s,W);X&&(u={x:X[0],y:X[1]}),X=Hf(V?A.get(V-1):u,s,S),X&&(s={x:X[0],y:X[1]})}P=re(Ro(y.points),Ro(u,s))}else{var U=Lk(q,z,t,o,K);if(q._19Q||(U=-U),o)u=ef(u),u.x-=C.getWidth()/2,y.radius=U,P={x:u.x-U,y:u.y-U,width:2*U,height:2*U};else{var a=Io(u,s),I=ag($,a),m={x:I,y:U},J={x:a-I,y:U},T=l(s.y-u.y,s.x-u.x),p=y.mat=new Ah(T);if(y.orienAngle=T,y.angle=s.x<u.x?T+G:T,y.rect={x:m.x,y:m.y,width:J.x-m.x,height:0},y.origin=u,m=p.tf(m),m.x+=u.x,m.y+=u.y,J=p.tf(J),J.x+=u.x,J.y+=u.y,f){var n={x:a,y:0};n=p.tf(n),n.x+=u.x,n.y+=u.y,P=Ro([u,m,J,n]),y.c1=u,y.c2=n}else P=Ro(m,J);u=m,s=J}}y._69o=u,y._70o=s}wm(P,v/2+g+b,y.join),q._68o(P)}},getRotation:function(z,K,n){z=z||0;var _=this._78o;if(_){var w,P=_.angle,b=_.points,B=_._4O;if(P!=H)return K?_.orienAngle+z:P+z;if(B){var r=B.points;return w=r.size(),Nc[n]?w&&0===w%2?al(r.get(w/2-1),r.get(w/2),K,z):z:Id[n]?al(r.get(0),r.get(1),K,z):al(r.get(w-2),r.get(w-1),K,z)}if(b)return w=b.size(),Nc[n]?w&&0===w%2?al(b.get(w/2-1),b.get(w/2),K,z):z:Id[n]?al(_._69o,w?b.get(0):_._70o,K,z):al(w?b.get(w-1):_._69o,_._70o,K,z)}return z},getPosition:function(t,i,E,P,A){var z=this._78o;if(z){var g,w=z.type,X=z.points,F=z._4O,H=z._69o,D=z._70o;if(!w)return z.looped?{x:H.x-z.radius+i,y:H.y+E}:(A&&H&&D&&(H.x>D.x||H.x===D.x&&H.y>D.y)&&(t=tc[t],E=-E),g=Ui(t,z.rect,P),g.x+=i,g.y+=E,g=z.mat.tf(g),g.x+=z.origin.x,g.y+=z.origin.y,g);if(X){var g,j=X.size();if(Nc[t]){if(j){var x=j%2;if(0===x)return Mn(X.get(j/2-1),X.get(j/2),t,i,E,P,A);g=X.get((j-x)/2)}else g={x:(H.x+D.x)/2,y:(H.y+D.y)/2};return g=Ui(t,{x:g.x,y:g.y,width:0,height:0},P),g.x+=i,g.y+=E,g}return Id[t]?Mn(H,j?X.get(0):D,t,i,E,P,A):Mn(j?X.get(j-1):H,D,t,i,E,P,A)}if(F){var u=F.points,j=u.size();if(Nc[t]){var x=j%2;return 0===x?Mn(u.get(j/2-1),u.get(j/2),t,i,E,P,A):(g=u.get((j-x)/2),g=Ui(t,{x:g.x,y:g.y,width:0,height:0},P),g.x+=i,g.y+=E,g)}return Id[t]?Mn(u.get(0),u.get(1),t,i,E,P,A):Mn(u.get(j-2),u.get(j-1),t,i,E,P,A)}}return he},_42:function(U){this._78o&&tb.superClass._42.call(this,U)},drawPath:function(b,E){b.beginPath();var c=E.type,j=E.points,z=E.segments,G=E._4O;if(!c||j){var h=E._69o,i=h.x,A=h.y,S=E._70o,o=S.x,s=S.y;if(c)if(z){var k=new yo({x:i,y:A});k.addAll(j),k.add({x:o,y:s}),sc(b,k,z)}else b.moveTo(i,A),j.each(function(Q){b.lineTo(Q.x,Q.y)}),b.lineTo(o,s);else E.looped?b.arc(i,A,E.radius,0,C,!0):E.center?(b.moveTo(E.c1.x,E.c1.y),b.lineTo(i,A),b.lineTo(o,s),b.lineTo(E.c2.x,E.c2.y)):(b.moveTo(i,A),b.lineTo(o,s))}else G&&sc(b,G.points,G.segments)},_80o:function(r){var Z=this,b=Z.s,p=Z._78o,Q=p.width,$=p.selectWidth,I=p.borderWidth,U=p.color,M=r.lineJoin,S=r.lineCap,f=p.pattern;if(r.lineJoin=p.join,r.lineCap=p.cap,Z.drawPath(mn(r,f),p),$&&(r.strokeStyle=p._97o,r.lineWidth=Q+2*(I+$),r.stroke()),I&&(r.strokeStyle=p.borderColor,r.lineWidth=Q+2*I,r.stroke()),r.strokeStyle=U,r.lineWidth=Q,r.stroke(),p.is3d&&Eq(r,U,p._67o,Q,Z.gv._zoom,p._66o),wk(r,f),b("edge.dash")){f=b("edge.dash.pattern");var x=mn(r,f,Z._2Q("edge.dash.offset"));x!==r&&Z.drawPath(x,p),Z._1Q(r,"edge",b("edge.dash.width")||Q,f)}r.lineJoin=M,r.lineCap=S},_48O:function(){var A=this,U=A._78o;if(A._55O._43O&&U&&U.points){var W=Ro(U.points);W&&(Zb(W,A.gv.getEditPointSize()/2+2),A._68o(W))}},_47O:function(a){var h=this,b=h.gv,O=h._78o;if(h._55O._43O&&O&&O.points){var $=b.getEditPointSize()/2;a.fillStyle=b.getEditPointBackground(),a.strokeStyle=b.getEditPointBorderColor(),a.lineWidth=1,O.points.each(function(q){a.beginPath(),a.arc(q.x,q.y,$,0,C,!0),a.fill(),a.stroke()})}},_71o:function(K,C){var R=this,u=R._data;if(R._19Q=!0,!u.getEdgeGroup())return K?u.s("edge.gap"):0;var B,E=0,y=0,c=0;if(u.getEdgeGroup().getSiblings().each(function(e){e.each(function(x){if(R.gv.isVisible(x)&&x.s(Tq)==C){var X=x.s("edge.gap");B?(y+=c/2+X/2,c=X):(B=x,c=X),x===u&&(E=y)}})}),K)return y-E+c;var i=E-y/2;return B&&u._40I!==B._40I&&(R._19Q=!1),i}});var Ic=function(r,w){yi(Ic,this,[r,w])};oc(Ic,Wq,{_3O:function(){var E,F,p=this,c=p.s,G=p._data,k=p.gv;if(p._88I=H,G.isExpanded()&&G.eachChild(function(G){var u=k.getBoundsForGroup(G);u&&(F||(F=[]),F.push(u),E=re(E,u))}),E){var z=k.getLabel(G),a=c("group.type");E=ym(a,F,E),Sg(E,G,"group.padding",1);var O=p._88I={type:a,rect:E,_64o:E};if(!a&&z!=H){var Q,e=p.labelInfo={label:z,color:c("group.title.color"),font:c("group.title.font")},q=Bi(e,z),g=q.width,v=q.height,Z=c("group.title.align");g>E.width&&(E.width=g),e.rect={y:E.y-v,width:q.width,height:v},Q=Z===U?E.x:Z===X?E.x+E.width-g:E.x+E.width/2-g/2,e.rect.x=Q,O.titleRect={x:E.x,y:E.y-v,width:E.width,height:v+1},O.rect={x:E.x,y:E.y-v,width:E.width,height:E.height+v}}p._40O(O,c("group.border.width")/2)}else Ic.superClass._3O.call(p)},getPosition:function(I,h,z,n){var e=this._88I;if(e){var G=Ui(I,e.rect,n);return G.x+=h,G.y+=z,G}return Ic.superClass.getPosition.apply(this,arguments)},_24O:function(k,S){var D=this._88I;(!D||D.type||"label2"===k)&&Ic.superClass._24O.call(this,k,S)},_80o:function(M){var H=this,A=H._88I;if(A){var p=H._data,l=H.s,q=H.gv,N=A.type,E=A.rect,B=A._64o,$=A.titleRect,n=H.getBodyColor(),d=Dp(l("group.image"),n),g=l("group.image.stretch"),P=H.getBodyColor("group.background"),U=Dp(l("group.repeat.image"),n),W=l("group.gradient"),_=l("group.gradient.color"),T=l("group.depth");if(N){var a=l("group.border.pattern"),j=l("group.border.width"),c=M.lineJoin,Q=M.lineCap;if(M.lineJoin=l("group.border.join"),M.lineCap=l("group.border.cap"),d){if(M.save(),Xn(M,N,E),M.clip(),gd(M,d,g,E.x,E.y,E.width,E.height,p,q,n),M.restore(),j>0){var w=mn(M,a);Xn(w,N,E),M.lineWidth=j,M.strokeStyle=l("group.border.color"),M.stroke(),wk(M,a)}}else{var w=mn(M,a);P||U?(U?li(M,U):Wf(M,P,W,_,E),Xn(M,N,E),M.fill(),M!==w&&Xn(w,N,E)):Xn(w,N,E),j>0&&(M.lineWidth=j,M.strokeStyle=l("group.border.color"),M.stroke()),wk(M,a),N===Un&&jo(M,P,T,E)}M.lineJoin=c,M.lineCap=Q}else if(d?gd(M,d,g,B.x,B.y,B.width,B.height,p,q,H.getBodyColor()):(P||U)&&(U?li(M,U):Wf(M,P,W,_,B),Xn(M,Un,B),M.fill(),jo(M,P,T,B)),$){var i=l("group.title.background");Db(M,$.x,$.y,$.width,$.height,i),jo(M,i,T,$)}H._39O(M,A)}else Ic.superClass._80o.call(H,M)}});var ah=function(a,S){yi(ah,this,[a,S])};oc(ah,Wq,{_3O:function(){var d=this,I=d._data,q=d.s,K=d.gv,j=I.getPoints(),N=K.getBorderColor(I),l=N?q("border.width"):0,m=d._2o(),f=q("shape.border.width"),g=I.getRect(),n=K.getBodyColor(I),T=d._99o=j.isEmpty()?H:{rect:g,rotation:I.getRotation(),position:I.p(),points:j,segments:I.getSegments(),bodyColor:n,borderColor:N,borderWidth:l,_94o:q("shape.border.3d"),_95o:q("shape.border.3d.color"),_96o:q("shape.border.3d.accuracy"),_97o:m?q("select.color"):H,selectWidth:m,_53o:q("shape.background"),_27Q:Dp(q("shape.repeat.image"),n),_54o:f,_55o:q("shape.border.color"),shapeGradient:q("shape.gradient"),_59o:q("shape.gradient.color"),_60o:q("shape.border.pattern"),_61o:q("shape.border.cap"),_62o:q("shape.border.join")};if(T){var E=f/2+l+m;E&&(g=ef(g),wm(g,E,T._62o)),d._68o(g)}},getPosition:function(W,E,z,q){var V=this._99o;if(V){var S=Ui(W,V.rect,q);return S.x+=E,S.y+=z,S}return he},_42:function(U){this._99o&&ah.superClass._42.call(this,U)},_80o:function(w){var h,f=this,V=f.s,a=f._99o,q=a.position,G=a.rotation,z=a.bodyColor,I=a.borderWidth,o=a.selectWidth,B=a._53o,O=a._27Q,n=a._54o,C=a.points,$=a.segments,Q=f._data.isClosePath();G&&(w.save(),Vj(w,q.x,q.y),pd(w,G),Vj(w,-q.x,-q.y));var M=a._60o,d=mn(w,M),W=w.lineJoin,l=w.lineCap;if(w.lineJoin=a._62o,w.lineCap=a._61o,B||O?(O?li(w,O):(h=z?z:B,Wf(w,h,a.shapeGradient,a._59o,a.rect)),sc(w,C,$,Q),w.fill(),d!==w&&sc(d,C,$,Q)):sc(d,C,$,Q),o&&(w.strokeStyle=a._97o,w.lineWidth=n+2*(I+o),w.stroke()),I&&(w.strokeStyle=a.borderColor,w.lineWidth=n+2*I,w.stroke()),n&&(h=a._55o,!B&&z&&(h=z),w.strokeStyle=h,w.lineWidth=n,w.stroke(),a._94o&&Eq(w,h,a._95o,n,f.gv._zoom,a._96o)),wk(w,M),V("shape.dash")){var L=V("shape.dash.width")||n;if(L>0){M=V("shape.dash.pattern");var d=mn(w,M,f._2Q("shape.dash.offset"));d!==w&&sc(d,C,$,Q),f._1Q(w,"shape",L,M)}}w.lineJoin=W,w.lineCap=l,G&&w.restore()},_48O:function(){var E=this;if(ah.superClass._48O.call(E),E._55O._43O){var d=E._data.getRect();Zb(d,E.gv.getEditPointSize()/2+2),E._68o(d)}},_47O:function(w){var $=this;if(ah.superClass._47O.call($,w),$._55O._43O){var i=$.gv,F=i.getEditPointSize()/2;w.fillStyle=i.getEditPointBackground(),w.strokeStyle=i.getEditPointBorderColor(),w.lineWidth=1,$._data.getPoints().each(function(R){w.beginPath(),w.arc(R.x,R.y,F,0,C,!0),w.fill(),w.stroke()})}}});var En=function(x,s){yi(En,this,[x,s])};oc(En,ah,{getRotation:function(A,I,C){A=A||0;var u=this._data.getPoints(),J=u.size();return J>1?Nc[C]?J&&0===J%2?al(u.get(J/2-1),u.get(J/2),I,A):A:Id[C]?al(u.get(0),u.get(1),I,A):al(u.get(J-2),u.get(J-1),I,A):A},getPosition:function(j,X,g,A,T){var E=this._data.getPoints(),I=E.size();if(I>1){if(Nc[j]){var t=I%2;if(0===t)return Mn(E.get(I/2-1),E.get(I/2),j,X,g,A,T);var G=E.get((I-t)/2),O={x:G.x,y:G.y,width:0,height:0};return G=Ui(j,O,A),G.x+=X,G.y+=g,G}return Id[j]?Mn(E.get(0),E.get(1),j,X,g,A,T):Mn(E.get(I-2),E.get(I-1),j,X,g,A,T)}return he}});var $m=function(M,k){yi($m,this,[M,k])};oc($m,Wq,{_3O:function(){var o=this;$m.superClass._3O.call(o);var J=o.s,r=o._83o;o._82o=r.img||r.shape?H:{background:o.getBodyColor("grid.background"),depth:J("grid.depth"),rect:r.rect,_88o:J("grid.cell.depth"),cellBorderColor:J("grid.cell.border.color"),_89o:J("grid.row.count"),_90o:J("grid.column.count"),block:J("grid.block"),_91o:J("grid.block.color"),_92o:J("grid.block.padding"),_93o:J("grid.block.width")}},_80o:function(M){var F=this,w=F._82o;if(!w)return $m.superClass._80o.call(F,M),void 0;var Z,m,t=F._data,f=w.background,r=w.rect,k=w.block,n=w._91o,P=w._92o,S=w._93o,U=w._88o,A=w.cellBorderColor,D=w._89o,$=w._90o;if(f)if(Db(M,r.x,r.y,r.width,r.height,f),jo(M,f,w.depth,r),U)for(Z=0;D>Z;Z++)for(m=0;$>m;m++)r=t.getCellRect(Z,m),r&&jo(M,f,U,r);else if(A){for(M.beginPath(),Z=0;D>Z;Z++)for(m=0;$>m;m++)r=t.getCellRect(Z,m),r&&M.rect(r.x,r.y,r.width,r.height);M.strokeStyle=A,M.lineWidth=1,M.stroke()}if("h"===k)for(Z=0;D>Z;Z++)r=re(t.getCellRect(Z,0),t.getCellRect(Z,$-1)),Zb(r,P),Jr(M,n,r.x,r.y,r.width,r.height,S);else if("v"===k)for(m=0;$>m;m++)r=re(t.getCellRect(0,m),t.getCellRect(D-1,m)),Zb(r,P),Jr(M,n,r.x,r.y,r.width,r.height,S);F._39O(M,F._83o)}});var xb=$d.Interactor=function(T){this.gv=this._graphView=T};Ib("Interactor",O,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(W){this.gv.fi(W)},setCursor:function(U){h||(this.getView().style.cursor=U)},startDragging:function(B){var j=this;j._lastClientPoint=Ok(B),j._lastLogicalPoint=j.gv.lp(B),ce(j,B)},clearDragging:function(){var e=this;e._lastClientPoint=e._lastLogicalPoint=e._logicalPoint=H},autoScroll:function(e){return this.gv.autoScroll(e,this._lastClientPoint)}});var Vf=$d.DefaultInteractor=function(v){yi(Vf,this,[v])};Ib("DefaultInteractor",xb,{handle_mousedown:function(t){Cg(t);var l=this,b=l.gv,h=b.getDataAt(t);b.setFocus(t)&&!b._editing&&(Ei(t)?b.handleDoubleClick(t,h):b.handleClick(t,h),b.isPannable()&&!h&&Ue(t)&&!Ji(t)&&(l._tx=b.tx(),l._ty=b.ty(),l.startDragging(t)))},handleWindowMouseUp:function(g){var E=this,k=E.gv;k._panning&&(delete k._panning,k.onPanEnded(),E.fi({kind:"endPan",event:g})),delete E._tx,delete E._ty,E.clearDragging()},handleWindowMouseMove:function(E){var m=this,z=m.gv,X=m._lastClientPoint;m.fi({kind:z._panning?"betweenPan":"beginPan",event:E}),z._panning=1,z.setTranslate(m._tx+E.clientX-X.x,m._ty+E.clientY-X.y)},handle_mousewheel:function(f){this.gv.handleScroll(f,f.wheelDelta)},handle_DOMMouseScroll:function(f){2===f.axis&&this.gv.handleScroll(f,-f.detail)},handle_keydown:function(g){this.gv.handleKeyDown(g)}});var Jf=$d.SelectInteractor=function(e){yi(Jf,this,[e])};Ib("SelectInteractor",xb,{_42:function(){var n=this,_=n.gv,i=_.getZoom(),K=n.mark,v=n.div;v||(v=n.div=Vb(),qr(n.getView(),v));var T={};T.x=K.x*i+_.tx(),T.y=K.y*i+_.ty(),T.width=K.width*i,T.height=K.height*i,gp(v,T),this.intersects()?(v.style.border="",v.style.background=_.getRectSelectBackground()):(v.style.background="",v.style.border="1px solid "+_.getRectSelectBorderColor())},handle_mousedown:function(D){var h=this,M=h.gv;if(h._57I=H,!M._editing){var U=M.getDataAt(D),n=M.sm();U?Ji(D)?n.co(U)?n.rs(U):n.as(U):n.co(U)||n.ss(U):Ji(D)||!M.isPannable()?Ue(D)&&(Ji(D)||n.cs(),M.isRectSelectable()&&(h.startDragging(D),M._77O=1)):h._57I=Ok(D)}},handle_mouseup:function(u){var C=this,I=C._57I;I&&(Io(I,Ok(u))<=1&&C.gv.sm().cs(),C._57I=H)},handleWindowMouseUp:function(R){this.clear(R)},handleWindowMouseMove:function(K){var u=this,G=u.gv;u._logicalPoint=G.lp(K),u.mark?(u.fi({kind:"betweenRectSelect",event:K}),u.autoScroll(K),u.redraw()):u.fi({kind:"beginRectSelect",event:K}),u.mark=Ro(u._lastLogicalPoint,u._logicalPoint),u.redraw()},intersects:function(){var i=this,b=i._lastLogicalPoint,Q=i._logicalPoint;return b.x>Q.x||b.y>Q.y},clear:function(d){var i=this,G=i.gv,a=i.mark;if(i._57I=H,i._lastLogicalPoint){if(a){if(0!==a.width&&0!==a.height){var v=G.getDatasInRect(a,i.intersects());if(!v.isEmpty()){var Y=G.sm(),R=Y.toSelection();v.each(function(I){Y.co(I)?R.remove(I):R.add(I)}),Y.ss(R)}}Mq(i.div),delete i.div,delete i.mark,i.redraw(),i.fi({kind:"endRectSelect",event:d}),G.onRectSelectEnded()}i.clearDragging(),delete G._77O}},redraw:function(){var a=this;a._draw||(a._draw=1,A(function(){a.mark&&a._42(),delete a._draw},16))}});var Xi=$d.MoveInteractor=function(K){yi(Xi,this,[K])};Ib("MoveInteractor",xb,{handle_mousedown:function(G){var A=this,B=A.gv;if(Ue(G)&&!B._editing){var r=B.getSelectedDataAt(G);r?(A._data=r,B.handleMouseDown&&B.handleMouseDown(G,r),A.startDragging(G),B.isMovable(r)&&(B._moving=1)):B._focusData=H}},handleWindowMouseUp:function(H){var P=this,x=P.gv;x.handleMouseUp&&x.handleMouseUp(H,P._data),P.clear(H)},handleWindowMouseMove:function(z){var A=this,f=A.gv,X=A._data,g=f.getDataModel(),S=g.getHistoryManager();if((!f._93O||!f._93O(z,X))&&f._moving){var u=A._logicalPoint?"betweenMove":"beginMove",Z={kind:u,event:z},J=A._logicalPoint=f.lp(z);S&&"beginMove"===u&&S.beginInteraction();var O=J.x-A._lastLogicalPoint.x,P=J.y-A._lastLogicalPoint.y,d=f.getMoveMode(z,X);d&&("x"===d?P=0:"y"===d?O=0:"xy"!==d&&(O=P=0)),f.moveSelection(O,P),A._lastLogicalPoint=J,A.autoScroll(z),A.fi(Z)}},clear:function(G){var g=this,b=g.gv,v=b.getDataModel(),m=v.getHistoryManager();g._lastLogicalPoint&&(g._lastLogicalPoint=g._data=b._moving=H,g._logicalPoint&&(g.fi({kind:"endMove",event:G}),b.onMoveEnded(),m&&m.endInteraction()),g.clearDragging())}});var Yn=$d.EditInteractor=function(f){yi(Yn,this,[f])};Ib("EditInteractor",xb,{ms_edit:1,setUp:function(){var U=this;Yn.superClass.setUp.call(U),h||U.gv.setEditInteractor(U)},tearDown:function(){Yn.superClass.tearDown.call(this),h||this.gv.setEditInteractor(H)},clear:function(){var V=this,B=V.gv;B._editing&&(B._editing=V._77I=V._node=V._edge=V._shape=V._rect=V._89I=V._index=H,V.clearDragging(),V.setCursor(T))},handle_mousedown:function(i){var K=this,B=K.gv.dm(),u=B.getHistoryManager(),c=K._index,n=K._node,z=K._shape,S=K._edge,f=K._77I,d=K._89I;Ue(i)&&K.gv._editing&&(n&&d?(K._rect=n.getRect(),K.startDragging(i),u&&u.beginInteraction(),K.fi({kind:"beginEditRect",event:i,data:n,direction:d})):z&&c>=0?(K.startDragging(i),u&&u.beginInteraction(),K.fi({kind:"beginEditPoint",event:i,data:z,index:c})):S&&c>=0?(K.startDragging(i),u&&u.beginInteraction(),K.fi({kind:"beginEditPoint",event:i,data:S,index:c})):f&&(K.startDragging(i),u&&u.beginInteraction(),K.fi({kind:"beginEditRotation",event:i,data:f})))},handleWindowMouseUp:function(H){this._46O(H),this.clear()},handleWindowMouseMove:function(g){this._78I(g)},handle_mousemove:function(X){if(!Oe){var U=this,I=U.gv;U._79I(X,I.getSelectedDataAt(X))?I._editing=1:U.clear()}}});var Hd=$d.TouchInteractor=function(L,r){r=r||{},r.selectable===x&&(r.selectable=!0),r.movable===x&&(r.movable=!0),r.pannable===x&&(r.pannable=!0),r.pinchable===x&&(r.pinchable=!0),r.editable===x&&(r.editable=!0),this.params=r,yi(Hd,this,[L])};Ib("TouchInteractor",xb,{ms_edit:1,setUp:function(){var W=this;Hd.superClass.setUp.call(W),h&&W.params.editable&&W.gv.setEditInteractor(W)},tearDown:function(){var a=this;Hd.superClass.tearDown.call(a),h&&a.params.editable&&a.gv.setEditInteractor(H)},clear:function(y){var U=this,Y=U.gv,s=Y.dm().getHistoryManager();Y._moving&&(U.fi({kind:"endMove",event:y}),delete Y._moving,Y.onMoveEnded(),s&&s.endInteraction()),Y._panning&&(U.fi({kind:"endPan",event:y}),delete Y._panning,Y.onPanEnded()),Y._pinching&&(U.fi({kind:"endPinch",event:y}),delete Y._pinching,Y.onPinchEnded()),Y._editing&&(U._46O(y),U._77I=U._node=U._edge=U._shape=U._rect=U._89I=U._index=Y._editing=H),U._moving=U._panning=U._pinching=U._editing=U._57I=U._data=U._beginHistory=H,U.clearDragging()},handle_touchstart:function(o){var t=this;if(!t.gv._editing){Cg(o),t._57I=H;var E=t.params,W=t.gv,b=W.sm(),$=W.getDataAt(o),T=ck(o);if(1===T)Ei(o)?W.handleDoubleClick(o,$):(W.handleClick(o,$),$&&(W.handleMouseDown&&W.handleMouseDown(o,$),t._data=$)),E.selectable||($=H),$?(b.co($)||b.ss($),E.editable&&W.isEditable($)&&t._79I(o,$,!0)?(t._editing=1,t.startDragging(o)):E.movable&&W.isMovable($)&&(t._moving=1,t.startDragging(o))):(t._57I=Ok(o),E.pannable&&W.isPannable()&&(t._panning=1,t.startDragging(o),t._translate={x:W.tx(),y:W.ty()}));else if(E.pinchable&&2===T){t._pinching=1,t.startDragging(o);var c=W.getView(),m=W.getZoom(),B=c.getBoundingClientRect(),J=o.touches[0],f=o.touches[1],u={x:(J.clientX+f.clientX)/2-B.left,y:(J.clientY+f.clientY)/2-B.top};u.x-=W.tx(),u.y-=W.ty(),u.x/=m,u.y/=m,t._p=u,t._d=cs(o)}}},handle_touchend:function($){var A=this,m=A.gv,C=A._57I,Q=A._data;C&&(Io(C,Ok($))<=1&&m.sm().cs(),A._57I=H),Q&&m.handleMouseUp&&m.handleMouseUp($,Q)},handleWindowTouchEnd:function(k){this.clear(k)},handleWindowTouchMove:function(O){var E=this,T=E.gv,J=T.dm().getHistoryManager(),Y=ck(O);if(1===Y){if(E._editing&&(J&&!E._beginHistory&&(E._beginHistory=1,J.beginInteraction()),T._editing=1,E._78I(O)),E._moving)J&&!E._beginHistory&&(E._beginHistory=1,J.beginInteraction()),E.handleMove(O);else if(E._panning){var N=Ok(O);T.setTranslate(E._translate.x+N.x-E._lastClientPoint.x,E._translate.y+N.y-E._lastClientPoint.y),E.fi({kind:T._panning?"betweenPan":"beginPan",event:O}),T._panning=1}}else if(2===Y&&E._pinching){var w=cs(O);T.handlePinch(E._p,w,E._d),E._d=w,E.fi({kind:T._pinching?"betweenPinch":"beginPinch",event:O}),T._pinching=1}},handleMove:function(V){var c=this,b=c.gv,o=b.lp(V);b._93O&&b._93O(V,c._data)||(b.moveSelection(o.x-c._lastLogicalPoint.x,o.y-c._lastLogicalPoint.y),c._lastLogicalPoint=o,c.autoScroll(V),c.fi({kind:b._moving?"betweenMove":"beginMove",event:V}),b._moving=1)}});var we="directional",ci="point",Ld="spot",Yq="light.color";hq(e,{graph3dViewAttributes:H,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:G/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Si,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:G/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(O,Q){Fk[O]=Q},getShape3dModel:function(t){return Fk[t]},createMatrix:function(Z,E){ro(Z)||(Z=[Z]);for(var X=Z.length-1;X>=0;X--){var i=Z[X];E=xm(i.mat,i.s3,i.r3,i.rotationMode,i.t3,E)}return E},transformVec:function(q,g){return Dq(q,g)},createBoxModel:function(){return{vs:Yl,ns:zn,uv:Qc,is:ec}},createRoundRectModel:function(y,I){return Rr.roundRect(y,I)},createStarModel:function(H,W){return Rr.star(H,W)},createRectModel:function(U,h){return Rr.rect(U,h)},createTriangleModel:function(B,l){return Rr.triangle(B,l)},createRightTriangleModel:function(d,u){return Rr.rightTriangle(d,u)},createParallelogramModel:function(z,T){return Rr.parallelogram(z,T)},createTrapezoidModel:function(Y,b){return Rr.trapezoid(Y,b)},createSmoothSphereModel:function(j,q,G,U,w,N,_){return hg(new Xc(j,q,G,U,w,N,_))},createSphereModel:function(v,J,n,V,M,a){return v?wc(v,J,n,V,M,a):e.createSmoothSphereModel()},createSmoothConeModel:function(k,o,s,u,H){return th(k,o,s,u,H)},createConeModel:function(H,L,F,b,A,u){return H?ls(H,L,F,b,A,u):th(u)},createSmoothCylinderModel:function(v,U,O,Q,l,T,R,H){return hg(new Dc(v,U,O,Q,l,T,R,H))},createCylinderModel:function(T,s,W,o,L,E,v){return T?zp(T,s,W,o,L,E,v):Zm(E,v)},createSmoothTorusModel:function(x,B,H,k,_,s){return hg(new xo(x,B,H,k,_,s))},createTorusModel:function(K,X,t,p,E,R,d){return K?nh(K,X,t,p,E,R,d):$l(R,d)},createExtrusionModel:function(Z,R,S,b,g,X,G,f){return kg(Z,R,S,b,g,X,G,f)},createSmoothRingModel:function(o,B,U,b,w,A){for(var y=[],I=0;I<o.length-1;I+=2)y.push({x:o[I],y:o[I+1]});for(o=sl(y,B,U)[0],y=[],I=0;I<o.length;I++){var O=o[I];y.push(new is(O.x,0,O.y))}return hg(new Vm(y,A,b,w))},createRingModel:function(J,l,O,w,t,x,m,r,A,B){for(var X=[],S=0;S<J.length-1;S+=2)X.push({x:J[S],y:J[S+1]});x=x||e.shapeSide,m=m||0,r=r||x;var _,U,d,N,M,G,Q,Z,g,K,S,y,i,h,a,j,P,C,p=[],R=[],E=A?[]:H,o=A?[]:H,n=B?[]:H,s=B?[]:H,k=w?[]:H,F=w?[]:H,q=t?[]:H,u=t?[]:H,J=sl(X,l,O),Y=um(J),W=0,c=2*Math.PI/x;return J.forEach(function(I){if(d=I.length,d>1){if(N=I[0],w)for(G=N.x,Z=N.y,S=m;r>S;S++)y=S+1,i=S*c,h=y*c,a=L(i),j=D(i),P=L(h),C=D(h),k.push(a*G,Z,-j*G,P*G,Z,-C*G,0,Z,0),F.push(.5-.5*a,.5-.5*j,.5-.5*P,.5-.5*C,.5,.5);for(K=0;d>K;K++){for(M=I[K],G=N.x,Q=M.x,Z=N.y,g=M.y,_=W/Y,W+=Io(N,M),U=W/Y,S=m;r>S;S++)y=S+1,i=S*c,h=y*c,a=L(i),j=D(i),P=L(h),C=D(h),p.push(a*Q,g,-j*Q,P*Q,g,-C*Q,a*G,Z,-j*G,P*Q,g,-C*Q,P*G,Z,-C*G,a*G,Z,-j*G),R.push(S/x,U,y/x,U,S/x,_,y/x,U,y/x,_,S/x,_),A&&S===m&&(E.push(0,Z,0,0,g,0,a*Q,g,-j*Q,a*Q,g,-j*Q,a*G,Z,-j*G,0,Z,0),o.push(0,.5-Z,0,.5-g,2*Q,.5-g,2*Q,.5-g,2*G,.5-Z,0,.5-Z)),B&&y===r&&(n.push(0,Z,0,P*Q,g,-C*Q,0,g,0,P*Q,g,-C*Q,0,Z,0,P*G,Z,-C*G),s.push(1,.5-Z,1-2*Q,.5-g,1,.5-g,1-2*Q,.5-g,1,.5-Z,1-2*G,.5-Z));N=M}if(t)for(G=N.x,Z=N.y,S=m;r>S;S++)y=S+1,i=S*c,h=y*c,a=L(i),j=D(i),P=L(h),C=D(h),q.push(P*G,Z,-C*G,a*G,Z,-j*G,0,Z,0),u.push(.5-.5*P,.5+.5*C,.5-.5*a,.5+.5*j,.5,.5)}}),{vs:p,uv:R,bottom_vs:q,bottom_uv:u,top_vs:k,top_uv:F,from_vs:E,from_uv:o,to_vs:n,to_uv:s}}},!0),hq(g,{"3d.move.mode":x,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":x,"edge.gradient.color":x,"edge.source.t3":x,"edge.target.t3":x,"light.type":ci,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":G/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":jb,"wf.short":!1,"wf.mat":x,batch:x,"transparent.mask":!1,brightness:x,"select.brightness":.7,"repeat.uv.length":x,"label.face":u,"label.t3":x,"label.r3":x,"label.texture.scale":2,"label.rotationMode":Pi,"label.light":!1,"label.blend":x,"label.reverse.flip":!1,"label.reverse.color":co,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":u,"label2.t3":x,"label2.r3":x,"label2.texture.scale":2,"label2.rotationMode":Pi,"label2.light":!1,"label2.blend":x,"label2.reverse.flip":!1,"label2.reverse.color":co,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":u,"note.t3":x,"note.r3":x,"note.texture.scale":2,"note.rotationMode":Pi,"note.light":!1,"note.blend":x,"note.reverse.flip":!1,"note.reverse.color":co,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":u,"note2.t3":x,"note2.r3":x,"note2.texture.scale":2,"note2.rotationMode":Pi,"note2.light":!1,"note2.blend":x,"note2.reverse.flip":!1,"note2.reverse.color":co,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:x,"shape3d.color":Fo,"shape3d.top.color":x,"shape3d.bottom.color":x,"shape3d.from.color":x,"shape3d.to.color":x,"shape3d.image":x,"shape3d.top.image":x,"shape3d.bottom.image":x,"shape3d.from.image":x,"shape3d.to.image":x,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":x,"shape3d.side.to":x,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":x,"shape3d.opacity":x,"shape3d.reverse.flip":!1,"shape3d.reverse.color":co,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":x,"shape3d.uv.scale":x,"shape3d.top.uv.offset":x,"shape3d.top.uv.scale":x,"shape3d.bottom.uv.offset":x,"shape3d.bottom.uv.scale":x,"shape3d.from.uv.offset":x,"shape3d.from.uv.scale":x,"shape3d.to.uv.offset":x,"shape3d.to.uv.scale":x,"shape3d.top.cap":x,"shape3d.bottom.cap":x,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":Fo,"all.image":x,"all.blend":x,"all.opacity":x,"all.reverse.flip":!1,"all.reverse.color":co,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":x,"all.uv.offset":x,"all.uv.scale":x,"all.discard.selectable":!0,mat:x,"left.mat":x,"right.mat":x,"top.mat":x,"bottom.mat":x,"front.mat":x,"back.mat":x},!0);
var Qr,Xp=!1,cq=[0,0,0,1/255],Zk={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:U,2:X,3:Ol,4:Ko,5:u,6:n}},Wh=function(N,o,Z,d){if(o.getFaceVisible(N,Z)){fg(o,Pq(N,o.getFaceMat(N,Z)||o.getMat(N)));var J=o._26I;o.getFaceReverseCull(N,Z)?J.enable(J.CULL_FACE):J.disable(J.CULL_FACE),ti(J,o._prg.uFixPickReverseColor,Zk[Z]),gn(J,d,6),dr(o)}},Sp=function(k){return k instanceof _o},Km=function(p){return[p.x,p.e||0,p.y]},Wk=function(d,O,F){for(var O=of(O),u=O[0],p=O[1],$=O[2];F--;)d.push(u,p,$)},ho=function(k,r,S){for(var r=of(r),s=r[0],w=r[1],K=r[2],c=r[3];S--;)k.push(s,w,K,c)},zk=function(g,d,F){if(d)for(var w,G,P,h=d[0],o=d[1],p=d[2],X=d[4],R=d[5],b=d[6],f=d[8],a=d[9],e=d[10],q=d[12],N=d[13],k=d[14],O=F.length,V=0,V=0;O>V;V+=3)w=F[V],G=F[V+1],P=F[V+2],g.push(h*w+X*G+f*P+q,o*w+R*G+a*P+N,p*w+b*G+e*P+k);else Sj(g,F)},Gg=function(Z,H){var F=H.s("light.intensity"),u=of(H.s(Yq)),p=u[0],s=u[1],v=u[2];1!==F&&(p*=F,s*=F,v*=F),Z.push(p,s,v,H.s("light.disabled")?1:0)},Oq=function(Y,V,s){ti(V,s.uHeadlightRange,Y._headlightRange);var q=Y._headlightIntensity,A=of(Y._headlightColor);1!==q&&(A=[A[0]*q,A[1]*q,A[2]*q]),ti(V,s.uHeadlightColor,[A[0],A[1],A[2],Y._headlightDisabled?1:0]);var $=Y._59O,n=Y._spots,k=Y._dirs;if($.length){var S=[],Q=[],R=[];$.forEach(function(t){Gg(S,t),Sj(Q,t.p3()),R.push(t.s("light.range"))}),V.uniform4fv(s.uPointColor,S),V.uniform1fv(s.uPointRange,R),V.uniform3fv(s.uPointPosition,Q)}if(n.length){var p=[],C=[],X=[],r=[],v=[],I=[];n.forEach(function(W){Gg(p,W),Sj(C,W.p3()),Sj(X,W.s("light.center")),r.push(W.s("light.range")),v.push(L(W.s("light.angle")/2)),I.push(W.s("light.exponent"))}),V.uniform4fv(s.uSpotColor,p),V.uniform1fv(s.uSpotRange,r),V.uniform1fv(s.uSpotAngle,v),V.uniform1fv(s.uSpotExponent,I),V.uniform3fv(s.uSpotPosition,C),V.uniform3fv(s.uSpotCenter,X)}if(k.length){var T=[],M=[];k.forEach(function(n){Gg(T,n),Sj(M,n.p3())}),V.uniform4fv(s.uDirColor,T),V.uniform3fv(s.uDirPosition,M)}},Ii=function(S){return S>0&&0===(S-1&S)},Lh=function(v){return v=W(0,P(G,v)),v=W(Vc,P(G-Vc,v))},Ug=function(){return.05+k()/2},il=function(C,R,k,H){var A,e=C.getEye();return C.isOrtho()?(A=Wg(C.getCenter(),e),A[0]+=H[0],A[1]+=H[1],A[2]+=H[2]):A=e,Pf(R,k,H,A)},Pf=function(K,N,k,D){var V=ql(K,N),Z=Wg(D,k,!0),m=ql(Z,N);if(t(m)<Vc)return H;var i=(V-ql(k,N))/m;return[k[0]+Z[0]*i,k[1]+Z[1]*i,k[2]+Z[2]*i]},Fi=function(G,D){return{x:2*G.x-D.x,y:2*G.y-D.y}},lo=function(K,o,v,q){var w,J;if(!K)return w=l(o.y-v.y,v.x-o.x),{x:o.x+q*D(w),y:o.y+q*L(w)};if(!v)return w=l(K.y-o.y,o.x-K.x),{x:o.x+q*D(w),y:o.y+q*L(w)};var h=Wg([K.x,K.y,0],[o.x,o.y,0],!0),V=Wg([v.x,v.y,0],[o.x,o.y,0],!0),Y=-(h[0]+V[0])/2,n=-(h[1]+V[1])/2,C=a(Y*Y+n*n);return Vc>C?(w=l(K.y-o.y,o.x-K.x),{x:o.x+q*D(w),y:o.y+q*L(w)}):(w=I(ql(h,V))/2,J=h[1]*V[0]-h[0]*V[1]>0?-1:1,Y/=C,n/=C,C=q/D(w),{x:o.x+J*C*Y,y:o.y+J*C*n})},nf=function(m){var d=m[1],h=m[2],V=m[3],y=m[6],x=m[7],i=m[11];m[1]=m[4],m[2]=m[8],m[3]=m[12],m[4]=d,m[6]=m[9],m[7]=m[13],m[8]=h,m[9]=y,m[11]=m[14],m[12]=V,m[13]=x,m[14]=i},Tm=function(p){var k=p[0],Z=p[1],O=p[2],A=p[3],Q=p[4],u=p[5],q=p[6],$=p[7],N=p[8],t=p[9],j=p[10],v=p[11],D=p[12],L=p[13],G=p[14],F=p[15],c=k*u-Z*Q,J=k*q-O*Q,U=k*$-A*Q,y=Z*q-O*u,E=Z*$-A*u,m=O*$-A*q,K=N*L-t*D,C=N*G-j*D,V=N*F-v*D,x=t*G-j*L,I=t*F-v*L,Y=j*F-v*G,e=c*Y-J*I+U*x+y*V-E*C+m*K;return e?(e=1/e,p[0]=(u*Y-q*I+$*x)*e,p[1]=(O*I-Z*Y-A*x)*e,p[2]=(L*m-G*E+F*y)*e,p[3]=(j*E-t*m-v*y)*e,p[4]=(q*V-Q*Y-$*C)*e,p[5]=(k*Y-O*V+A*C)*e,p[6]=(G*U-D*m-F*J)*e,p[7]=(N*m-j*U+v*J)*e,p[8]=(Q*I-u*V+$*K)*e,p[9]=(Z*V-k*I-A*K)*e,p[10]=(D*E-L*U+F*c)*e,p[11]=(t*U-N*E-v*c)*e,p[12]=(u*C-Q*x-q*K)*e,p[13]=(k*x-Z*C+O*K)*e,p[14]=(L*J-D*y-G*c)*e,p[15]=(N*y-t*J+j*c)*e,void 0):H},ob=function(o,L){if(L){var U=L[0],R=L[1],r=L[2];o[12]=o[0]*U+o[4]*R+o[8]*r+o[12],o[13]=o[1]*U+o[5]*R+o[9]*r+o[13],o[14]=o[2]*U+o[6]*R+o[10]*r+o[14],o[15]=o[3]*U+o[7]*R+o[11]*r+o[15]}},Ud=function(D,I){if(I){var K=I[0],q=I[1],W=I[2];D[0]=D[0]*K,D[1]=D[1]*K,D[2]=D[2]*K,D[3]=D[3]*K,D[4]=D[4]*q,D[5]=D[5]*q,D[6]=D[6]*q,D[7]=D[7]*q,D[8]=D[8]*W,D[9]=D[9]*W,D[10]=D[10]*W,D[11]=D[11]*W}},rc=function(G,A,t){var J=A[0],O=A[1],I=A[2],S=A[3],e=A[4],P=A[5],V=A[6],l=A[7],$=A[8],Y=A[9],B=A[10],s=A[11],m=A[12],g=A[13],E=A[14],w=A[15],c=t[0],i=t[1],y=t[2],r=t[3];return G[0]=c*J+i*e+y*$+r*m,G[1]=c*O+i*P+y*Y+r*g,G[2]=c*I+i*V+y*B+r*E,G[3]=c*S+i*l+y*s+r*w,c=t[4],i=t[5],y=t[6],r=t[7],G[4]=c*J+i*e+y*$+r*m,G[5]=c*O+i*P+y*Y+r*g,G[6]=c*I+i*V+y*B+r*E,G[7]=c*S+i*l+y*s+r*w,c=t[8],i=t[9],y=t[10],r=t[11],G[8]=c*J+i*e+y*$+r*m,G[9]=c*O+i*P+y*Y+r*g,G[10]=c*I+i*V+y*B+r*E,G[11]=c*S+i*l+y*s+r*w,c=t[12],i=t[13],y=t[14],r=t[15],G[12]=c*J+i*e+y*$+r*m,G[13]=c*O+i*P+y*Y+r*g,G[14]=c*I+i*V+y*B+r*E,G[15]=c*S+i*l+y*s+r*w,G},ms=function(r,o,g,L){var Y,j,S,O,H,Z,E,G,B,I,T=o[0],f=o[1],_=o[2],x=L[0],l=L[1],c=L[2],k=g[0],U=g[1],s=g[2];return t(T-k)<Vc&&t(f-U)<Vc&&t(_-s)<Vc?gb(r):(E=T-k,G=f-U,B=_-s,I=1/a(E*E+G*G+B*B),E*=I,G*=I,B*=I,Y=l*B-c*G,j=c*E-x*B,S=x*G-l*E,I=a(Y*Y+j*j+S*S),I?(I=1/I,Y*=I,j*=I,S*=I):(Y=0,j=0,S=0),O=G*S-B*j,H=B*Y-E*S,Z=E*j-G*Y,I=a(O*O+H*H+Z*Z),I?(I=1/I,O*=I,H*=I,Z*=I):(O=0,H=0,Z=0),r[0]=Y,r[1]=O,r[2]=E,r[3]=0,r[4]=j,r[5]=H,r[6]=G,r[7]=0,r[8]=S,r[9]=Z,r[10]=B,r[11]=0,r[12]=-(Y*T+j*f+S*_),r[13]=-(O*T+H*f+Z*_),r[14]=-(E*T+G*f+B*_),r[15]=1,r)},Wp=function(W,J,N,u,X){var g=1/E(J/2),z=1/(u-X);return W[0]=g/N,W[1]=0,W[2]=0,W[3]=0,W[4]=0,W[5]=g,W[6]=0,W[7]=0,W[8]=0,W[9]=0,W[10]=(X+u)*z,W[11]=-1,W[12]=0,W[13]=0,W[14]=2*X*u*z,W[15]=0,W},Ag=function(x,r,I,T,s,S,u){var D=1/(r-I),Y=1/(T-s),o=1/(S-u);return x[0]=-2*D,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=-2*Y,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=2*o,x[11]=0,x[12]=(r+I)*D,x[13]=(s+T)*Y,x[14]=(u+S)*o,x[15]=1,x},Eo=function(b,$){return ms($?$:Gk(),b._eye,b._center,b._up)},Ck=function(e){var L=e.getAspect(),w=e._near,p=e._far,N=Gk();if(e._ortho){var H=e._orthoWidth/2,O=H/L;Ag(N,-H,H,-O,O,w,p)}else Wp(N,e._fovy,L,w,p);return N},nr=function(l,B){if(!l)return H;var J=0,E=1,p=2,O=[],z=0,b=l.length,R=b/3;if(B){for(;b>z;z++)O[z]=0;for(z=0;z<B.length;z+=3){var y=[],Q=[],N=[];y[J]=l[3*B[z+1]+J]-l[3*B[z]+J],y[E]=l[3*B[z+1]+E]-l[3*B[z]+E],y[p]=l[3*B[z+1]+p]-l[3*B[z]+p],Q[J]=l[3*B[z+2]+J]-l[3*B[z+1]+J],Q[E]=l[3*B[z+2]+E]-l[3*B[z+1]+E],Q[p]=l[3*B[z+2]+p]-l[3*B[z+1]+p],N[J]=y[E]*Q[p]-y[p]*Q[E],N[E]=y[p]*Q[J]-y[J]*Q[p],N[p]=y[J]*Q[E]-y[E]*Q[J];for(var I=0;3>I;I++)O[3*B[z+I]+J]+=N[J],O[3*B[z+I]+E]+=N[E],O[3*B[z+I]+p]+=N[p]}}else for(z=0;R>z;z+=3){var y=[],Q=[],N=[];y[J]=l[3*(z+1)+J]-l[3*z+J],y[E]=l[3*(z+1)+E]-l[3*z+E],y[p]=l[3*(z+1)+p]-l[3*z+p],Q[J]=l[3*(z+2)+J]-l[3*(z+1)+J],Q[E]=l[3*(z+2)+E]-l[3*(z+1)+E],Q[p]=l[3*(z+2)+p]-l[3*(z+1)+p],N[J]=y[E]*Q[p]-y[p]*Q[E],N[E]=y[p]*Q[J]-y[J]*Q[p],N[p]=y[J]*Q[E]-y[E]*Q[J];for(var I=0;3>I;I++)O[3*(z+I)+J]=N[J],O[3*(z+I)+E]=N[E],O[3*(z+I)+p]=N[p]}for(z=0;b>z;z+=3){var c=[];c[J]=O[z+J],c[E]=O[z+E],c[p]=O[z+p];var W=a(c[J]*c[J]+c[E]*c[E]+c[p]*c[p]);0===W&&(W=Vc),c[J]=c[J]/W,c[E]=c[E]/W,c[p]=c[p]/W,O[z+J]=c[J],O[z+E]=c[E],O[z+p]=c[p]}return new Po(O)},Bc=function(I,o,D){if(D||(D=I.createTexture()),o){var M=I.TEXTURE_2D,O=I.LINEAR,R=I.REPEAT,S=I.CLAMP_TO_EDGE,X=I.TEXTURE_MIN_FILTER;Zi(I,D),I.texImage2D(M,0,I.RGBA,I.RGBA,I.UNSIGNED_BYTE,o),kp(I,I.TEXTURE_MAG_FILTER,O),Ii(o.width)&&Ii(o.height)?(kp(I,I.TEXTURE_WRAP_S,R),kp(I,I.TEXTURE_WRAP_T,R),kp(I,X,I.LINEAR_MIPMAP_LINEAR),I.generateMipmap(M)):(kp(I,I.TEXTURE_WRAP_S,S),kp(I,I.TEXTURE_WRAP_T,S),kp(I,X,O)),Zi(I,H)}return D},Yc=function(w){w._26I&&w._prg&&(w._26I.deleteProgram(w._prg),w._prg=H)},aj=function(M,q,X,P){var R=M.createShader(X);return M.shaderSource(R,P),M.compileShader(R),M.attachShader(q,R),R},To=function(G){return G.createBuffer()},Zi=function(D,P){D.bindTexture(D.TEXTURE_2D,P)},_m=function(e,q){e.bindFramebuffer(e.FRAMEBUFFER,q)},kp=function(d,Q,S){d.texParameteri(d.TEXTURE_2D,Q,S)},Sb=function(f,L){if(L){var L=of(L);f.clearColor(L[0],L[1],L[2],L[3])}},mq=function(i,R){ti(i,R.uFix,!0),Vn(i,R.aNormal)},bs=function(W,M){ti(W,M.uFix,!1),Ak(W,M.aNormal)},Mp=function(c,Z,E,A,M,s,h,$){c._picking||(E?(ti(c,Z.uBlend,!0),ti(c,Z.uBlendColor,E)):ti(c,Z.uBlend,!1),ti(c,Z.uLight,A==H?!0:A),Se(M)&&1!==M&&ti(c,Z.uPartOpacity,M),ti(c,Z.uReverseFlip,s==H?!1:s),ti(c,Z.uFixPickReverseColor,h||co)),$?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE)},Md=function(H,K){H._picking||ti(H,K.uPartOpacity,1)},Zc=function(U,L,j,n,K,b,V,A){if(j){ti(U,L.uTexture,!0),ti(U,L.uDiscardSelectable,Bm(n)?n:!0),Ak(U,L.aUv),Eh(U,K,b,L.aUv,2),U.activeTexture(U.TEXTURE0),Zi(U,j),U.uniform1i(L.uSampler,0);var h=[0,0,1,1];V&&(h[0]=V[0],h[1]=V[1]),A&&(h[2]=A[0],h[3]=A[1]),ti(U,L.uOffsetScale,h)}},Jj=function(Q,u,W){W&&(Zi(Q,H),Vn(Q,u.aUv),ti(Q,u.uTexture,!1))},lb=function(V,U,q,Y,P,h){q&&!Z&&V.lineWidth(q),Y&&!V._picking&&ti(V,U.uFixPickReverseColor,Y),P&&Eh(V,P,h,U.aPosition)},cc=function(L,I,m,R){Qr&&(R=L[Qr]),L.drawArrays(R==H?L.TRIANGLES:R,I,m)},gn=function(O,Y,K,W){Qr&&(W=O[Qr]),O.drawElements(W==H?O.TRIANGLES:W,K,O.UNSIGNED_SHORT,Y==H?0:2*Y)},Eh=function(K,J,h,L,v){var f=K.ARRAY_BUFFER;K.bindBuffer(f,J),h&&K.bufferData(f,h,K.STATIC_DRAW),L!=H&&K.vertexAttribPointer(L,v?v:3,K.FLOAT,!1,0,0)},fj=function(k,C,g){var p=k.ELEMENT_ARRAY_BUFFER;k.bindBuffer(p,C),g&&k.bufferData(p,g,k.STATIC_DRAW)},ti=function(B,O,M){if(M!=H&&O!=H){M=of(M);var q=M.length;3===q?B.uniform3fv(O,M):4===q?B.uniform4fv(O,M):16===q?B.uniformMatrix4fv(O,!1,M):Bm(M)?B.uniform1i(O,M?1:0):2===q?B.uniform2fv(O,M):B.uniform1f(O,M)}},Ak=function($,c){c!=H&&c>=0&&$.enableVertexAttribArray(c)},Vn=function(w,X){X!=H&&X>=0&&w.disableVertexAttribArray(X)},dr=function(N,K){var A=N.getGL(),g=N._prg;N._7O=N._8O.pop(),K&&(ti(A,g.uMVMatrix,N._7O),N._6O=K,ti(A,g.uNMatrix,K))},qf=function(H,E){return E||(E=Gk()),Yo(E,H),Tm(E),nf(E),E},fg=function(g,M){var s=g.getGL(),C=g._prg,r=g._7O;M&&(g._8O.push(lm(r)),rc(r,r,M)),ti(s,C.uMVMatrix,r),ti(s,C.uNMatrix,qf(r,g._6O))},hd=function(F,d,U,c,B,P){if(U){if(c){var G=U.value++,s=[(255&G>>24)/255,(255&G>>16)/255,(255&G>>8)/255,(255&G)/255];U[G]={data:B,part:P}}else s=cq;return ti(F,d.uFixPickReverseColor,s),s}},Al=function(){var R={center:function(l,o,P,u,w){var x=o[1]/2,e={x:-o[0]/2,y:x,width:o[0],height:o[1]},I=Ui(l,e,P);return[I.x+u,2*x-I.y-w,Ug()]},front:function(S,H,x,Y,m){var e=H[1]/2,u={x:-H[0]/2,y:e,width:H[0],height:H[1]},n=Ui(S,u,x);return[n.x+Y,2*e-n.y-m,H[2]/2+Ug()]},back:function(B,t,N,q,A){var X=t[0]/2,f=t[1]/2,O={x:X,y:f,width:t[0],height:t[1]},c=Ui(B,O,N);return[2*X-c.x-q,2*f-c.y-A,-t[2]/2-Ug()]},left:function(V,T,g,s,C){var X=T[1]/2,S={x:-T[2]/2,y:X,width:T[2],height:T[1]},D=Ui(V,S,g);return[-T[0]/2-Ug(),2*X-D.y-C,D.x+s]},right:function(z,j,Q,P,u){var D=j[2]/2,i=j[1]/2,p={x:D,y:i,width:j[2],height:j[1]},f=Ui(z,p,Q);return[j[0]/2+Ug(),2*i-f.y-u,2*D-f.x-P]},top:function(C,R,N,g,_){var S={x:-R[0]/2,y:-R[2]/2,width:R[0],height:R[2]},b=Ui(C,S,N);return[b.x+g,R[1]/2+Ug(),b.y+_]},bottom:function(H,j,l,c,V){var n=j[2]/2,h={x:-j[0]/2,y:n,width:j[0],height:j[2]},A=Ui(H,h,l);return[A.x+c,-j[1]/2-Ug(),2*n-A.y-V]}};return function(I,t,Q,Y,G,Z){return R[Y](I,t,Q,G||0,Z||0)}}(),Fj=function(Y,W,q,f,A,R,P,D,o,T){if(A&&(W[0]+=A[0],W[1]+=A[1],W[2]+=A[2]),ob(Y,q),D){var e=Gk();if(ik(e,o,T),Dq(W,e),ob(Y,W),Y.auto=D,Y.pos=Dq([0,0,0],Y),R){var p=Y.mat2=Gk();ik(p,R,P)}}else ik(Y,o,T),ob(Y,W),f===U?Up(Y,-K):f===X?Up(Y,K):f===Ol?fk(Y,-K):f===Ko?fk(Y,K):f===n&&Up(Y,G),ik(Y,R,P);return Y},Kg=function(E,k){var Q=k.auto,U=k.mat2,K=E.gv;if(Q){var Z=Wg(E.gv.getEye(),k.pos),F=Gk();Up(F,G/2+l(-Z[2],Z[0])),"y"!==Q&&fk(F,-l(Z[1],a(Z[2]*Z[2]+Z[0]*Z[0]))),U&&rc(F,F,U),F=rc(Gk(),k,F),fg(K,F)}else fg(K,k)},Pe=function(E,P,Y,m,R){var t=E.s,h=E.gv,z=h.getGL(),M=h._prg,q=h._buffer,j=h._1O;Bc(z,mf,j),Kg(E,Y),Mp(z,M,t(P+".blend"),t(P+".light"),t(P+".opacity"),t(P+".reverse.flip"),t(P+".reverse.color"),t(P+".reverse.cull")),Zc(z,M,j,R,q.uv,Hb),Eh(z,q.vs,m,M.aPosition),Eh(z,q.ns,vb,M.aNormal),fj(z,q.is,Ym),gn(z,0,Ym.length),Jj(z,M,j),Md(z,M),dr(h)},Vg=function(c,s,Y){var A=c.gv,$=c.data,C=c[s]={blend:A.getBodyColor($)||A.getFaceBlend($,s),light:A.getFaceLight($,s),color:A.getFaceColor($,s),opacity:A.getFaceOpacity($,s),transparent:A.getFaceTransparent($,s),reverseFlip:A.getFaceReverseFlip($,s),reverseColor:A.getFaceReverseColor($,s),reverseCull:A.getFaceReverseCull($,s),texture:A.getFaceImage($,s),discardSelectable:A.getFaceDiscardSelectable($,s)};if("csg"!==s){C.uv=A.getFaceUv($,s)||Y&&Y[s+"Uv"],C.uvScale=A.getFaceUvScale($,s)||Y&&Y[s+"UvScale"],C.uvOffset=A.getFaceUvOffset($,s)||Y&&Y[s+"UvOffset"];var B=A.getFaceMat($,s);B&&(C.mat=Pq($,B))}return C},$g=function(S,D,L,t,d){if(t){if(!d(t.transparent))return;var z=S.data,R=S.gv,e=R._buffer,l=R.getTexture(t.texture,z);Zc(D,L,l,t.discardSelectable,e.uv,t.tuv,t.uvOffset,t.uvScale),Mp(D,L,t.blend,t.light,t.opacity,t.reverseFlip,t.reverseColor,t.reverseCull),ti(D,L.uDiffuse,t.color),Eh(D,e.vs,t.vs,L.aPosition),Eh(D,e.ns,t.ns,L.aNormal),cc(D,0,t.vs.length/3),Md(D,L),Jj(D,L,l)}},fm=function(U,e,i,I,p,d){var A,x,W,X,b,u,F,D,t,j,_,f=[I-e,p-i],c=U?U.length:0;for(W=0;c>W;W++){for(X=2,A=U[W],b=A[0],u=A[1];X+1<A.length;){if(F=A[X],D=A[X+1],x=Tp(e,i,I,p,b,u,F,D,!0)){t=[F-b,D-u],j=Io(t),t[0]/=j,t[1]/=j,j=ql(f,t),j=j>0?d:-d,_=[t[0]*j,t[1]*j];break}b=F,u=D,X+=2}if(_)break}if(_)for(I=e+_[0],p=i+_[1],W=0;c>W;W++)for(X=2,A=U[W],b=A[0],u=A[1];X+1<A.length;){if(F=A[X],D=A[X+1],x=Tp(e,i,I,p,b,u,F,D,!0))return[0,0];b=F,u=D,X+=2}return _?_:[I-e,p-i]},Ng=j.graph3d={},yn=function(p,E,d){oc(q+".graph3d."+p,E,d)},eq="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",bc="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";hq(e,{setBatchInfo:function(p,$){Jk[p]=$},getBatchInfo:function(e){return Jk[e]}},!0);var So=[1,1,1],Gl=[1,0,0,0,0,1,0,1,1,1,1,0],xr=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],Gr=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Bk=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Sh=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],mc=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Jc=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],er=function(r,m){ks(r,m),Ve(r,m,"_wireframeModelMap","_wireframeIndexMap"),Ve(r,m,"_polylineModelMap","_polylineIndexMap")},ks=function(H,E){if(E){var I,J,k=E._id,Z=H._33O,i=H._34O,q=i[k];if(q){J=q.batch,I=Z[J];var u=q.begin,c=q.size,z=3*u,b=3*c,L=4*u,N=4*c,n=I.vs,Y=I.uv,F=I.cs,a=I.bs,g=I.rs,O=I.ds,R=q.index;if(I.invalidate=!0,delete i[k],O.splice(R,1),xf(O))delete Z[J];else{for(;R<O.length;R++)q=i[O[R]._id],q.index--,q.begin-=c;n.splice(z,b),I.ns.splice(z,b),I.ps.splice(L,N),Y&&Y.splice(2*u,2*c),F&&F.splice(L,N),a&&a.splice(z,b),g&&g.splice(u,c)}}}else H._34O={},H._33O={}},Ve=function(S,R,L,q){if(R){var y,$,Z=R._id,h=S[L],e=S[q],g=e[Z];if(g){$=g.batch,y=h[$];var G=g.begin,K=g.size,k=3*G,v=3*K,O=4*G,j=4*K,d=y.ds,n=g.index;if(y.invalidate=!0,delete e[Z],d.splice(n,1),xf(d))delete h[$];else{for(;n<d.length;n++)g=e[d[n]._id],g.index--,g.begin-=K;y.vs.splice(k,v),y.cs.splice(O,j),y.ps.splice(O,j),y.ls&&y.ls.splice(G,K)}}}else S[L]={},S[q]={}},Ec=function(M,w,Z,J){if(!J)return H;var $=w[J];if(!$){var Q=Jk[J]||ur,L=Q.image?[]:H;$=w[J]={vs:[],ns:[],uv:L,cs:L?H:Q.color?H:[],bs:Q.blend?[]:H,ps:[],rs:Q.brightness?[]:H,ds:[]}}return $.invalidate=!0,M[Z._id]={index:$.ds.length,begin:$.vs.length/3,batch:J},$.ds.push(Z),$},Fh=function(K,O){return O!=H&&1!==O?[K[0]*O,K[1]*O,K[2]*O,K[3]]:K},uh=function(o,J,e){var d=o.getBrightness(J),R=of(e.color||"white"),U=R[3]<1,T=Math.ceil(e.width)||1,j=(U?"T":"O")+T,f=o._wireframeIndexMap,x=o._wireframeModelMap,t=x[j];t||(t=x[j]={vs:[],cs:[],ps:[],ds:[],T:U,W:T}),t.invalidate=!0;var M=t.vs,H=t.cs,c=t.ds,s=f[J._id]={index:c.length,begin:M.length/3,batch:j};c.push(J),zk(M,Pq(J,e.mat),e.short?Pj:ii);var l=s.size=M.length/3-s.begin;ho(H,Fh(R,d),l)},An=function(w,O,F,J,T,Z,P,p,X){var n=w.getBrightness(O);n==H&&(n=1);var v=Fh(of(J),n),N=v[3]<1;Z=Math.ceil(Z)||1;var Y=(N?"T":"O")+Z;if(P){var M=P[0],A=(P[1]||M)+M;Y+="-"+M+"-"+A,X&&(Y+="-"+Ek(X)+"-"+n,X=Fh(of(X),n))}var S=w._polylineIndexMap,D=w._polylineModelMap,c=D[Y];c||(c=D[Y]={vs:[],cs:[],ps:[],ds:[],ls:P?[]:H,T:N,W:Z},P&&(c.D=M,c.G=A,c.A=X)),c.invalidate=!0;var j,$=c.vs,u=c.cs,l=c.ds,V=c.ls,i=S[O._id]={index:l.length,begin:$.length/3,batch:Y};l.push(O),Sj($,F);var C,s=i.size=$.length/3-i.begin,m=F.length,h=0,W=[];if(P||T)for(j=0;m>j;j+=6)C=Io([F[j],F[j+1],F[j+2]],[F[j+3],F[j+4],F[j+5]]),W.push(C),h+=C;if(h&&T){var L,G=Fh(of(T),n),E=[G[0]-v[0],G[1]-v[1],G[2]-v[2],G[3]-v[3]],z=0;for(j=0;m>j;j+=6)L=z/h,ho(u,[v[0]+E[0]*L,v[1]+E[1]*L,v[2]+E[2]*L,v[3]+E[3]*L],1),z+=W[j/6],L=z/h,ho(u,[v[0]+E[0]*L,v[1]+E[1]*L,v[2]+E[2]*L,v[3]+E[3]*L],1)}else ho(u,v,s);if(P)for(z=p||0,j=0;m>j;j+=6)V.push(z),z+=W[j/6],V.push(z)},Lj=function(i,v,_){if(v)for(var L=4*v.begin,b=_[v.batch].ps,Z=0;Z<v.size;Z++)b[L++]=i[0],b[L++]=i[1],b[L++]=i[2],b[L++]=i[3]},yg=function(w,R){var a=R+["32"],T=w[R],u=w[a];T?u&&u.length===T.length?u.set(T):w[a]=new Po(T):delete w[a]},qb=function(X,b,u,A,t,l,L,J,U){if(ro(u))u.forEach(function(r){qb(X,b,r,A,t,l,L,J,U)});else if(Kf(u))qb(X,b,lr(A,u),A,t,l,L,J,U);else if(Gb(u)){var s,F=wo(u.mat,b,X),Z=wo(u.s3,b,X),p=wo(u.t3,b,X),k=wo(u.r3,b,X);if((Z||k||p||F)&&(s=xm(F,Z,k,wo(u.rotationMode,b,X),p),l.push(s)),u.shape3d)qb(X,b,u.shape3d,A,t,l,L,J,u);else{U=U||ur;var D=l[0],E=l.length,o=A("shape3d.color",u.color,U.color);if(t||(t=A("shape3d.blend",u.blend,U.blend)),E>1){D=lm(D);for(var w=1;E>w;w++)rc(D,D,l[w])}u.vs&&A(_c,u.visible,U.visible)&&pg(D,L,J,u.vs,u.uv,u.is,t,o),u.top_vs&&A(wr,u.topVisible,U.topVisible)&&pg(D,L,J,u.top_vs,u.top_uv,u.top_is,t,A("shape3d.top.color",u.topColor,U.topColor)||o),u.bottom_vs&&A(nj,u.bottomVisible,U.bottomVisible)&&pg(D,L,J,u.bottom_vs,u.bottom_uv,u.bottom_is,t,A("shape3d.bottom.color",u.bottomColor,U.bottomColor)||o),u.from_vs&&A(be,u.fromVisible,U.fromVisible)&&pg(D,L,J,u.from_vs,u.from_uv,u.from_is,t,A("shape3d.from.color",u.fromColor,U.fromColor)||o),u.to_vs&&A(ug,u.toVisible,U.toVisible)&&pg(D,L,J,u.to_vs,u.to_uv,u.to_is,t,A("shape3d.to.color",u.toColor,U.toColor)||o)}s&&l.pop()}},pg=function(B,k,m,j,S,s,C,$){var Y,E=k.cs,u=k.uv,R=k.bs;if(s){Y=s.length;for(var n=0;Y>n;n++){var o=s[n];zk(m,B,[j[3*o],j[3*o+1],j[3*o+2]]),u&&Sj(u,[S[2*o],S[2*o+1]])}}else Y=j.length/3,zk(m,B,j),u&&Sj(u,S);E&&ho(E,$,Y),R&&(C?Wk(R,C,Y):Sj(R,So,Y))},ml=function(d,P,g,$){var B=[];$?qb(d.gv,d.data,$,d.s,d.getBodyColor(),[P],g,B):(Jh(d,U,P,g,B),Jh(d,X,P,g,B),Jh(d,u,P,g,B),Jh(d,n,P,g,B),Jh(d,Ol,P,g,B),Jh(d,Ko,P,g,B),Jh(d,"csg",P,g,B)),B.length&&(Sj(g.vs,B),Sj(g.ns,nr(B)))},Jh=function(E,V,m,h,x){var W=E[V];if(W){var s=W.tuv;if(s){var L,P,S,e,r=W.uvScale,z=W.uvOffset;if(r)for(L=s.length,P=r[0],S=r[1],e=0;L>e;e+=2)s[e]*=P,s[e+1]*=S;if(z)for(L=s.length,P=z[0],S=z[1],e=0;L>e;e+=2)s[e]+=P,s[e+1]+=S}pg(m,h,x,W.vs,s,H,W.blend,W.color)}},po=function(I,S,k,r,F,f,q,o){var O,T=k.cs,B=k.uv,i=k.bs;if(I.getFaceVisible(S,f)){var L=I.getFaceMat(S,f);if(L&&(F=Pq(S,L)),zk(q,F,o),T&&ho(T,I.getFaceColor(S,f),6),B){var a=I.getFaceUv(S,f)||r[f+"Uv"],C=I.getFaceUvScale(S,f)||r[f+"UvScale"],v=I.getFaceUvOffset(S,f)||r[f+"UvOffset"];a=a?[a[6],a[7],a[0],a[1],a[2],a[3],a[2],a[3],a[4],a[5],a[6],a[7]]:Gl;var z=a[0],l=a[1],h=a[2],s=a[3],e=a[4],D=a[5],u=a[6],V=a[7],g=a[8],K=a[9],W=a[10],G=a[11];if(C){var A=C[0],H=C[1];z*=A,l*=H,h*=A,s*=H,e*=A,D*=H,u*=A,V*=H,g*=A,K*=H,W*=A,G*=H}if(v){var P=v[0],p=v[1];z+=P,l+=p,h+=P,s+=p,e+=P,D+=p,u+=P,V+=p,g+=P,K+=p,W+=P,G+=p}B.push(z,l,h,s,e,D,u,V,g,K,W,G)}i&&(O=I.getBodyColor(S)||I.getFaceBlend(S,f),O?Wk(i,O,6):Sj(i,So,6))}},Zl=function(v,d,l,X){var Q=v.getGL(),T=v._prg,n=v._buffer;if(!ws(d)){fg(v),mq(Q,T);for(var I in d){var R=d[I];if(!(X&&!R.T||!X&&R.T)){R.invalidate?(R.invalidate=!1,yg(R,"vs"),yg(R,"cs"),yg(R,"ls"),yg(R,"ps")):l&&yg(R,"ps");var L=R.vs32,U=l?R.ps32:R.cs32;lb(Q,T,R.W,H,n.vs,L);var p=R.D,_=!v._dashDisabled&&p;_&&(ti(Q,T.uDash,!0),ti(Q,T.uDashDistance,p),ti(Q,T.uDashGapDistance,R.G),Ak(Q,T.aLineDistance),Eh(Q,n.lineDistance,R.ls32,T.aLineDistance,1),ti(Q,T.uDiffuse,R.A||jk));var C=!v._batchColorDisabled;C&&(ti(Q,T.uBatchColor,!0),Ak(Q,T.aBatchColor),Eh(Q,n.batchColor,U,T.aBatchColor,4)),cc(Q,0,L.length/3,Q.LINES),C&&(ti(Q,T.uBatchColor,!1),Vn(Q,T.aBatchColor)),_&&(ti(Q,T.uDash,!1),Vn(Q,T.aLineDistance))}}bs(Q,T)}},Dr=function(I,$,S){var b,Z,v,B,j,L,u,f,J,h,q,C=I.getGL(),x=I._prg,E=I._buffer,U=I._33O;if(!ws(U)){fg(I);for(b in U)if(Z=Jk[b]||ur,!(S&&!Z.transparent||!S&&Z.transparent)&&(v=U[b],$||!Z.transparentMask)){var d=S&&Z.autoSort!==!1&&(I._33Q||v.invalidate);if(v.invalidate?(v.invalidate=!1,yg(v,"vs"),yg(v,"ns"),yg(v,"cs"),yg(v,"rs"),yg(v,"ps"),yg(v,"bs"),yg(v,"uv")):$&&yg(v,"ps"),j=v.vs32,L=$?v.ps32:v.cs32,J=v.uv32,u=v.bs32,f=v.rs32,q=j.length/3,d&&(v.is=Fr(j,I.getEye())),q){B=Z.light,h=I.getTexture(Z.image),Mp(C,x,H,Z.light,Z.opacity,Z.reverseFlip,Z.reverseColor,Z.reverseCull),L?I._batchColorDisabled||(ti(C,x.uBatchColor,!0),Ak(C,x.aBatchColor),Eh(C,E.batchColor,L,x.aBatchColor,4)):ti(C,x.uDiffuse,Z.color);var z=u&&!I._batchBlendDisabled;z&&(ti(C,x.uBatchBlend,!0),Ak(C,x.aBatchBlend),Eh(C,E.batchBlend,u,x.aBatchBlend));var n=f&&!I._batchBrightnessDisabled;n&&(ti(C,x.uBatchBrightness,!0),Ak(C,x.aBatchBrightness),Eh(C,E.batchBrightness,f,x.aBatchBrightness,1)),J&&Zc(C,x,h,Z.discardSelectable,E.uv,J,Z.uvOffset,Z.uvScale),Eh(C,E.vs,j,x.aPosition),Eh(C,E.ns,v.ns32,x.aNormal),v.is?(fj(C,E.is,v.is),gn(C,0,q)):cc(C,0,q),J&&Jj(C,x,h),L&&!I._batchColorDisabled&&(ti(C,x.uBatchColor,!1),Vn(C,x.aBatchColor)),z&&(ti(C,x.uBatchBlend,!1),Vn(C,x.aBatchBlend)),n&&(ti(C,x.uBatchBrightness,!1),Vn(C,x.aBatchBrightness)),Md(C,x)}}}},Fr=function(Y,y){for(var h=Y.length/3,c=new Array(h),e=h/3,F=new Array(e),H=0;e>H;H++)F[H]=H;F.sort(function($,r){var W=9*$,I=[(Y[W]+Y[W+3]+2*Y[W+6])/4,(Y[W+1]+Y[W+4]+2*Y[W+7])/4,(Y[W+2]+Y[W+5]+2*Y[W+8])/4];W=9*r;var h=[(Y[W]+Y[W+3]+2*Y[W+6])/4,(Y[W+1]+Y[W+4]+2*Y[W+7])/4,(Y[W+2]+Y[W+5]+2*Y[W+8])/4],Z=Io(y,I)-Io(y,h);return Z>0?-1:0>Z?1:0});for(var H=0;e>H;H++){var E=3*H,K=3*F[H];c[E]=K,c[E+1]=K+1,c[E+2]=K+2}return new vj(c)},Hb=new Po([0,0,0,1,1,1,1,0]),vb=new Po([0,0,1,0,0,1,0,0,1,0,0,1]),Ym=new vj([0,1,2,2,3,0]),Yl=new Po([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),ec=new vj([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Qc=new Po([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),xi=new Po([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),zn=nr(Yl,ec),ii=(new Po([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new vj([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),Pj=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],wc=function(T,l,Q,f,e,z){z=z||16,T=T||16,l=l||0,Q=Q||T;var r,q,W,n,B,k,t,x,I=.5,y=[],J=[],a=C/T,V=G/z;for(r=0;z>r;r++)for(B=r+1,n=r*V,x=B*V,q=l;Q>q;q++)k=q+1,W=q*a,t=k*a,y.push(I*D(n)*L(W),I*L(n),-I*D(n)*D(W),I*D(x)*L(t),I*L(x),-I*D(x)*D(t),I*D(n)*L(t),I*L(n),-I*D(n)*D(t),I*D(n)*L(W),I*L(n),-I*D(n)*D(W),I*D(x)*L(W),I*L(x),-I*D(x)*D(W),I*D(x)*L(t),I*L(x),-I*D(x)*D(t)),J.push(q/T,r/z,k/T,B/z,k/T,r/z,q/T,r/z,q/T,B/z,k/T,B/z);if(f)for(W=l*a,r=0;z>r;r++)B=r+1,n=r*V,x=B*V,y.push(0,0,0,I*D(x)*L(W),I*L(x),-I*D(x)*D(W),I*D(n)*L(W),I*L(n),-I*D(n)*D(W)),J.push(0,.5,l/T,B/z,l/T,r/z);if(e)for(W=Q*a,r=0;z>r;r++)B=r+1,n=r*V,x=B*V,y.push(0,0,0,I*D(n)*L(W),I*L(n),-I*D(n)*D(W),I*D(x)*L(W),I*L(x),-I*D(x)*D(W)),J.push(1,.5,Q/T,r/z,Q/T,B/z);return{vs:y,uv:J}},$l=function(l,T,R){l=l||.17,T=T||12,R=R||18,0>l?l=0:l>.25&&(l=.25);var x,g,b,k,V,z,f,E=.5,$=[],i=[],M=[],p=C/R,t=C/T,j=E-l;for(g=0;T>=g;g++)for(k=-G+g*t,z=L(k),V=D(k),x=0;R>=x;x++)b=x*p,f=j+l*z,$.push(L(b)*f,V*l,-D(b)*f),i.push(x/R,1-g/T);for(g=0;T>g;g++){var N=g*(R+1),c=(g+1)*(R+1);for(x=0;R>x;x++)M.push(N+x,c+x+1,c+x,N+x,N+x+1,c+x+1)}return{vs:$,uv:i,is:M}},nh=function(a,u,M,o,i,Z,S){S=S||12,a=a||18,u=u||0,M=M||a,Z=Z||.17,0>Z?Z=0:Z>.25&&(Z=.25);var F,U,N,$,w,t,J,T,j,n,I=.5,r=[],y=[],E=C/a,c=C/S,Y=I-Z;for(N=0;S>N;N++)for($=N+1,J=-G+N*c,T=-G+$*c,F=u;M>F;F++)U=F+1,w=F*E,t=U*E,j=Y+Z*L(J),n=Y+Z*L(T),r.push(L(w)*j,D(J)*Z,-D(w)*j,L(t)*j,D(J)*Z,-D(t)*j,L(t)*n,D(T)*Z,-D(t)*n,L(w)*j,D(J)*Z,-D(w)*j,L(t)*n,D(T)*Z,-D(t)*n,L(w)*n,D(T)*Z,-D(w)*n),y.push(F/a,1-N/S,U/a,1-N/S,U/a,1-$/S,F/a,1-N/S,U/a,1-$/S,F/a,1-$/S);
if(o){var s=[],f=[];for(N=0;S>N;N++)$=N+1,J=-G+N*c,T=-G+$*c,w=u*E,j=Y+Z*L(J),n=Y+Z*L(T),s.push(L(w)*j,D(J)*Z,-D(w)*j,L(w)*n,D(T)*Z,-D(w)*n,L(w)*Y,0,-D(w)*Y),f.push(.5+.5*L(J),.5-.5*D(J),.5+.5*L(T),.5-.5*D(T),.5,.5)}if(i){var b=[],l=[];for(N=0;S>N;N++)$=N+1,J=-G+N*c,T=-G+$*c,w=M*E,j=Y+Z*L(J),n=Y+Z*L(T),b.push(L(w)*j,D(J)*Z,-D(w)*j,L(w)*Y,0,-D(w)*Y,L(w)*n,D(T)*Z,-D(w)*n),l.push(.5-.5*L(J),.5-.5*D(J),.5,.5,.5-.5*L(T),.5-.5*D(T))}return{vs:r,uv:y,from_vs:s,from_uv:f,to_vs:b,to_uv:l}},Zm=function(E,n){for(var u,f,Q,J=.5,e=16,m=[],z=[],W=[],X=C/e,I=0;e>=I;I++)u=I*X,f=L(u)*J,Q=D(u)*J,m.push(f,-J,Q,f,J,Q),z.push(1-I/e,1,1-I/e,0);for(I=0;e>I;I++)W.push(2*I,2*I+1,2*I+3,2*I,2*I+3,2*I+2);if(n){var o=[],i=[],H=[];for(o.push(0,-J,0),i.push(.5,.5),I=0;e>=I;I++)u=I*X,f=L(u),Q=D(u),o.push(f*J,-J,-Q*J),i.push(.5+.5*f,.5+.5*Q);for(I=0;e>I;I++)H.push(0,I+2,I+1)}if(E){var j=[],Z=[],l=[];for(j.push(0,J,0),Z.push(.5,.5),I=0;e>=I;I++)u=I*X,f=L(u),Q=D(u),j.push(f*J,J,-Q*J),Z.push(.5+.5*f,.5-.5*Q);for(I=0;e>I;I++)l.push(0,I+1,I+2)}return{vs:m,uv:z,is:W,bottom_vs:o,bottom_uv:i,bottom_is:H,top_vs:j,top_uv:Z,top_is:l}},zp=function(B,u,l,Y,g,y,z){B=B||12,u=u||0,l=l||B;for(var h,T,J,c,$,X,O,S,q=.5,f=[],n=[],E=C/B,i=u;l>i;i++)h=i+1,T=i*E,J=h*E,c=L(T)*q,$=D(T)*q,X=L(J)*q,O=D(J)*q,f.push(c,-q,-$,X,-q,-O,c,q,-$,X,-q,-O,X,q,-O,c,q,-$),n.push(i/B,1,h/B,1,i/B,0,h/B,1,h/B,0,i/B,0);if(z){var s=[],p=[];for(i=u;l>i;i++)T=E*i,J=E*(i+1),c=L(T),$=D(T),X=L(J),O=D(J),s.push(c*q,-q,-$*q,0,-q,0,X*q,-q,-O*q),p.push(.5+.5*c,.5+.5*$,.5,.5,.5+.5*X,.5+.5*O)}if(y){var H=[],P=[];for(i=u;l>i;i++)T=E*i,J=E*(i+1),c=L(T),$=D(T),X=L(J),O=D(J),H.push(c*q,q,-$*q,X*q,q,-O*q,0,q,0),P.push(.5+.5*c,.5-.5*$,.5+.5*X,.5-.5*O,.5,.5)}return Y&&(T=E*u,c=L(T)*q,$=D(T)*q,S=u/B,f.push(0,q,0,0,-q,0,c,-q,-$,c,-q,-$,c,q,-$,0,q,0),n.push(0,0,0,1,S,1,S,1,S,0,0,0)),g&&(T=E*l,c=L(T)*q,$=D(T)*q,S=l/B,f.push(0,-q,0,0,q,0,c,q,-$,c,q,-$,c,-q,-$,0,-q,0),n.push(1,1,1,0,S,0,S,0,S,1,1,1)),{vs:f,uv:n,bottom_vs:s,bottom_uv:p,top_vs:H,top_uv:P}},th=function(x,m,M,O,r){m=m||18,M=M||0,O=O==H?C:O,r=r==H?.5:r;for(var S,b,j,W,X,Z,F=[0,.5,.75,.875,.9375],T=[],e=[],Y=[],s=O/m,z=0;z<F.length;z++){var E=0===z%2?0:.5;for(S=0;m>=S;S++)b=(S+E)*s+M,j=1-F[z],T.push(L(b)*r*j,-r+2*F[z]*r,-D(b)*r*j),e.push((S+E)/m,j)}for(z=0;z<F.length-1;z++){var d=z*(m+1),q=(z+1)*(m+1);for(S=0;m>S;S++)Y.push(d+S,q+S+1,q+S,d+S,d+S+1,q+S+1)}for(Z=T.length/3-(m+1),S=0;m>S;S++)T.push(0,r,0),e.push((S+.5)/m,0);for(S=0;m>S;S++)Y.push(Z+S,Z+S+1,Z+(m+1)+S);if(x){var i=[],N=[],h=[];for(i.push(0,-r,0),N.push(.5,.5),S=0;m>=S;S++)b=S*s+M,W=L(b),X=D(b),i.push(W*r,-r,-X*r),N.push(.5+.5*W,.5+.5*X);for(S=0;m>S;S++)h.push(0,S+2,S+1)}return{vs:T,uv:e,is:Y,bottom_vs:i,bottom_uv:N,bottom_is:h}},ls=function(K,I,d,z,B,u){K=K||16,I=I||0,d=d||K;for(var H=.5,Z=[],k=[],N=C/K,G=I;d>G;G++){var R=G+1,P=N*G,w=N*R;Z.push(L(P)*H,-H,-D(P)*H,L(w)*H,-H,-D(w)*H,0,H,0),k.push(G/K,1,R/K,1,(G+R)/2/K,0)}if(u){var T=[],Q=[];for(G=I;d>G;G++){P=N*G,w=N*(G+1);var F=L(P),W=D(P),E=L(w),f=D(w);T.push(F*H,-H,-W*H,0,-H,0,E*H,-H,-f*H),Q.push(.5+.5*F,.5+.5*W,.5,.5,.5+.5*E,.5+.5*f)}}return z&&(P=N*I,Z.push(0,H,0,0,-H,0,L(P)*H,-H,-D(P)*H),k.push(0,0,0,1,I/K,1)),B&&(P=N*d,Z.push(0,-H,0,0,H,0,L(P)*H,-H,-D(P)*H),k.push(1,1,1,0,d/K,1)),{vs:Z,uv:k,bottom_vs:T,bottom_uv:Q}},kg=function(j,Y,M,B,h,q,g,y){for(var H=[],Q=0;Q<j.length-1;Q+=2)H.push({x:j[Q],y:j[Q+1]});return tj(H,Y,M,B,h,q,g,y,!1)},Rr={roundRect:function(K,h){return kg([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],K,h,3)},star:function(p,b){return kg([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],p,b)},rect:function(H,a){return kg([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],H,a)},triangle:function(_,d){return kg([0,-.5,.5,.5,-.5,.5],[1,2,2,5],_,d)},rightTriangle:function(U,c){return kg([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],U,c)},parallelogram:function(R,j){return kg([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],R,j)},trapezoid:function(c,d){return kg([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],c,d)}},nk={sphere:1,cylinder:1,cone:1,torus:1},on={torus:1,sphere:1},hc=hq(ef(Rr),{cylinder:1}),sk=hq(ef(Rr),{cylinder:1,cone:1}),Hj=function(c,a,e){var u,V=wo(c.mat,e,a),t=wo(c.s3,e,a),o=wo(c.t3,e,a),r=wo(c.r3,e,a);return(t||r||o||V)&&(u=lm(a._6O),fg(a,xm(V,t,r,wo(c.rotationMode,e,a),o))),u},Vh=function(f,u,D,$,I,X,V){if(ro(D))D.forEach(function(N){Vh(f,u,N,$,I,X,V)});else if(Kf(D))Vh(f,u,lr($,D),$,I,X,V);else if(Gb(D))if(D.shape3d){var e=Hj(D,f,u);Vh(f,u,D.shape3d,$,I,X,D),e&&dr(f,e)}else ol(f,u,D,$,I,X,V)},ol=function(v,t,E,G,C,A,I){if(I=I||ur,!A||A(G("shape3d.transparent",E.transparent,I.transparent))){var l=Hj(E,v,t);wf(E);var Z=v._26I,T=v._prg,L=v._buffer,q=G("shape3d.color",E.color,I.color);C||(C=G("shape3d.blend",E.blend,I.blend)),Mp(Z,T,C,G("shape3d.light",E.light,I.light),G("shape3d.opacity",E.opacity,I.opacity),G("shape3d.reverse.flip",E.reverseFlip,I.reverseFlip),G("shape3d.reverse.color",E.reverseColor,I.reverseColor),G("shape3d.reverse.cull",E.reverseCull,I.reverseCull)),E.vs&&G(_c,E.visible,I.visible)&&hi(Z,T,L,q,v.getTexture(G("shape3d.image",E.image,I.image),t),G("shape3d.discard.selectable",E.discardSelectable,I.discardSelectable),E.vs,E.uv,E.ns,E.is,G("shape3d.uv.offset",E.uvOffset,I.uvOffset),G("shape3d.uv.scale",E.uvScale,I.uvScale)),E.top_vs&&G(wr,E.topVisible,I.topVisible)&&hi(Z,T,L,G("shape3d.top.color",E.topColor,I.topColor)||q,v.getTexture(G("shape3d.top.image",E.topImage,I.topImage),t),G("shape3d.top.discard.selectable",E.topDiscardSelectable,I.topDiscardSelectable),E.top_vs,E.top_uv,E.top_ns,E.top_is,G("shape3d.top.uv.offset",E.topUvOffset,I.topUvOffset),G("shape3d.top.uv.scale",E.topUvScale,I.topUvScale)),E.bottom_vs&&G(nj,E.bottomVisible,I.bottomVisible)&&hi(Z,T,L,G("shape3d.bottom.color",E.bottomColor,I.bottomColor)||q,v.getTexture(G("shape3d.bottom.image",E.bottomImage,I.bottomImage),t),G("shape3d.bottom.discard.selectable",E.bottomDiscardSelectable,I.bottomDiscardSelectable),E.bottom_vs,E.bottom_uv,E.bottom_ns,E.bottom_is,G("shape3d.bottom.uv.offset",E.bottomUvOffset,I.bottomUvOffset),G("shape3d.bottom.uv.scale",E.bottomUvScale,I.bottomUvScale)),E.from_vs&&G(be,E.fromVisible,I.fromVisible)&&hi(Z,T,L,G("shape3d.from.color",E.fromColor,I.fromColor)||q,v.getTexture(G("shape3d.from.image",E.fromImage,I.fromImage),t),G("shape3d.from.discard.selectable",E.fromDiscardSelectable,I.fromDiscardSelectable),E.from_vs,E.from_uv,E.from_ns,E.from_is,G("shape3d.from.uv.offset",E.fromUvOffset,I.fromUvOffset),G("shape3d.from.uv.scale",E.fromUvScale,I.fromUvScale)),E.to_vs&&G(ug,E.toVisible,I.toVisible)&&hi(Z,T,L,G("shape3d.to.color",E.toColor,I.toColor)||q,v.getTexture(G("shape3d.to.image",E.toImage,I.toImage),t),G("shape3d.to.discard.selectable",E.toDiscardSelectable,I.toDiscardSelectable),E.to_vs,E.to_uv,E.to_ns,E.to_is,G("shape3d.to.uv.offset",E.toUvOffset,I.toUvOffset),G("shape3d.to.uv.scale",E.toUvScale,I.toUvScale)),Md(Z,T),l&&dr(v,l)}},hi=function(l,M,W,Q,w,i,F,V,K,E,s,h){F&&(ti(l,M.uDiffuse,Q),V&&Zc(l,M,w,i,W.uv,V,s,h),Eh(l,W.vs,F,M.aPosition),Eh(l,W.ns,K,M.aNormal),E?(fj(l,W.is,E),gn(l,0,E.length)):cc(l,0,F.length/3),V&&Jj(l,M,w))},lr=function(S,J){if(J||(J=S(pi)),!J)return H;if(Gb(J))return J;var D=Fk[J];if(D)return D;var b=J;if(nk[J]){var K=S("shape3d.side"),E=S("shape3d.side.from"),x=S("shape3d.side.to"),n=S(be),N=S(ug);3>K?(K=0,E=0,x=0,n=!1,N=!1):((E==H||0>E)&&(E=0),(x==H||x>K)&&(x=K),0===E&&x===K&&(n=!1,N=!1)),b+="-"+K+"-"+E+"-"+x+"-"+n+"-"+N}if(hc[J]){var R=S(wr);b+="-"+R}if(sk[J]){var Y=S(nj);b+="-"+Y}if("torus"===J){var _=S("shape3d.torus.radius");0>_?_=0:_>.25&&(_=.25),b+="-"+_}if(on[J]){var c=S($c);b+="-"+c}return D=ff[b],D||("box"===J?D=e.createBoxModel():Rr[J]?D=Rr[J](R,Y):"sphere"===J?D=e.createSphereModel(K,E,x,n,N,c):J===gq?D=e.createCylinderModel(K,E,x,n,N,R,Y):"cone"===J?D=e.createConeModel(K,E,x,n,N,Y):"torus"===J&&(D=e.createTorusModel(K,E,x,n,N,_,c)),ff[b]=D),D},wf=function(){var K=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],B=["is","top_is","bottom_is","from_is","to_is"];return o=ip(eq.substr(eq.indexOf("^#")+2)),xq(e[Gc(Tj+K[15]+"n"+K[16])]())&&rj()?function(t){t&&!t._complete_&&(t._complete_=!0,t.vs&&xf(t.ns)&&(t.ns=nr(t.vs,t.is)),t.top_vs&&xf(t.top_ns)&&(t.top_ns=nr(t.top_vs,t.top_is)),t.bottom_vs&&xf(t.bottom_ns)&&(t.bottom_ns=nr(t.bottom_vs,t.bottom_is)),t.from_vs&&xf(t.from_ns)&&(t.from_ns=nr(t.from_vs,t.from_is)),t.to_vs&&xf(t.to_ns)&&(t.to_ns=nr(t.to_vs,t.to_is)),K.forEach(function(g){var u=t[g];ro(u)&&(t[g]=new Po(u))}),B.forEach(function(A){var q=t[A];ro(q)&&(t[A]=new vj(q))}))}:void 0}(),Xk=function(N,F){var J=N[F];ro(J)&&(N[F]=new Po(J))};hq(ze,{_25Q:function(P){P._16O=function(G,h,s,z,W,v,o,R,Y){var V=this.info;if(V){var k,O,$,_,c,F,t=Gk();if(Nc[h]?(k=V.p3,O=V.c1,$=V.c2):Id[h]?(O=V.s1||V.c1,$=V.s2||V.c2):(O=V.t1||V.c1,$=V.t2||V.c2),k)F=Al(h,Op,s,z,R,Y);else{var j=Wg($,O),N=Io(O,$);_=[0,-l(j[2],j[0]),w(j[1]/N)],c="zyx",k=[(O[0]+$[0])/2,(O[1]+$[1])/2,(O[2]+$[2])/2],F=Al(h,[N,0,0],s,z,R,Y)}return Fj(t,F,k,z,W,v,o,G,_,c)}return Xq},P._80o=function(h,b,f){var V=this,O=V.shapeModel;if(O){var k=V.gv;fg(k),Vh(k,V.data,O,V.s,V.getBodyColor(),f)}},P.createLineModel=function(e,w,r,h,u){for(var c=this,P=c.s,m=zf(e,w,P($c)),E=[],W=0;W<m.length;W++){var b=m[W],L=b.length;if(L>1){var A=b[0];E.push(A.x,A.y,A.z);for(var C=1;L-1>C;C++)A=b[C],E.push(A.x,A.y,A.z),E.push(A.x,A.y,A.z);A=b[L-1],E.push(A.x,A.y,A.z)}}var S,v,F,B=P(h+".color"),y=P(u),G=0;return y&&(v=P(u+".color"),S=P(u+".pattern"),G=P(u+".offset"),F=B),An(c.gv,c.data,E,v||B,F?H:P(h+".gradient.color"),r,S||P(h+".pattern"),G,F),m},P.createTubeModel=function(k,K,B,G){for(var N=this,h=N.s,l=h("shape3d.side")||gl,g=h("shape3d.start.angle"),M=h(wr)?h("shape3d.top.cap"):H,O=h(nj)?h("shape3d.bottom.cap"):H,x="flat"===M,b="flat"===O,$=x&&(G?G.uv:h("shape3d.top.image")),q=b&&(G?G.uv:h("shape3d.bottom.image")),z=G?G.uv:h("shape3d.image"),F={vs:[],uv:z?[]:H,top_vs:x?[]:H,top_uv:$?[]:H,bottom_vs:b?[]:H,bottom_uv:q?[]:H},c=zf(k,K,h($c),B),X=0,v=c.length;v>X;X++)wq(F,c[X],h(Bn),B,l,g,M,O);if(G){var m=[];qb(N.gv,N.data,F,h,N.getBodyColor(),[],G,m),m.length&&(Sj(G.vs,m),Sj(G.ns,nr(m)))}else N.shapeModel=F;return c},P.getCache=function(){var v=this.info;if(v){var A=v.list;if(A){var d=v.cache;return d||(d=v.cache=tn(A)),d}}return H}}});var Nj=function(g,A){for(var V,m=0,a=g.length,Y=0,c=a-1;c>=Y;)if(m=p(Y+(c-Y)/2),V=g[m].length-A,0>V)Y=m+1;else{if(!(V>0)){c=m;break}c=m-1}m=c;var z=g[m],k=z.point;return m===a-1||z.length===A||(k=(new is).subVectors(g[m+1].point,k).normalize().multiplyScalar(A-z.length).add(k)),{point:k,tangent:z.tangent}},tn=function(X){for(var Y,S,O=[],h=0,g=0;g<X.length;g++){for(var t=X[g],I=0;I<t.length;I++){Y=t[I],S&&(h+=S.distanceTo(Y));var x=new is,K=t[I+1];K?x.subVectors(K,Y):S?x.subVectors(Y,S):x.x=1,x.normalize(),O.push({point:Y,length:h,tangent:x}),S=Y}S=null}return O},zf=function(v,J,e,B){e=e||rm;for(var o=[],n=0,C=v.size();C>n;n++){var V=v.get(n);o.push(new is(V.x,V.e||0,V.y))}Hq(J)&&(J=J._as);for(var q,k,j,l,g,A=[],x=0,r=0,Y=J?J.length:C;Y>r;r++)if(g=J?J[r]:0===r?1:2,1===g)A.push(j=[]),j.push(o[x++]);else if(2===g||5===g)if(l=2===g?o[x++]:j[0],B){var b=J?J[r+1]:Y>r+1?2:H;if(2===b||5===b){var s=j[j.length-1],L=2===b?o[x]:j[0],D=(new is).subVectors(s,l),S=(new is).subVectors(L,l),E=D.length(),z=S.length();if(B>E/2&&B>z/2)j.push(l);else for(D.multiplyScalar(P(B,E/2)/E).add(l),S.multiplyScalar(P(B,z/2)/z).add(l),q=new Aq(D,l,S).getPoints(e),k=0;e>=k;k++)j.push(q[k])}else j.push(l)}else j.push(l);else if(3===g)for(q=new Aq(j[j.length-1],o[x++],o[x++]).getPoints(e),k=1;e>=k;k++)j.push(q[k]);else if(4===g)for(q=new jg(j[j.length-1],o[x++],o[x++],o[x++]).getPoints(e),k=1;e>=k;k++)j.push(q[k]);return A},Fl=function(y){for(var $,n,A=new is,x=[],X=[],c=[],G=0,d=y.length;d>G;G++)$=y[G],n=y[G+1],n?A.subVectors(n,$):A.subVectors($,y[G-1]),x.push(A.normalize().clone());var l,f,g,K,w=new is,_=new is,J=new Bo,h=1e-4,Q=Number.MAX_VALUE,q=x[0],Z=X[0]=new is,M=c[0]=new is;for(f=t(q.x),g=t(q.y),K=t(q.z),Q>=f&&(Q=f,w.set(1,0,0)),Q>=g&&(Q=g,w.set(0,1,0)),Q>=K&&w.set(0,0,1),_.crossVectors(q,w).normalize(),Z.crossVectors(q,_),M.crossVectors(q,Z),G=1;d>G;G++)X[G]=X[G-1].clone(),c[G]=c[G-1].clone(),_.crossVectors(x[G-1],x[G]),_.length()>h&&(_.normalize(),l=I(Wl(x[G-1].dot(x[G]),-1,1)),X[G].applyMatrix4(J.makeRotationAxis(_,l))),c[G].crossVectors(x[G],X[G]);return{B:c,T:x,N:X}},wq=function(){var _=function(H){for(var T=1;T<arguments.length;T++){var x=arguments[T];H.push(x.x,x.y,x.z)}},m=function(h){for(var Z=1;Z<arguments.length;Z++){var m=arguments[Z].uv;h.push(m[0],m[1])}},B=function(T,u,p,Q,B){var q=-Q*L(B),b=Q*D(B);return new is(T.x+q*p.x+b*u.x,T.y+q*p.y+b*u.y,T.z+q*p.z+b*u.z)},A=function(l,j,v,J,S,D,f){for(var g=[],r=C/S,Y=0;S>=Y;Y++){var P=B(l,j,v,J,Y*r+D);g.push(P),f!=H&&(P.uv=[f,Y/S])}return g},w=function(a,s,Z,d,M,V,R,o){var v=s?a.top_vs:a.bottom_vs;if(v)for(var e=s?a.top_uv:a.bottom_uv,c=C/R,b=0;R>b;b++){var t,I;s?(t=b*c+o,I=(b+1)*c+o):(I=b*c+o,t=(b+1)*c+o),_(v,B(Z,d,M,V,t),B(Z,d,M,V,I),Z),e&&e.push(.5-.5*L(t),.5-.5*D(t),.5-.5*L(I),.5-.5*D(I),.5,.5)}};return function(J,B,$,j,p,z,X,f){var G=B.length;if(G>1){var U,q,Q,h,Y,D,T,P=Fl(B),S=P.T,F=P.N,o=P.B;"flat"===X&&w(J,!0,B[0],o[0],F[0],j,p,z),"flat"===f&&w(J,!1,B[G-1],o[G-1],F[G-1],j,p,z);var t,W,s=[],r=v(p/2),c="round"===X,n="round"===f,E=B[0],l=S[0],N=o[0],R=F[0],y=B[G-1],k=S[G-1],K=o[G-1],d=F[G-1];if(c){for(Q=1;r>=Q;Q++)F.splice(0,0,R),o.splice(0,0,N),S.splice(0,0,l),W=-Q/r*j,B.splice(0,0,l.clone().multiplyScalar(W).add(E)),s[r-Q]=a(j*j-W*W);G+=r}if(n){for(Q=1;r>=Q;Q++)F.push(d),o.push(K),S.push(k),W=Q/r*j,B.push(k.clone().multiplyScalar(W).add(y)),s[B.length-1]=a(j*j-W*W);G+=r}if(J.uv){var V=0,i=0,M=[];for($&&(V=$),Y=B[0],M[0]=0,Q=1;G>Q;Q++)h=B[Q],M[Q]=Y.distanceTo(h),Y=h,$||(V+=M[Q]);for(t=[],Q=0;G>Q;Q++)i+=M[Q],t[Q]=V?i/V:0}for(Q=0;G>Q;Q++){if(h=B[Q],D=o[Q],T=F[Q],U=A(h,D,T,s[Q]===x?j:s[Q],p,z,t?t[Q]:H),q)for(var C=0;p>C;C++){var e=q[C],I=q[C+1]||q[0],u=U[C],O=U[C+1]||U[0];_(J.vs,I,e,u,u,O,I),J.uv&&m(J.uv,I,e,u,u,O,I)}q=U}}}}();hq(e,{getLineLength:function(m){return m[m.length-1].length},getLineOffset:function(B,y){return Nj(B,y)},getLineCacheInfo:function(H,Z,V,C){return tn(zf(H,Z,V,C))}});var _o=j.Light=function(){yi(_o,this),this.s(Yq,g[Yq]),this.s(pi,"sphere"),this.s3(20,20,20)};Ae("Light",qj,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(Z,R,w){_o.superClass.onStyleChanged.apply(this,arguments),Z===Yq&&this.s("shape3d.color",w)}});var Mr=Ng.Graph3dView=function(E,Q){var u=this;u._attributes=Q||e.graph3dViewAttributes,u._25I={},u._view=Vb(1);var x=u._canvas=Lm(u._view);x.addEventListener("webglcontextlost",function(a){a.preventDefault(),Yc(u),u._26I=H,u._1o.texture=H,u._35O=!0},!1),x.addEventListener("webglcontextrestored",function(){u._35O=!1,u.iv()},!1),u._34O={},u._33O={},u._wireframeIndexMap={},u._wireframeModelMap={},u._polylineIndexMap={},u._polylineIndexMap={},u._8O=[],u._7O=Gk(),u._6O=Gk(),u._1o=new up(u),u._30O=new cf(u),u._31O=new cb(u),u._32O=new No(u),u._33Q=!0,u._eye=ef(e.graph3dViewEye),u._center=ef(e.graph3dViewCenter),u._up=ef(e.graph3dViewUp),u._lightChanged=!1,u._59O=[],u._spots=[],u._dirs=[],u.dm(E?E:new hr),u.setInteractors([new Gq(u)])},Hg={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};yn("Graph3dView",O,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",Sr,Ee,"firstPersonMode",gf,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",qs,as,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:x,_boundaries:x,_moveStep:e.graph3dViewMoveStep,_rotateStep:e.graph3dViewRotateStep,_pannable:e.graph3dViewPannable,_rotatable:e.graph3dViewRotatable,_walkable:e.graph3dViewWalkable,_resettable:e.graph3dViewResettable,_zoomable:e.graph3dViewZoomable,_firstPersonMode:e.graph3dViewFirstPersonMode,_mouseRoamable:e.graph3dViewMouseRoamable,_gridVisible:e.graph3dViewGridVisible,_gridSize:e.graph3dViewGridSize,_gridGap:e.graph3dViewGridGap,_gridColor:e.graph3dViewGridColor,_originAxisVisible:e.graph3dViewOriginAxisVisible,_centerAxisVisible:e.graph3dViewCenterAxisVisible,_axisXColor:e.graph3dViewAxisXColor,_axisYColor:e.graph3dViewAxisYColor,_axisZColor:e.graph3dViewAxisZColor,_ortho:e.graph3dViewOrtho,_orthoWidth:e.graph3dViewOrthoWidth,_fovy:e.graph3dViewFovy,_near:e.graph3dViewNear,_far:e.graph3dViewFar,_headlightColor:e.graph3dViewHeadlightColor,_headlightIntensity:e.graph3dViewHeadlightIntensity,_headlightRange:e.graph3dViewHeadlightRange,_headlightDisabled:e.graph3dViewHeadlightDisabled,_rectSelectable:e.graph3dViewRectSelectable,_rectSelectBackground:e.graph3dViewRectSelectBackground,_editSizeColor:e.graph3dViewEditSizeColor,_autoMakeVisible:Nr,_fogDisabled:e.graph3dViewFogDisabled,_fogColor:e.graph3dViewFogColor,_fogNear:e.graph3dViewFogNear,_fogFar:e.graph3dViewFogFar,_dashDisabled:e.graph3dViewDashDisabled,_batchColorDisabled:e.graph3dViewBatchColorDisabled,_batchBlendDisabled:e.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:e.graph3dViewBatchBrightnessDisabled,setEye:function(i,Y,o){1===arguments.length&&(Y=i[1],o=i[2],i=i[0]);var u=this._eye;u[0]=i,u[1]=Y,u[2]=o,this.fp(qs,H,u)},setCenter:function(L,O,F){1===arguments.length&&(O=L[1],F=L[2],L=L[0]);var V=this._center;V[0]=L,V[1]=O,V[2]=F,this.fp(as,H,V)},setUp:function(y,g,B){1===arguments.length&&(g=y[1],B=y[2],y=y[0]);var b=this._up;b[0]=y,b[1]=g,b[2]=B,this.fp("up",H,b)},isTransparentMask:function(a){return a.s("transparent.mask")},getAspect:function(){var q=this,A=q._aspect;return A?A:q.getWidth()/q.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(p){var a=this,h=a._dataModel,$=a._3o;h!==p&&(h&&(h.umm(a.handleDataModelChange,a),h.umd(a.handleDataPropertyChange,a),$||h.sm().ums(a._16o,a)),a._dataModel=p,p.mm(a.handleDataModelChange,a),p.md(a.handleDataPropertyChange,a),$?$._21I(p):p.sm().ms(a._16o,a),a.invalidateAll(!0),a.invalidateLight(),a.fp(pn,h,p))},handleDataPropertyChange:function(Z){var $=Z.data;this.invalidateData($),Sp($)&&"s:light.type"===Z.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(h){var P=this,X=h.property;P.iv(),P._18Q=H,"eye"===X?P._33Q=!0:"devicePixelRatio"===X?P._42(H,P._devicePixelRatio||Xe):Hg[X]&&Yc(P)},_5O:function(p){var l=p._22Q();return l?new l(this,p):H},getData3dUI:function(Y){var $=this._25I[Y._id];return $===x&&($=this._5O(Y),this._25I[Y._id]=$),$},invalidateAll:function(B){var f=this;if(B){for(var W in f._25I){var x=f._25I[W];x&&x.dispose()}f._25I={},f.iv(),er(f)}else f.dm().each(function(i){f.invalidateData(i)})},invalidateSelection:function(){var N=this;N.sm().each(function(t){N.invalidateData(t)})},invalidateData:function(I){var s=this,i=s.getData3dUI(I);i&&(i.iv(),s.iv()),er(s,I)},invalidateBatch:function(z){var O=this,I=O._33O,$=I[z];$&&($.ds.forEach(function(t){var M=O.getData3dUI(t);M&&M.iv(),delete O._34O[t._id]}),delete I[z],O.iv())},handleDataModelChange:function(W){var t=this,s=W.kind,F=W.data;if("add"===s)t.invalidateData(F),dl(F)&&F.getEdgeGroup()&&F.getEdgeGroup().eachSiblingEdge(t.invalidateData,t),Sp(F)&&t.invalidateLight();else if(s===Sq){var J=F._id,m=t._25I[J];m&&(m.dispose(),delete t._25I[J],t.iv()),F===t._currentSubGraph&&t.setCurrentSubGraph(H),er(t,F),Sp(F)&&t.invalidateLight()}else s===In&&(t.invalidateAll(!0),t.setCurrentSubGraph(H),er(t),t.invalidateLight())},toCanvas:function(I){var S=this,A=S.getGL();if(S.validate(),I){var q=A.getParameter(A.COLOR_CLEAR_VALUE);Sb(A,I)}S._42(H,1);var e=S.getWidth(),r=S.getHeight(),O=new Uint8Array(4*e*r),Z=Lm(),E=Z.getContext("2d");A.readPixels(0,0,e,r,A.RGBA,A.UNSIGNED_BYTE,O),Fe(Z,e,r,1);for(var V=E.getImageData(0,0,e,r),m=V.data,s=0;s<m.length;s+=4){var N=s/4,$=p(N/e),F=N-$*e;N=4*((r-1-$)*e+F),m[N]=O[s],m[N+1]=O[s+1],m[N+2]=O[s+2],m[N+3]=O[s+3]}return E.putImageData(V,0,0),I&&Sb(A,q),S._42(H,S._devicePixelRatio||Xe),Z},toDataURL:function(W,h){var i=this,X=i.getGL();if(i.validate(),W){var u=X.getParameter(X.COLOR_CLEAR_VALUE);Sb(X,W)}i._42(H,1);var v=i._canvas.toDataURL(h||"image/png",1);return W&&Sb(X,u),i._42(H,i._devicePixelRatio||Xe),v},getGL:function(){var b=this,D=b._26I,s=b._prg;if(!D)try{b._2O={},D=b._26I=b._canvas.getContext("webgl",b._attributes)||b._canvas.getContext("experimental-webgl",b._attributes),b._buffer={vs:To(D),ns:To(D),is:To(D),uv:To(D),batchColor:To(D),batchBlend:To(D),batchBrightness:To(D),lineDistance:To(D)},b._1O=Bc(D);var c=b._cube={vs:To(D),ns:To(D),is:To(D),uv:To(D)};Eh(D,c.vs,Yl),Eh(D,c.ns,zn),Eh(D,c.uv,Qc),fj(D,c.is,ec)}catch(S){}if(D&&!s){if(s=b._prg=D.createProgram(),!s)return H;var K=b._dirs.length,v=b._spots.length,Y=b._59O.length,P=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];K&&P.push("uDirColor","uDirPosition"),v&&P.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),Y&&P.push("uPointColor","uPointRange","uPointPosition"),Sb(D,[0,0,0,0]),D.clearDepth(1),D.enable(D.DEPTH_TEST),D.depthFunc(D.LEQUAL),D.enable(D.BLEND),D.blendFunc(D.SRC_ALPHA,D.ONE_MINUS_SRC_ALPHA),Xp||(eq=ip(eq.substring(0,eq.indexOf("^#"))),bc=ip(bc),Xp=!0);var M=["#define MAX_DIR "+K,"#define MAX_SPOT "+v,"#define MAX_POINT "+Y,b._fogDisabled?"":"#define FOG",b._dashDisabled?"":"#define DASH",b._batchColorDisabled?"":"#define BATCHCOLOR",b._batchBlendDisabled?"":"#define BATCHBLEND",b._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),N=aj(D,s,D.VERTEX_SHADER,eq.replace("PREFIX",M)),V=aj(D,s,D.FRAGMENT_SHADER,bc.replace("PREFIX",M));Z?P.push("aPosition"):(s.aPosition=0,D.bindAttribLocation(s,0,"aPosition")),D.linkProgram(s),P.forEach(function(Q){s[Q]=/^u/.test(Q)?D.getUniformLocation(s,Q):D.getAttribLocation(s,Q)}),D.useProgram(s),D.deleteShader(N),D.deleteShader(V)}return D},getBrightness:function(_){var R=_.s("brightness"),p=this.isSelected(_)?_.s("select.brightness"):H;return R==H?p:p==H?R:R*p},getWireframe:function(v){var O=v.s("wf.visible");return O===!0||"selected"===O&&this.isSelected(v)?{color:v.s("wf.color"),width:v.s("wf.width"),"short":v.s("wf.short"),mat:v.s("wf.mat")}:void 0},getBodyColor:function(V){return V.s("body.color")},getMat:function(O){return O.getMat?O.getMat():O.s("mat")},getFaceMat:function(U,N){return U.getFaceMat?U.getFaceMat(N):U.s(N+".mat")},getFaceBlend:function(Z,r){return Z.s(r+".blend")||Z.s("all.blend")},getFaceColor:function(c,T){return c.s(T+".color")||c.s("all.color")},getFaceImage:function(n,C){return n.s(C+".image")||n.s("all.image")},getFaceDiscardSelectable:function(j,E){var U=j.s(E+".discard.selectable");return U==H?j.s("all.discard.selectable"):U},getFaceUv:function(p,V){return p.s(V+".uv")||p.s("all.uv")},getFaceUvOffset:function(r,m){return r.s(m+".uv.offset")||r.s("all.uv.offset")},getFaceUvScale:function(R,W){return R.s(W+".uv.scale")||R.s("all.uv.scale")},getFaceLight:function(t,$){var Q=t.s($+".light");return Q==H?t.s("all.light"):Q},getFaceVisible:function(V,u){var n=V.s(u+".visible");return n==H?V.s("all.visible"):n},getFaceOpacity:function(e,P){var i=e.s(P+".opacity");return i==H?e.s("all.opacity"):i},getFaceTransparent:function(T,n){var s=T.s(n+".transparent");return s==H?T.s("all.transparent"):s},getFaceReverseColor:function(r,D){return r.s(D+".reverse.color")||r.s("all.reverse.color")},getFaceReverseFlip:function(F,A){var s=F.s(A+".reverse.flip");return s==H?F.s("all.reverse.flip"):s},getFaceReverseCull:function(C,L){var Q=C.s(L+".reverse.cull");return Q==H?C.s("all.reverse.cull"):Q},getTextureMap:function(){return this._2O},deleteTexture:function(Q){var q=this,Y=q._2O[Q];Y&&(delete q._2O[Q],q.getGL().deleteTexture(Y))},getTexture:function(X,p){if(!X)return H;var m=this,j=m.getGL(),E=m._2O[X];if(!E){var V=Dp(X);if(V)if(V.tagName){if(V.dynamic)return Bc(j,V,m._1O);E=m._2O[X]=Bc(j,V)}else{var f=Dn(V,p),s=Kc(V,p);if(f>=1&&s>=1){var c=Bq(f,s);return Xj(c,V,0,0,f,s,p,m),c.restore(),Bc(j,mf,m._1O)}}}return E},redraw:function(){this.iv()},validateImpl:function(){var c=this;if(c._lightChanged){c._lightChanged=!1;var j=[],I=[],G=[];c.dm().each(function(z){if(Sp(z)){var L=z.s("light.type");L===ci?j.push(z):L===Ld?I.push(z):L===we&&G.push(z)}}),(j.length!==c._59O.length||I.length!==c._spots.length||G.length!==c._dirs.length)&&Yc(c),c._59O=j,c._spots=I,c._dirs=G}c._42(),c._1o.iv()},_42:function(m,o){var i=this;if(!i._35O&&(!Kj||Hm(Kj))){var z,N;m&&(m instanceof qj?N=m:z=m);var j=i._canvas,W=i.getWidth(),d=i.getHeight(),M=i.getGL(),$=i._prg;if(M){if(o?m||Fe(j,W,d,o):(o=i._devicePixelRatio||Xe,m||W===j.clientWidth&&d===j.clientHeight||Fe(j,W,d,o)),M.viewport(0,0,W*o,d*o),i._81O=H,M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT),ti(M,$.uBrightness,1),ti(M,$.uOpacity,1),ti(M,$.uPartOpacity,1),M._picking=!!m,ti(M,$.uPick,!!m),ti(M,$.uTexture,!1),ti(M,$.uFix,!1),ti(M,$.uTransparent,!1),ti(M,$.uBatchColor,!1),ti(M,$.uBatchBlend,!1),ti(M,$.uBatchBrightness,!1),m||(Oq(i,M,$),i._fogDisabled||(ti(M,$.uFogColor,i._fogColor),ti(M,$.uFogNear,i._fogNear),ti(M,$.uFogFar,i._fogFar))),Ak(M,$.aPosition),Ak(M,$.aNormal),Vn(M,$.aUv),Vn(M,$.aBatchColor),Vn(M,$.aBatchBlend),Vn(M,$.aBatchBrightness),Vn(M,$.aLineDistance),ti(M,$.uPMatrix,Ck(i)),ti(M,$.uViewMatrix,Eo(i,i._7O)),N){var F=M.getParameter(M.COLOR_CLEAR_VALUE);M.clearColor(0,0,0,0),M.disable(M.BLEND),Vn(M,$.aNormal),Eh(M,i._cube.vs,H,$.aPosition),fj(M,i._cube.is),Wh(N,i,U,0),Wh(N,i,u,6),Wh(N,i,X,12),Wh(N,i,n,18),Wh(N,i,Ol,24),Wh(N,i,Ko,30),Ak(M,$.aNormal),Sb(M,F)}else if(z){z.value=2;var F=M.getParameter(M.COLOR_CLEAR_VALUE);M.clearColor(0,0,0,0),M.disable(M.BLEND),i._95I(M,$,z),Dr(i,z),Zl(i,i._polylineModelMap,z),Zl(i,i._wireframeModelMap,z),ti(M,$.uTransparent,!0),i._95I(M,$,z,!0),Dr(i,z,!0),Zl(i,i._polylineModelMap,z,!0),Zl(i,i._wireframeModelMap,z,!0),ti(M,$.uTransparent,!1),M.disable(M.DEPTH_TEST),i._30O._42(M,$,z),M.enable(M.DEPTH_TEST),Sb(M,F)}else M.disable(M.BLEND),i._31O._42(M,$),i._95I(M,$),Dr(i),Zl(i,i._polylineModelMap),Zl(i,i._wireframeModelMap),M.enable(M.BLEND),M.depthMask(!1),ti(M,$.uTransparent,!0),i._95I(M,$,H,!0),Dr(i,H,!0),Zl(i,i._polylineModelMap,H,!0),Zl(i,i._wireframeModelMap,H,!0),ti(M,$.uTransparent,!1),M.depthMask(!0),M.disable(M.BLEND),M.disable(M.DEPTH_TEST),i._32O._42(M,$),i._30O._42(M,$),M.enable(M.DEPTH_TEST);Eh(M,H),fj(M,H),i._33Q=!1}}},_95I:function(W,U,p,j){var O=this,A=function(Y){return j?Y:!Y};O.dm().each(function(M){if(O.isVisible(M)){if(!p&&O.isTransparentMask(M))return;var E=O.getData3dUI(M);E&&E._42(W,U,p,A)}})},getLogicalPoint:function(O){return Em(O,this._canvas)},getHitFaceInfo:function(v){v.target&&(v=this.lp(v));var Y=this.getDataInfoAt(v);if(Y){var x=this._1o.face(Y.data,Im(v.x,v.y));if(x)return{data:Y.data,face:x}}return H},getDataAt:function(Y){var K=this.getDataInfoAt(Y);return K?K.data:H},getDataInfoAt:function(V,v){return V.target&&(V=this.lp(V)),this._1o.get(Im(V.x,V.y,v),!0)},getDatasInRect:function(n){return this._1o.get(n)},setEditable:function(w){var G=this,t=G._editable;G._editable=w,this.fp(us,t,w)},isEditable:function(F){var k=this;return k._editable?vp(F)?F.s("3d.editable")?k._editableFunc?k._editableFunc(F):!0:!1:!1:!1},isSelectable:function($){return $.s("3d.selectable")&&this.sm().isSelectable($)},isMovable:function(n){var s=this;return dl(n)&&n.getStyle(Tq)!==zh?!1:n.s("3d.movable")?s._movableFunc?s._movableFunc(n):!0:!1},isSizeEditable:function(Y){return vp(Y)?this._sizeEditableFunc?this._sizeEditableFunc(Y):!0:!1},isRotationEditable:function(S){return vp(S)&&S.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(S):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(t){this.setZoom(kf,t)},zoomOut:function(c){this.setZoom(1/kf,c)},setZoom:function(w,$){if(1!==w){var L=this;if(L._ortho)return L.setOrthoZoom(w,$),void 0;L._14o&&L._14o.stop(!0);var O=1/w,p=L._eye,i=L._center,k=i[0]+(p[0]-i[0])*O-p[0],T=i[1]+(p[1]-i[1])*O-p[1],M=i[2]+(p[2]-i[2])*O-p[2];if(!(Io(p,i)<L._moveStep&&1>O)){if($=Bl($)){var C=ef(p);return $.action=function(h){L.fi({kind:L._zooming?"betweenZoom":"beginZoom"}),L._zooming=1,p[0]=C[0]+k*h,p[1]=C[1]+T*h,p[2]=C[2]+M*h,L.fp(qs,H,p)},$._37o=function(){delete L._14o,delete L._zooming,L.fi({kind:"endZoom"}),L.onZoomEnded()},L._14o=ni($)}p[0]+=k,p[1]+=T,p[2]+=M,L.fp(qs,H,p)}}},setOrthoZoom:function(o,T){if(1!==o){var L=this;L._14o&&L._14o.stop(!0);var t=L._orthoWidth,$=t/o-t;if(!(t<L._moveStep&&o>1))return(T=Bl(T))?(T.action=function(U){L.fi({kind:L._zooming?"betweenZoom":"beginZoom"}),L._zooming=1,L.setOrthoWidth(t+$*U)},T._37o=function(){delete L._14o,delete L._zooming,L.fi({kind:"endZoom"}),L.onZoomEnded()},L._14o=ni(T)):(L.setOrthoWidth(t/o),void 0)}},getPositionInfo:function($){var V=this,N=V._eye,n=V._center,D=V.getAspect(),A=$?ql(Wg(n,N,!0),Wg($,N)):Io(N,n);if(V._ortho){var k=V._orthoWidth;return{length:A,height:k/D,width:k}}var G=2*E(V._fovy/2)*A;return{length:A,height:G,width:G*D}},getCenterInfo:function(){var C=this;return C._81O||(C._81O=C.getPositionInfo()),ef(C._81O)},rotate:function(W,T,I,J){var e=this;if(W||T){J==H&&(J=e._firstPersonMode),e._88O&&e._88O.stop(!0);var X=e._center,m=e._eye,i=e.getCenterInfo().length,V=J?X:m,U=J?m:X,o=Wg(V,U),$=l(o[0],o[2]),h=l(a(o[0]*o[0]+o[2]*o[2]),o[1]),B=J?as:qs;return J&&(T=-T),(I=Bl(I))?(I.action=function(d){e.fi({kind:e._rotating?"betweenRotate":"beginRotate"}),e._rotating=1;var I=$+W*d,K=h+T*d;K=Lh(K),o[0]=i*D(K)*D(I),o[1]=i*L(K),o[2]=i*D(K)*L(I),V[0]=U[0]+o[0],V[1]=U[1]+o[1],V[2]=U[2]+o[2],e.fp(B,H,V)},I._37o=function(){delete e._88O,delete e._rotating,e.fi({kind:"endRotate"}),e.onRotateEnded()},e._88O=ni(I)):($+=W,h+=T,h=Lh(h),o[0]=i*D(h)*D($),o[1]=i*L(h),o[2]=i*D(h)*L($),V[0]=U[0]+o[0],V[1]=U[1]+o[1],V[2]=U[2]+o[2],e.fp(B,H,V),void 0)}},pan:function(t,T,q,l){if(t||T){var e=this;l==H&&(l=e._firstPersonMode),e._89O&&e._89O.stop(!0);var O=Eo(e),s=[O[0]*t,O[4]*t,O[8]*t],X=[O[1]*T,O[5]*T,O[9]*T],S=s[0]+X[0],z=s[1]+X[1],p=s[2]+X[2],y=e._center,b=e._eye;if(l){var E=fm(e.getBoundaries(),b[0],b[2],b[0]+S,b[2]+p,a(S*S+p*p));S=E[0],p=E[1]}if(q=Bl(q)){var W=ef(b),n=ef(y);return q.action=function(N){e.fi({kind:e._panning?"betweenPan":"beginPan"}),e._panning=1,y[0]=n[0]+S*N,y[1]=n[1]+z*N,y[2]=n[2]+p*N,b[0]=W[0]+S*N,b[1]=W[1]+z*N,b[2]=W[2]+p*N,e.fp(qs,H,b),e.fp(as,H,y)},q._37o=function(){delete e._89O,delete e._panning,e.fi({kind:"endPan"}),e.onPanEnded()},e._89O=ni(q)}y[0]+=S,y[1]+=z,y[2]+=p,b[0]+=S,b[1]+=z,b[2]+=p,e.fp(qs,H,b),e.fp(as,H,y)}},walk:function(s,P,U){if(s){var V=this;U==H&&(U=V._firstPersonMode),V._90O&&V._90O.stop(!0);var c=V._center,j=V._eye,X=Wg(c,j,!0);if(U){var L=fm(V.getBoundaries(),j[0],j[2],j[0]+X[0]*s,j[2]+X[2]*s,t(s));if(s=Io(L),!s)return;X=[L[0]/s,0,L[1]/s]}if(P=Bl(P)){var K=ef(j),n=ef(c);return P.action=function(D){V.fi({kind:V._walking?"betweenWalk":"beginWalk"}),V._walking=1;var o=s*D;j[0]=K[0]+X[0]*o,j[1]=K[1]+X[1]*o,j[2]=K[2]+X[2]*o,c[0]=n[0]+X[0]*o,c[1]=n[1]+X[1]*o,c[2]=n[2]+X[2]*o,V.fp(qs,H,j),V.fp(as,H,c)
},P._37o=function(){delete V._90O,delete V._walking,V.fi({kind:"endWalk"}),V.onWalkEnded()},V._90O=ni(P)}j[0]+=X[0]*s,j[1]+=X[1]*s,j[2]+=X[2]*s,c[0]+=X[0]*s,c[1]+=X[1]*s,c[2]+=X[2]*s,V.fp(qs,H,j),V.fp(as,H,c)}},handleScroll:function(j,_){j.preventDefault();var R=this,L=R._moveStep;R.isFirstPersonMode()?R.isPannable()&&R.pan(0,_>0?L:-L):R.isZoomable()&&R.setZoom(0>_?1/Uf:Uf)},handlePinch:function(H,R){this.isZoomable()&&this.setZoom(R>H?1/Ab:Ab)},reset:function(){this.setCenter(e.graph3dViewCenter),this.setEye(e.graph3dViewEye),this.setUp(e.graph3dViewUp)},moveSelection:function(c,C,n){var X,N=this,d=N.dm();d&&(X=d.getHistoryManager()),X&&X.beginInteraction(),ab(this.sm().toSelection(this.isMovable,this),c,C,n),X&&X.endInteraction()},getMoveMode:function(d,D){var U=D.s("3d.move.mode");if(U)return U;var b="88",E="89",I="90";return tl(d)||Kq[b]&&Kq[E]&&Kq[I]?"xyz":Kq[b]&&Kq[E]?"xy":Kq[b]&&Kq[I]?"xz":Kq[E]&&Kq[I]?"yz":Kq[b]?"x":Kq[E]?"y":Kq[I]?"z":"xz"},handleTick:function(){var m=this,n=!1,P=m._moveStep,A=P,q=!1,$=!0,v=m._rotateStep*($?-1:1);if(m.isWalkable()||(A=0),m.isPannable()||(P=0),m.isRotatable()||(v=0),m._32Q){var s=(yc()-m._32Q)/50;A*=s,P*=s,v*=s}m._31Q&&(Dm(m._31Q),delete m._31Q,delete m._32Q),Jq()&&(n=!0,m.pan(-P,0,q,$)),fe()&&(n=!0,m.pan(P,0,q,$)),_n()&&(n=!0,tl()?m.pan(0,P,q,$):m.walk(A,q,$)),Bj()&&(n=!0,tl()?m.pan(0,-P,q,$):m.walk(-A,q,$)),Dg()&&(n=!0,m.rotate(-v,0,q,$)),uf()&&(n=!0,m.rotate(v,0,q,$)),uq()&&(n=!0,m.rotate(0,-v/2,q,$)),Ip()&&(n=!0,m.rotate(0,v/2,q,$)),n&&(m._32Q=yc(),m._31Q=Le(m.handleTick,m))},handleKeyDown:function(A){var Y=this;!Ji(A)&&Oh[A.keyCode]?Y.handleTick():bk(A)?Y.selectAll():Nf(A)?Y.handleDelete(A):Hi(A)&&this.isResettable()&&Y.reset()},checkDoubleClickOnNote:function(W,T,E){var l=this;if(E===ir){if(T.s("note.toggleable"))return T.s(hb,!T.s(hb)),l.fi({kind:"toggleNote",event:W,data:T,part:E}),!0}else if(E===nc&&T.s("note2.toggleable"))return T.s(Cm,!T.s(Cm)),l.fi({kind:"toggleNote2",event:W,data:T,part:E}),!0;return!1},checkDoubleClickOnRotation:function(l,D,K){return K===Yr?(D.setRotationX(0),!0):K===Yp?(D.setRotationY(0),!0):K===ts?(D.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(A){var k=this,e=k.getWidth()/2,N=k.getHeight()/2,C=k._18Q;return C||(C=Ck(k),k._18Q=rc(C,C,Eo(k))),A=$o([A[0],A[1],A[2],1],C),{x:e+e*A[0]/A[3],y:N-N*A[1]/A[3]}},getHitPosition:function(n,U,C){var h=this,J=h.getWidth(),l=h.getHeight(),X=n.target?h.lp(n):n,o=X.x-J/2,T=X.y-l/2,G=h.getCenterInfo(),b=Eo(h);U=U?U:[0,0,0],C=C?C:[0,1,0],o=o/J*G.width,T=-1*T/l*G.height;var a=[b[0]*o,b[4]*o,b[8]*o],Y=[b[1]*T,b[5]*T,b[9]*T],F=[a[0]+Y[0],a[1]+Y[1],a[2]+Y[2]],m=h.getCenter(),V=il(h,U,C,[F[0]+m[0],F[1]+m[1],F[2]+m[2]]);return V?V:[0,0,0]},getLineLength:function(u){this.validate();var L=this.getData3dUI(u);if(L&&L.getCache){var q=L.getCache();if(q)return q[q.length-1].length}return 0},getLineOffset:function(U,B){this.validate();var u=this.getData3dUI(U);if(u&&u.getCache){var Y=u.getCache();if(Y)return Nj(Y,B)}return H}});var ud=Ng.Interactor=function(s){this.gv=s};yn("Interactor",O,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Gq=Ng.DefaultInteractor=function(Q){yi(Gq,this,[Q])};yn("DefaultInteractor",ud,{handle_contextmenu:function(m){Cg(m)},handle_mousewheel:function(k){this.gv.handleScroll(k,k.wheelDelta/40)},handle_DOMMouseScroll:function(t){2===t.axis&&this.gv.handleScroll(t,-t.detail)},handle_keydown:function(b){this.gv.handleKeyDown(b)},handle_mousedown:function(m){this.handle_touchstart(m)},handle_touchstart:function(z){Cg(z);var k=this,l=k.gv,u=Ue(z),O=l.getDataInfoAt(z),E=O?O.data:H,L=O?O.part:H,J=l.sm(),i=ve(z),S=ck(z);l.setFocus(z)&&(k._62O=H,k._57I=H,E?Ji(z)?J.co(E)?J.rs(E):J.as(E):J.co(E)||J.ss(E):u&&(Ji(z)?l.isRectSelectable()&&(k._62O=Xh):k._57I=Ok(z)),k._31Q&&(Dm(k._31Q),delete k._31Q,delete k._32Q),k._62O||(l.isFirstPersonMode()&&(tl(z)||S>2?k._62O="pan":l.isMouseRoamable()||h?(k._62O="roaming",k.foward=i&&Ue(z),k._32Q=yc(),k._31Q=Le(k.tick,k)):u||(k._62O="roaming")),k._62O||(u&&i&&$h[L]?(k._62O=L,k.p3=E.p3()):u&&i&&vp(E)&&l.isSelected(E)&&l.isMovable(E)?(k._62O="move",k.p3=E.p3(),k.movedata=E):h&&(S>2?k._62O="pan":2===S&&(k.dist=cs(z),k._62O="pinch")))),k.point=l.lp(z),ce(k,z),Ei(z)?l.handleDoubleClick(z,E,L):l.handleClick(z,E,L))},tick:function(){var C=this,_=C.gv,t=_._moveStep;C.point&&_.isWalkable()&&(C._32Q&&(t*=(yc()-C._32Q)/50),_.walk(C.foward?t:-t),C._32Q=yc(),C._31Q=Le(C.tick,C))},handle_mouseup:function(f){this.handle_touchend(f)},handle_touchend:function(J){var Y=this._57I;Y&&(Io(Y,Ok(J))<=1&&this.gv.sm().cs(),this._57I=H)},handleWindowMouseMove:function(M){this.handleWindowTouchMove(M)},handleWindowTouchMove:function(D){var O,n,T=this,h=T.gv,E=T._62O,K=T.point,c=h.dm(),d=c.getHistoryManager(),b=h.lp(D),k=b.x-K.x,F=b.y-K.y,S=-C*k/h.getWidth(),o=-C*F/h.getHeight();if("roaming"===E)T.rotate(D,S/2,o/2);else if(E===Yr||E===Yp||E===ts)d&&!h._86O&&d.beginInteraction(),h.fi({kind:h._86O?"betweenEditRotation":"beginEditRotation",event:D}),h._86O=1,h.sm().each(function(x){if(vp(x)&&h.isRotationEditable(x)){var I=t(S)>t(o)?S:o;E===Yr?x.setRotationX(x.getRotationX()+I):E===Yp?x.setRotationY(x.getRotationY()+I):E===ts&&x.setRotationZ(x.getRotationZ()+I)}});else if("move"===E||$h[E]){E===kc||E===pp||E===Xb?(d&&!h._87O&&d.beginInteraction(),h.fi({kind:h._87O?"betweenEditSize":"beginEditSize",event:D}),h._87O=1):(d&&!h._moving&&d.beginInteraction(),h.fi({kind:h._moving?"betweenMove":"beginMove",event:D}),h._moving=1);var $,M=T.p3,I=h.getPositionInfo(M),z=Eo(h);$=E===vf?"x":E===Hn?"y":E===im?"z":E===kc?"sx":E===pp?"sy":E===Xb?"sz":h.getMoveMode(D,T.movedata),k=k/h.getWidth()*I.width,F=-1*F/h.getHeight()*I.height;var w,B,v=[z[0]*k,z[4]*k,z[8]*k],r=[z[1]*F,z[5]*F,z[9]*F],X=v[0]+r[0],j=v[1]+r[1],f=v[2]+r[2],i=[M[0]+X,M[1]+j,M[2]+f],U=Wg(h.getEye(),i,!0);if("xyz"===$?(w=i,h.moveSelection(X,j,f)):"xz"===$?(w=il(h,M,[0,1,0],i),w&&h.moveSelection(w[0]-M[0],0,w[2]-M[2])):"xy"===$?(w=il(h,M,[0,0,1],i),w&&h.moveSelection(w[0]-M[0],w[1]-M[1],0)):"yz"===$?(w=il(h,M,[1,0,0],i),w&&h.moveSelection(0,w[1]-M[1],w[2]-M[2])):"x"===$||"sx"===$?(U[0]=0,w=il(h,M,U,i),w&&(B=w[0]-M[0],"x"===$?h.moveSelection(B,0,0):h.sm().each(function(Z){vp(Z)&&h.isSizeEditable(Z)&&(O=W(Vc,Z.getWidth()+B),n=O/Z.getWidth(),Z.setWidth(O),tl(D)&&(Z.setHeight(Z.getHeight()*n),Z.setTall(Z.getTall()*n)))}))):"y"===$||"sy"===$?(U[1]=0,w=il(h,M,U,i),w&&(B=w[1]-M[1],"y"===$?h.moveSelection(0,B,0):h.sm().each(function(i){vp(i)&&h.isSizeEditable(i)&&(O=W(Vc,i.getTall()+B),n=O/i.getTall(),i.setTall(O),tl(D)&&(i.setHeight(i.getHeight()*n),i.setWidth(i.getWidth()*n)))}))):("z"===$||"sz"===$)&&(U[2]=0,w=il(h,M,U,i),w&&(B=w[2]-M[2],"z"===$?h.moveSelection(0,0,B):h.sm().each(function(F){vp(F)&&h.isSizeEditable(F)&&(O=W(Vc,F.getHeight()+B),n=O/F.getHeight(),F.setHeight(O),tl(D)&&(F.setTall(F.getTall()*n),F.setWidth(F.getWidth()*n)))}))),!w)return;T.p3=w}else if(E===Xh){var m=T.div;m||(m=T.div=Vb(),qr(T.getView(),m),m.op=K,m.style.background=h.getRectSelectBackground()),h.fi({kind:h._rectSelecting?"betweenRectSelect":"beginRectSelect",event:D}),h._rectSelecting=1,m.rect=Ro(m.op,b),gp(m,m.rect)}else if("pinch"===E&&2===ck(D)){h.fi({kind:h._pinching?"betweenPinch":"beginPinch",event:D}),h._pinching=1;var B=cs(D);h.handlePinch(B,T.dist),T.dist=B}else"pan"===E||tl(D)?T.pan(D,k,F):h.isFirstPersonMode()||(Ue(D)?T.rotate(D,S,o):(T.pan(D,k,0),h.isWalkable()&&(h.fi({kind:h._walking?"betweenWalk":"beginWalk",event:D}),h._walking=1,h.walk(F/h.getHeight()*h.getCenterInfo().height))));T.point=b},pan:function(Z,g,n){var K=this.gv;if(K.isPannable()){var W=K.getCenterInfo(),H=g/K.getWidth()*W.width,t=-1*n/K.getHeight()*W.height;K.fi({kind:K._panning?"betweenPan":"beginPan",event:Z}),K._panning=1,K.pan(-H,-t)}},rotate:function(b,R,h){var J=this.gv;J.isRotatable()&&(J.fi({kind:J._rotating?"betweenRotate":"beginRotate",event:b}),J._rotating=1,J.rotate(R,h))},handleWindowMouseUp:function(o){this.handleWindowTouchEnd(o)},handleWindowTouchEnd:function(z){var a=this,g=a.gv,F=g.dm(),e=F.getHistoryManager(),L=a.div;if(L){var M=g.getDatasInRect(L.rect);if(!M.isEmpty()){var W=g.sm(),Q=W.toSelection();M.each(function(L){W.co(L)?Q.remove(L):Q.add(L)}),W.ss(Q)}Mq(L)}g._moving&&(delete g._moving,g.fi({kind:"endMove",event:z}),g.onMoveEnded(),e&&e.endInteraction()),g._panning&&(delete g._panning,g.fi({kind:"endPan",event:z}),g.onPanEnded()),g._rotating&&(delete g._rotating,g.fi({kind:"endRotate",event:z}),g.onRotateEnded()),g._86O&&(delete g._86O,g.fi({kind:"endEditRotation",event:z}),e&&e.endInteraction()),g._87O&&(delete g._87O,g.fi({kind:"endEditSize",event:z}),e&&e.endInteraction()),g._pinching&&(delete g._pinching,g.fi({kind:"endPinch",event:z}),g.onPinchEnded()),g._rectSelecting&&(delete g._rectSelecting,g.fi({kind:"endRectSelect",event:z}),g.onRectSelectEnded()),g._walking&&(delete g._walking,g.fi({kind:"endWalk",event:z}),g.onWalkEnded()),a.dist=a.point=a._62O=a.p3=a.movedata=a.div=a._57I=a._32Q=a._31Q=a.foward=H}});var up=function(M){this.gv=M};oc(up,O,{_iv:!0,iv:function(){this._iv=!0},face:function(J,t){var m=this,s=m.gv.getGL();if(!s||!vp(J))return H;var U=t.x,_=t.width,Q=t.height,v=m.height-t.y-Q,i=p(_/2),g=new Uint8Array(4*_*Q),w=0;for(m.iv(),m.validate(J),_m(s,m.frame),s.readPixels(U,v,_,Q,s.RGBA,s.UNSIGNED_BYTE,g),_m(s,H),m.iv();i>=w;w++)for(var I=i-w,E=i+w,G=I;E>=G;G++)for(var B=I;E>=B;B++)if(G===I||G===E||B===I||B===E){var k=Zk.m[g[4*(G*_+B)]];if(k)return k}},get:function(R,r){this.validate();var M=this,N=M.gv.getGL();if(!N)return H;var g,s,J=R.x,S=R.width,z=R.height,D=M.height-R.y-z,f=p(S/2),K=new Uint8Array(4*S*z),c=0,X=K.length,y=r?H:new yo,w=r?H:{};if(_m(N,M.frame),N.readPixels(J,D,S,z,N.RGBA,N.UNSIGNED_BYTE,K),_m(N,H),r){for(;f>=c;c++)for(var Y=f-c,k=f+c,j=Y;k>=j;j++)for(var x=Y;k>=x;x++)if((j===Y||j===k||x===Y||x===k)&&(g=M.info(K,4*(j*S+x))))return g}else for(;X>c;c+=4)g=M.info(K,c),g&&(s=g.data,w[s._id]||(y.add(s),w[s._id]=s));return y},info:function(m,H){return this.colorMap[(m[H]<<24)+(m[H+1]<<16)+(m[H+2]<<8)+m[H+3]]},validate:function(D){var W=this,e=W.gv,i=e.getGL();if(i){var r=e.getWidth(),x=e.getHeight(),K=i.RGBA,Y=i.TEXTURE_2D,n=i.RENDERBUFFER,M=i.FRAMEBUFFER;W.texture||(W.texture=Bc(i),W.render=i.createRenderbuffer(),W.frame=i.createFramebuffer()),(W.width!==r||W.height!==x)&&(Zi(i,W.texture),i.texImage2D(Y,0,K,r,x,0,K,i.UNSIGNED_BYTE,H),kp(i,i.TEXTURE_MIN_FILTER,i.LINEAR),i.bindRenderbuffer(n,W.render),i.renderbufferStorage(n,i.DEPTH_COMPONENT16,r,x),_m(i,W.frame),i.framebufferTexture2D(M,i.COLOR_ATTACHMENT0,Y,W.texture,0),i.framebufferRenderbuffer(M,i.DEPTH_ATTACHMENT,n,W.render),Zi(i,H),i.bindRenderbuffer(n,H),_m(i,H),W.width=r,W.height=x),W._iv&&(W._iv=!1,_m(i,W.frame),e._42(D||(W.colorMap={}),1),_m(i,H))}}});var cb=function(_){this.gv=_};oc(cb,O,{gap:0,size:0,_42:function(t,M){var J=this,p=J.gv,l=p._gridGap,r=p._gridSize;if(p._gridVisible){if(J.gap!==l||J.size!==r){for(var K=[],x=p._gridSize/2,e=l*x,o=0;2*x+1>o;o++){var m=6*o,w=6*(2*x+1)+m;K[m]=-e,K[m+1]=0,K[m+2]=-e+o*l,K[m+3]=e,K[m+4]=0,K[m+5]=-e+o*l,K[w]=-e+o*l,K[w+1]=0,K[w+2]=-e,K[w+3]=-e+o*l,K[w+4]=0,K[w+5]=e}J.vs=new Po(K),J.gap=l,J.size=r}fg(p),mq(t,M),lb(t,M,1,p._gridColor,p._buffer.vs,J.vs),cc(t,0,J.vs.length/3,t.LINES),bs(t,M)}else J.vs=J.gap=J.size=H}});var No=function(g){this.gv=g};oc(No,O,{_42:function(g,a){var x=this.gv,p=x._buffer.vs,Y=x._axisXColor,N=x._axisYColor,D=x._axisZColor,T=x._originAxisVisible,m=x._centerAxisVisible;if(T||m){var Q=Z?g.TRIANGLES:g.TRIANGLE_FAN,j=g.LINES;if(fg(x),mq(g,a),T){var $=x.getCenterInfo(),K=P($.width,$.height)/5,U=.8*K,B=.05*K;lb(g,a,1.5,Y,p,new Po([0,0,0,K,0,0,U,B,0,U,0,B,U,-B,0,U,0,-B,U,B,0,0,0,0,0,K,0,B,U,0,0,U,B,-B,U,0,0,U,-B,B,U,0,0,0,0,0,0,K,B,0,U,0,B,U,-B,0,U,0,-B,U,B,0,U])),cc(g,0,2,j),cc(g,1,6,Q),lb(g,a,H,N),cc(g,7,2,j),cc(g,8,6,Q),lb(g,a,H,D),cc(g,14,2,j),cc(g,15,6,Q)}if(m){var v=x._center,r=v[0],C=v[1],O=v[2],$=x.getPositionInfo(v);K=P($.width,$.height)/20,lb(g,a,1.5,Y,p,new Po([r,C,O,r+K,C,O,r,C,O,r,C+K,O,r,C,O,r,C,O+K])),cc(g,0,2,j),lb(g,a,H,N),cc(g,2,2,j),lb(g,a,H,D),cc(g,4,2,j)}bs(g,a)}}});var cf=function(F){this.gv=F},vf="edit_tx",Hn="edit_ty",im="edit_tz",Yr="edit_rx",Yp="edit_ry",ts="edit_rz",kc="edit_sx",pp="edit_sy",Xb="edit_sz",$h={};$h[vf]=1,$h[Hn]=1,$h[im]=1,$h[Yr]=1,$h[Yp]=1,$h[ts]=1,$h[kc]=1,$h[pp]=1,$h[Xb]=1,oc(cf,O,{_42:function(u,X,N){var C=this,D=C.gv,Q=D.sm().ld();if(D.isEditable(Q)&&vp(Q)&&(!D.isFirstPersonMode()||!D.isMouseRoamable()&&!h)){fg(D);var T,l,o=D.isMovable(Q),O=D.isRotationEditable(Q),c=D.isSizeEditable(Q),S=D._axisXColor,z=D._axisYColor,g=D._axisZColor,p=D._editSizeColor,L=D.getCenterInfo(),W=P(L.width,L.height)/10,Z=W/(N?5:10),k=.7*W,K=.4*k,H=Q.p3(),E=H[0],G=H[1],s=H[2];T=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],o&&C._17O(u,X,Q,N,vf,S,T,[E,G-Z,s,E+k,G-Z,s,E+k,G,s,E+k,G,s,E,G,s,E,G-Z,s,E,G-Z,s+Z,E+k,G-Z,s+Z,E+k,G-Z,s,E+k,G-Z,s,E,G-Z,s,E,G-Z,s+Z]),l=E+k,c&&C._17O(u,X,Q,N,kc,p,T,[l,G-Z,s,l+K,G-Z,s,l+K,G,s,l+K,G,s,l,G,s,l,G-Z,s,l,G-Z,s+Z,l+K,G-Z,s+Z,l+K,G-Z,s,l+K,G-Z,s,l,G-Z,s,l,G-Z,s+Z]),l+=K,O&&C._17O(u,X,Q,N,Yr,S,T,[l,G-Z,s,l+K,G-Z,s,l+K,G,s,l+K,G,s,l,G,s,l,G-Z,s,l,G-Z,s+Z,l+K,G-Z,s+Z,l+K,G-Z,s,l+K,G-Z,s,l,G-Z,s,l,G-Z,s+Z]),T=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],o&&C._17O(u,X,Q,N,Hn,z,T,[E,G,s,E,G+k,s,E-Z,G+k,s,E-Z,G+k,s,E-Z,G,s,E,G,s,E,G,s,E,G,s-Z,E,G+k,s-Z,E,G+k,s-Z,E,G+k,s,E,G,s]),l=G+k,c&&C._17O(u,X,Q,N,pp,p,T,[E,l,s,E,l+K,s,E-Z,l+K,s,E-Z,l+K,s,E-Z,l,s,E,l,s,E,l,s,E,l,s-Z,E,l+K,s-Z,E,l+K,s-Z,E,l+K,s,E,l,s]),l+=K,O&&C._17O(u,X,Q,N,Yp,z,T,[E,l,s,E,l+K,s,E-Z,l+K,s,E-Z,l+K,s,E-Z,l,s,E,l,s,E,l,s,E,l,s-Z,E,l+K,s-Z,E,l+K,s-Z,E,l+K,s,E,l,s]),T=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],o&&C._17O(u,X,Q,N,im,g,T,[E,G,s,E,G,s+k,E,G-Z,s+k,E,G-Z,s+k,E,G-Z,s,E,G,s,E,G-Z,s,E-Z,G-Z,s,E-Z,G-Z,s+k,E-Z,G-Z,s+k,E,G-Z,s+k,E,G-Z,s]),l=s+k,c&&C._17O(u,X,Q,N,Xb,p,T,[E,G,l,E,G,l+K,E,G-Z,l+K,E,G-Z,l+K,E,G-Z,l,E,G,l,E,G-Z,l,E-Z,G-Z,l,E-Z,G-Z,l+K,E-Z,G-Z,l+K,E,G-Z,l+K,E,G-Z,l]),l+=K,O&&C._17O(u,X,Q,N,ts,g,T,[E,G,l,E,G,l+K,E,G-Z,l+K,E,G-Z,l+K,E,G-Z,l,E,G,l,E,G-Z,l,E-Z,G-Z,l,E-Z,G-Z,l+K,E-Z,G-Z,l+K,E,G-Z,l+K,E,G-Z,l])}},_17O:function(j,N,P,B,U,p,W,y){var $=this.gv._buffer;hd(j,N,B,!0,P,U),Mp(j,N,H,!0,H,!0,H,!1),ti(j,N.uDiffuse,p),Eh(j,$.vs,new Po(y),N.aPosition),Eh(j,$.ns,new Po(W),N.aNormal),cc(j,0,12),Md(j,N)}});var sb=function(F,v){this.gv=F,this.s=function(p,_,s){return _==H&&(_=s),_==H?v.getStyle(p):wo(_,v,F)},this.data=v};oc(sb,O,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(B,O,F,G){var f,o,l,e,J,Q,M,V=this,I=V.gv,h=V.data,g=h._id,A=V.s("batch"),c=I._34O,x=I._33O,S=I.isSelectable(h),j=I.getBrightness(h),y=j!=H&&1!==j;if(V._iv){if(l=Ec(c,x,h,A),V.validate(l,A?Jk[A]||ur:H),l&&(e=c[g],J=e.size=l.vs.length/3-e.begin,M=l.rs))for(j=y?j:1,Q=0;J>Q;Q++)M.push(j);if(vp(h)){var $=I.getWireframe(h);$&&uh(I,h,$)}V.labelInfo=V.label2Info=V.noteInfo=V.note2Info=V._38o=H,V._24O(jd,"getLabel"),V._24O(mr,"getLabel2"),V._26O(ir,"getNote"),V._26O(nc,"getNote2"),V._15O(),V._iv=!1}y&&ti(B,O.uBrightness,j),o=hd(B,O,F,S,h,Ig),o&&(Lj(o,c[g],x),Lj(o,I._polylineIndexMap[g],I._polylineModelMap),Lj(o,I._wireframeIndexMap[g],I._wireframeModelMap)),c[g]||V._80o(B,O,G),(f=V.labelInfo)&&(hd(B,O,F,S,h,jd),V._28O(f,jd,G)),(f=V.label2Info)&&(hd(B,O,F,S,h,mr),V._28O(f,mr,G)),(f=V.noteInfo)&&(hd(B,O,F,S,h,ir),V._29O(f,ir,G)),(f=V.note2Info)&&(hd(B,O,F,S,h,nc),V._29O(f,nc,G)),(f=V._38o)&&V._99O(B,O,f,F,S,G),y&&ti(B,O.uBrightness,1)},validate:function(){},_16O:function(){return Xq},_80o:function(){},dispose:function(){},getBodyColor:function(I){var O=this.data,p=this.gv.getBodyColor(O);return p?p:I?O.getStyle(I):H},_24O:function(i,m){var I=this,M=I.data,K=I.gv,d=I.s,o=K[m](M);if(o!=H){var Q=d(i+".scale"),f=d(i+".max"),q=I[i+"Info"]={label:o,textureScale:d(i+".texture.scale"),color:K[m+"Color"](M),font:d(i+".font"),align:d(i+".align"),background:K[m+"Background"](M)},y=q.rect=Bi(q,o);f>0&&f<y.width&&(q.labelWidth=y.width,y.width=f),y.x=y.y=0,y.width*=Q,y.height*=Q,q.mat=I._16O(d(i+".autorotate"),d(i+".position"),y,d(i+".face"),d(i+".t3"),d(i+".r3"),d(i+".rotationMode"));var F=y.width/2,P=y.height/2;q.vs=new Po([-F,P,0,-F,-P,0,F,-P,0,F,P,0]),y.width/=Q,y.height/=Q}},_26O:function(_,d){var U=this,w=U.data,z=U.gv,h=U.s,k=z[d](w);if(k!=H){var $=h(_+".scale"),g=this[_+"Info"]={note:k,textureScale:h(_+".texture.scale"),expanded:h(_+".expanded"),font:h(_+".font"),color:h(_+".color"),align:h(_+".align"),borderWidth:h(_+".border.width"),borderColor:h(_+".border.color"),background:z[d+"Background"](w)};if(g.expanded){var V=h(_+".max"),t=Bi(g,k);t.width+=6,t.height+=2,V>0&&V<t.width&&(g.labelWidth=t.width,t.width=V);var j={x:-t.width/2,y:-8-t.height,width:t.width,height:t.height+8}}else j={x:-6,y:-18,width:12,height:18};g.mat=U._16O(h(_+".autorotate"),h(_+".position"),H,h(_+".face"),h(_+".t3"),h(_+".r3"),h(_+".rotationMode")),g.rect=j,1!==$&&(j=ef(j),j.x*=$,j.height*=$,j.y=-j.height,j.width*=$);var r=j.x,i=j.y,B=j.width,n=j.height;g.vs=new Po([r,-i,0,r,-i-n,0,r+B,-i-n,0,r+B,-i,0])}},_28O:function(K,E,Y){if(Y(this.s(E+".transparent"))){var L=K.rect,r=K.textureScale,M=L.width*r,O=L.height*r;if(M>=1&&O>=1){var P=Bq(M,O);1!==r&&(P.translate(P,L.x,L.y),P.scale(r,r),P.translate(P,-L.x,-L.y)),yl(P,K),P.restore(),Pe(this,E,K.mat,K.vs,!0)}}},_29O:function($,X,f){if(f(this.s(X+".transparent"))){var T=$.rect,B=$.textureScale,j=T.x,g=T.y,H=T.width*B,q=T.height*B;if(H>=1&&q>=1){T.x=T.y=0;var E=Bq(H,q);1!==B&&E.scale(B,B),Ke(E,$),E.restore(),T.x=j,T.y=g,Pe(this,X,$.mat,$.vs,!1)}}},_99O:function(b,V,h,M,l,d){if(h){var E=this,a=E.gv,Z=E.data,i=a._buffer,y=a._1O,I=h.icons;for(var X in I){var R=I[X],O=h.rects[X];if(O&&d(wo(R.transparent,Z,a))){hd(b,V,M,l,Z,X);var u=wo(R.shape3d,Z,a),r=u?[u]:wo(R.names,Z,a),L=r?r.length:0,S=wo(R.textureScale,Z,a)||1,B=wo(R.light,Z,a);B==H&&(B=u?!0:!1),Mp(b,V,wo(R.blend,Z,a),B,wo(R.opacity,Z,a),wo(R.reverseFlip,Z,a),wo(R.reverseColor,Z,a),wo(R.reverseCull,Z,a));for(var F=0;L>F;F++){var p=r[F],Q=O[F];if(Kg(E,Q.mat),u)Vh(a,Z,lr(E.s,u),E.s);else{var f=Dp(p);if(f){var K=Q.width*S,q=Q.height*S;if(K>=1&&q>=1){var t=Bq(K,q);gd(t,f,wo(R.stretch,Z,a),0,0,K,q,Z,a),t.restore(),Bc(b,mf,y),Zc(b,V,y,wo(R.discardSelectable,Z,a),i.uv,Hb),Eh(b,i.vs,Q.vs,V.aPosition),Eh(b,i.ns,vb,V.aNormal),fj(b,i.is,Ym),gn(b,0,Ym.length),Jj(b,V,y)}}}dr(a)}Md(b,V)}}}}});var Nk=function(b,u){yi(Nk,this,[b,u])};oc(Nk,sb,{_16O:function(h,R,H,c,Q,C,u,Y,A){var d=this.data,B=Al(R,d.s3(),H,c,Y,A);return Fj(Gk(),B,d.p3(),c,Q,C,u,h,d.r3(),d.getRotationMode())},clear:function(){var T=this;T.faceMat=T.mat=T.shapeModel=T.left=T.right=T.front=T.back=T.top=T.bottom=T.csg=H},validate:function(W,B){var N=this,y=N.gv,t=N.data,d=lr(N.s),D=Pq(t,y.getMat(t),d?N.s("shape3d.scaleable"):!0);if(N.clear(),W){var j=[];d?qb(y,t,d,N.s,N.getBodyColor(),[D],W,j):(po(y,t,W,B,D,U,j,xr),po(y,t,W,B,D,X,j,Gr),po(y,t,W,B,D,Ol,j,Bk),po(y,t,W,B,D,Ko,j,Sh),po(y,t,W,B,D,u,j,mc),po(y,t,W,B,D,n,j,Jc)),j.length&&(Sj(W.vs,j),Sj(W.ns,nr(j)))}else N.mat=D,(N.shapeModel=d)||(N.vf(U),N.vf(X),N.vf(u),N.vf(n),N.vf(Ol),N.vf(Ko))},vf:function(F){var N=this;if(N.gv.getFaceVisible(N.data,F)){var R=Vg(N,F);return R.mat&&(N.faceMat=!0),R}},_80o:function(d,N,u){var q=this,v=q.gv,h=q.data,a=v._cube,n=q.shapeModel;fg(v,q.mat),n?Vh(v,h,n,q.s,q.getBodyColor(),u):(Eh(d,a.vs,H,N.aPosition),Eh(d,a.ns,H,N.aNormal),fj(d,a.is),q._18O(d,N,q.left,0,u),q._18O(d,N,q.front,6,u),q._18O(d,N,q.right,12,u),q._18O(d,N,q.back,18,u),q._18O(d,N,q.top,24,u),q._18O(d,N,q.bottom,30,u)),dr(v),q.faceMat&&(q._18O(d,N,q.left,0,u,!0),q._18O(d,N,q.front,6,u,!0),q._18O(d,N,q.right,12,u,!0),q._18O(d,N,q.back,18,u,!0),q._18O(d,N,q.top,24,u,!0),q._18O(d,N,q.bottom,30,u,!0))},_18O:function(o,R,i,Q,u,y){if(i){if(!u(i.transparent))return;if(y&&!i.mat||!y&&i.mat)return;y&&fg(this.gv,i.mat);var M=this,k=M.data,f=M.gv,F=f.getTexture(i.texture,k),I=i.uv,U=i.uvScale,x=i.uvOffset,J=i.discardSelectable;if(F)if(I){for(var t=8*(Q/6),_=0;8>_;_++)xi[t+_]=I[_];Zc(o,R,F,J,f._buffer.uv,xi,x,U)}else Zc(o,R,F,J,f._cube.uv,H,x,U);Mp(o,R,i.blend,i.light,i.opacity,i.reverseFlip,i.reverseColor,i.reverseCull),ti(o,R.uDiffuse,i.color),gn(o,Q,6),Md(o,R),Jj(o,R,F),y&&dr(f)}}});var kk=function(v,B){yi(kk,this,[v,B])};oc(kk,sb,{_25Q:1,validate:function(X){var o=this,_=o.gv,L=o.data,D=o.s,l=D("edge.width"),y=L._40I,T=L._41I;if(o.shapeModel=o.info=H,y&&T){var c,R,a,q,h,Y,Q,A,j,I,Z=L.isLooped(),r=D(Tq),t=e.getEdgeType(r);if(t){var W=t(L,Lk(o,_,L,Z,r),_,o._19Q);if(!W.points||W.points.isEmpty())return;Y=o.info={},Q=W.segments,h=W.points,A=h.size();for(var S=y.getElevation(),f=T.getElevation(),s=0;A>s;s++){var M=h.get(s);M.e==H&&(M.e=S+(f-S)*s/(A-1))}j=Km(h.get(0)),I=Km(h.get(A-1));var C=A%2;0===C?(Y.c1=Km(h.get(A/2-1)),Y.c2=Km(h.get(A/2))):Y.p3=Km(h.get((A-C)/2)),Y.s1=j,Y.s2=Km(h.get(1)),Y.t1=Km(h.get(A-2)),Y.t2=I}else{h=new yo,Y=o.info={};var V=D("edge.offset"),x=D("edge.center"),v=D("edge.source.t3"),O=D("edge.target.t3"),p=y.p3(),i=T.p3();if(v&&(p[0]+=v[0],p[1]+=v[1],p[2]+=v[2]),O&&(i[0]+=O[0],i[1]+=O[1],i[2]+=O[2]),r===zh){Q=D("edge.segments");var U=Y.points=D(fd)||$f;if(A=U.size()){j=Km(U.get(0)),I=Km(U.get(A-1)),!x&&V&&(a=Wg(j,p,!0),V=P(V,Io(p,j)),p=[p[0]+a[0]*V,p[1]+a[1]*V,p[2]+a[2]*V],a=Wg(i,I,!0),V=P(V,Io(I,i)),i=[i[0]-a[0]*V,i[1]-a[1]*V,i[2]-a[2]*V]);var C=A%2;0===C?(c=Km(U.get(A/2-1)),R=Km(U.get(A/2))):Y.p3=Km(U.get((A-C)/2)),Y.s1=p,Y.s2=j,Y.t1=I,Y.t2=i}else!x&&V&&(a=Wg(i,p,!0),q=Io(p,i),V=ag(V,q),p=[p[0]+a[0]*V,p[1]+a[1]*V,p[2]+a[2]*V],i=[i[0]-a[0]*V,i[1]-a[1]*V,i[2]-a[2]*V]),c=p,R=i;h.add({x:p[0],y:p[2],e:p[1]}),h.addAll(U),h.add({x:i[0],y:i[2],e:i[1]})}else{var k=Lk(o,_,L,Z,r);if(o._19Q||(k=-k),Z){var n=p[0],F=p[1],m=p[2],b=y.getTall()/2+k;c=[n-k,F+b,m],R=[n+k,F+b,m],h.add({x:n-k,y:m,e:F}),h.add({x:n-k,y:m,e:F+b}),h.add({x:n+k,y:m,e:F+b}),h.add({x:n+k,y:m,e:F})}else{a=Wg(i,p,!0),q=Io(p,i);var w={x:p[0],y:p[2]},g={x:i[0],y:i[2]},u=lo(H,w,g,k),G=u.x-w.x,z=u.y-w.y;V=ag(V,q),a[0]*=V,a[1]*=V,a[2]*=V,c=[p[0]+a[0]+G,p[1]+a[1],p[2]+a[2]+z],R=[i[0]-a[0]+G,i[1]-a[1],i[2]-a[2]+z],x?(h.add({x:p[0],y:p[2],e:p[1]}),h.add({x:c[0],y:c[2],e:c[1]}),h.add({x:R[0],y:R[2],e:R[1]}),h.add({x:i[0],y:i[2],e:i[1]})):(h.add({x:c[0],y:c[2],e:c[1]}),h.add({x:R[0],y:R[2],e:R[1]}))}}Y.c1=c,Y.c2=R}Y.list=D(pi)===gq?o.createTubeModel(h,Q,l/2,X):o.createLineModel(h,Q,l,"edge","edge.dash")}}});var As=function(K,W){yi(As,this,[K,W])};oc(As,Nk,{_80o:function(r,W,g){var e=this,S=e.gv,C=e.shapeModel;fg(S,e.mat),C?Vh(S,e.data,C,e.s,e.getBodyColor(),g):($g(e,r,W,e.left,g),$g(e,r,W,e.front,g),$g(e,r,W,e.right,g),$g(e,r,W,e.back,g),$g(e,r,W,e.top,g),$g(e,r,W,e.bottom,g)),dr(S)},validate:function(q,O){var o,S,C=this,j=C.s,k=C.data,h=k.p3(),K=k._thickness/2,Y=k.isClosePath(),b=k.getPoints(),V=k.getSegments(),F=j($c),B=q&&q.uv;if(C.clear(),0>K)S=C.shapeModel=tj(b,V,j(wr),j(nj),F,j(Bn),k.getTall(),k.getElevation(),Y),j(_c)?j("shape3d.image")||delete S.uv:(delete S.vs,delete S.ns,delete S.uv),j("shape3d.top.image")||delete S.top_uv,j("shape3d.bottom.image")||delete S.bottom_uv;else if(j(pi)===gq)o=sl(b,V,F,Y),S=C.shapeModel={vs:[]},j("shape3d.image")&&(S.uv=[],S.sum=j(Bn)||um(o)||1,S.len=0),j(wr)&&!Y&&(S.top_vs=[],j("shape3d.top.image")&&(S.top_uv=[])),j(nj)&&!Y&&(S.bottom_vs=[],j("shape3d.bottom.image")&&(S.bottom_uv=[])),C._12O(o,K);else{var M,p,m,N,Z,a,W,P,Q,l;o=sl(b,V,F,Y),Z=C.vf(u,B,!1,O),K&&(a=C.vf(n,B,!1,O),W=Y?H:C.vf(U,B,!1,O),P=Y?H:C.vf(X,B,!1,O),Q=C.vf(Ol,B,!1,O),l=C.vf(Ko,B,!1,O)),K?C._12O(o,K):Z&&o.forEach(function(Y){if(N=Y.length,N>0)for(M=Y[0],m=1;N>m;m++)p=Y[m],C.addV(Z.vs,M,p),M=p}),C._20Q(o),q||(Z&&(Z.ns=nr(Z.vs),Xk(Z,"vs"),Xk(Z,nd)),K&&(a&&(a.ns=nr(a.vs),Xk(a,"vs"),Xk(a,nd)),W&&(W.ns=nr(W.vs),Xk(W,"vs"),Xk(W,nd)),P&&(P.ns=nr(P.vs),Xk(P,"vs"),Xk(P,nd)),Q&&(Q.ns=nr(Q.vs),Xk(Q,"vs"),Xk(Q,nd)),l&&(l.ns=nr(l.vs),Xk(l,"vs"),Xk(l,nd))))}var x=C.mat=Gk();ob(x,h),ik(x,k.r3(),k.getRotationMode()),ob(x,rl(h)),q&&(ml(C,x,q,S),C.clear())},_20Q:function(o){var p,I,v,c,X,j,U,O=this,K=O.front,u=O.back,w=O.top,D=O.bottom,b=K?K.tuv:H,n=u?u.tuv:H,r=w?w.tuv:H,x=D?D.tuv:H,S=0;(b||n||r||x)&&(p=O.s(Bn)||um(o)||1,o.forEach(function(f){if(I=f.length,I>0)for(j=f[0],v=1;I>v;v++)U=f[v],c=S/p,S+=Io(j,U),X=S/p,O._14O(K,c,X),O._14O(u,1-X,1-c),O._14O(w,c,X),O._14O(D,c,X),j=U}))},_14O:function(_,B,F){if(_){var V=_.uv,Q=_.tuv;if(Q){if(V)var L=V[0]+(V[6]-V[0])*B,E=V[1]+(V[7]-V[1])*B,v=V[2]+(V[4]-V[2])*B,e=V[3]+(V[5]-V[3])*B,C=V[2]+(V[4]-V[2])*F,q=V[3]+(V[5]-V[3])*F,c=V[0]+(V[6]-V[0])*F,Y=V[1]+(V[7]-V[1])*F;else L=B,E=0,v=B,e=1,C=F,q=1,c=F,Y=0;Q.push(v,e,C,q,c,Y,c,Y,L,E,v,e)}}},_13O:function(D){var _=D.uv,j=D.tuv;j&&(_?j.push(_[2],_[3],_[4],_[5],_[6],_[7],_[6],_[7],_[0],_[1],_[2],_[3]):j.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(a,P){var m,V,x,n,M,t=this;a.forEach(function(A){if(M=A.length,M>0)for(m={p:A[0],n:!0},n=1;M>n;n++)V=A[n],x=M-1>n?A[n+1]:H,t.addPoint(m,V,x,P,A)})},addPoint:function(r,G,C,P,k){var K,Z,X,$,y,a,O,Q,B,l=this,S=r.p,T=r.f,W=r.b,f=l.s("shape3d.side")||gl,I=l.s("shape3d.start.angle"),e=l.shapeModel,d=l.data.isClosePath();if(r.n&&(r.n=!1,T=d&&k.length>2?lo(k[k.length-2],S,G,P):lo(H,S,G,P),W=Fi(S,T),e?e.top_vs&&l._10O(W,T,f,I,e.top_vs,e.top_uv):(K=l.left)&&(l.addV(K.vs,W,T),l._13O(K))),Z=C?lo(S,G,C,P):d&&k.length>2?lo(S,G,k[1],P):lo(S,G,H,P),X=Fi(G,Z),e){var o,j,q=e.vs,g=e.uv,s=e.sum;for(g&&(o=e.len/s,e.len+=Io(S,G),j=e.len/s),a=l._9O(W,T,f,I),O=l._9O(X,Z,f,I),Q=0;f>Q;Q++)B=Q+1,Sj(q,a[B]),Sj(q,O[Q]),Sj(q,a[Q]),Sj(q,O[Q]),Sj(q,a[B]),Sj(q,O[B]),g&&($=Q/f,y=B/f,g.push(o,y,j,$,o,$,j,$,o,y,j,y));!C&&e.bottom_vs&&l._10O(X,Z,f,I,e.bottom_vs,e.bottom_uv,!0)}else!C&&(K=l.right)&&(l.addV(K.vs,Z,X),l._13O(K)),(K=l.front)&&l.addV(K.vs,T,Z),(K=l.back)&&l.addV(K.vs,X,W),(K=l.top)&&l.addH(K.vs,T,Z,X,W,!0),(K=l.bottom)&&l.addH(K.vs,W,X,Z,T);r.p=G,r.f=Z,r.b=X},_10O:function(h,S,O,w,z,l,j){var J,Z,E=this,N=E.data,v=E._9O(h,S,O,w),x=(h.x+S.x)/2,k=(h.y+S.y)/2,m=N.getElevation(),g=0;for(g=0;O>g;g++)j?(Sj(z,v[g]),Sj(z,v[g+1])):(Sj(z,v[g+1]),Sj(z,v[g])),Sj(z,[x,m,k]),l&&(j?(J=C*(g+1)/O+w,Z=C*g/O+w):(J=C*g/O+w,Z=C*(g+1)/O+w),l.push(.5-.5*L(Z),.5-.5*D(Z),.5-.5*L(J),.5-.5*D(J),.5,.5))},_9O:function(b,E,s,e){for(var Q,y,O=this,V=O.data,k=[],M=(b.x+E.x)/2,P=(b.y+E.y)/2,t=V.getTall()/2,h=V.getElevation(),o=0;s>=o;o++)Q=C*o/s+e,y=L(Q),k.push([M+(b.x-M)*y,h+t*D(Q),P+(b.y-P)*y]);return k},addV:function(a,P,_){var j=P.x,Q=P.y,w=_.x,f=_.y,x=this.data,A=x.getElevation(),v=x.getTall()/2;a.push(j,A-v,Q,w,A-v,f,w,A+v,f,w,A+v,f,j,A+v,Q,j,A-v,Q)},addH:function(a,t,l,S,g,k){var y=this.data,$=y.getTall()/2,i=y.getElevation()+(k?$:-$);a.push(t.x,i,t.y,l.x,i,l.y,S.x,i,S.y,S.x,i,S.y,g.x,i,g.y,t.x,i,t.y)},vf:function(u,e,J,A){var c,K=this,p=K.gv.getFaceVisible(K.data,u);return(J||p)&&(c=Vg(K,u,A),c.vs=[],c.tuv=p&&(c.texture||e)?[]:H,c.visible=p),c}});var le=function(M,l){yi(le,this,[M,l])};oc(le,sb,{_25Q:1,validate:function(d){var $=this,Y=$.data,S=$.s,u=Y.getPoints(),c=u.size();if($.shapeModel=$.info=H,c>1){var L=$.info={},A=Y.getSegments(),r=Y.getThickness(),i=Km(u.get(0)),z=Km(u.get(c-1)),D=c%2;0===D?(L.c1=Km(u.get(c/2-1)),L.c2=Km(u.get(c/2))):L.p3=Km(u.get((c-D)/2)),L.s1=i,L.s2=Km(u.get(1)),L.t1=Km(u.get(c-2)),L.t2=z,L.list=S(pi)===gq?$.createTubeModel(u,A,r/2,d):$.createLineModel(u,A,r,"shape.border","shape.dash")}}}),hq(e,{accordionViewExpandIcon:Kn(wb),accordionViewCollapseIcon:Kn(wb,!0),accordionViewLabelColor:yb,accordionViewLabelFont:eg,accordionViewTitleBackground:Jm,accordionViewSelectBackground:jb,accordionViewSelectWidth:3,accordionViewSeparatorColor:x,splitViewDividerSize:1,splitViewDividerBackground:Jm,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Bg,rect:[2,2,12,12],background:wb}]},propertyViewLabelColor:em,propertyViewLabelSelectColor:yb,propertyViewLabelFont:eg,propertyViewExpandIcon:Kn(Ki),propertyViewCollapseIcon:Kn(Ki,!0),propertyViewBackground:zj,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:uj,propertyViewColumnLineColor:uj,propertyViewSelectBackground:jb,listViewLabelColor:em,listViewLabelSelectColor:yb,listViewLabelFont:eg,listViewRowLineVisible:!1,listViewRowLineColor:uj,listViewSelectBackground:jb,treeViewLabelColor:em,treeViewLabelSelectColor:yb,treeViewLabelFont:eg,treeViewExpandIcon:Kn(Eg),treeViewCollapseIcon:Kn(Eg,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:uj,treeViewSelectBackground:jb,tableViewLabelColor:em,tableViewLabelSelectColor:yb,tableViewLabelFont:eg,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:uj,tableViewColumnLineColor:uj,tableViewSelectBackground:jb,treeTableViewLabelColor:em,treeTableViewLabelSelectColor:yb,treeTableViewLabelFont:eg,treeTableViewExpandIcon:Kn(Eg),treeTableViewCollapseIcon:Kn(Eg,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:uj,treeTableViewColumnLineColor:uj,treeTableViewSelectBackground:jb,tableHeaderLabelColor:em,tableHeaderLabelFont:eg,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:Jp,tableHeaderBackground:zj,tableHeaderMoveBackground:uo,tableHeaderInsertColor:jb,tableHeaderSortDescIcon:ch(Ki,!0),tableHeaderSortAscIcon:ch(Ki),tabViewTabGap:1,tabViewLabelColor:yb,tabViewLabelFont:eg,tabViewTabBackground:Jm,tabViewSelectWidth:3,tabViewSelectBackground:jb,tabViewMoveBackground:uo,tabViewInsertColor:jb,toolbarLabelColor:em,toolbarLabelSelectColor:yb,toolbarLabelFont:eg,toolbarBackground:zj,toolbarSelectBackground:jb,toolbarItemGap:8,toolbarSeparatorColor:Ef},!0);var ld={translateX:1,sortColumn:1},es={sortable:1,sortOrder:1,sortFunc:1},Yj={focusData:1},rq={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},mm={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Qb=function(z,t){t.add(z),z.hasChildren()&&z.eachChild(function(C){Qb(C,t)})},Uk=function(n,B,j,Z,$,V,y,b,G,L,p){var w,m=j.getValueType(),X=j.getAlign();if(j.getEnumValues()){var r=j.toEnumLabel(B),Y=$n||0,A=0,f=V,x=e.getTextSize(Z,r).width;return w=Dp(j.toEnumIcon(B)),w&&(A=V+$n/2,"center"===X?A+=(b-(Y+x))/2:"right"===X&&(A=A+b-(Y+x)),Ih(n,w,A,y+G/2),f=A+$n/2),r!=H&&(w?Gi(n,r,Z,$,f,y,b-(f-V),G):Gi(n,r,Z,$,V,y,b,G,X)),void 0}return B=j.formatValue(B),B!=H?m===Oo?(Db(n,V,y,b,G,B),void 0):m===Um||!m&&Bm(B)?(w=Dp(B?Of:Nq),Ih(n,w,V+b/2,y+G/2,L,p),void 0):(Gi(n,B,Z,$,V,y,b,G,X),void 0):void 0},Lr=function(q,R){var g=R.view,v=g.getDataModel().getHistoryManager(),I=ie(q),h=R.column||R.property;v&&v.beginInteraction(),R.editor=q,q.info=R,g.setCurrentEditor(q),g.getView().insertBefore(I,g._79O),gp(q,R.editorRect),q.setFocus?q.setFocus():Ao(q),q.commitValue=function(){q._17Q&&(q=q._17Q),g.setValue(R.data,h,q.getValue?q.getValue():q.value),q.close&&q.close(),Mq(I)},h.onEditorCreated&&h.onEditorCreated(R)},_f=function(u,m,c,V,K){var _=Ai(u,c),L=m.value,I=m.view,s=K.getValueType();return _.onblur=_.onchange=function(){I.endEditing()},"input"===u?(L=K.formatValue(L),L!=H&&(_.value=L),_.onkeydown=function(M){oq(M)&&I.endEditing()},(s===Tj||s===ei)&&_.addEventListener(ye,e.numberListener,!1)):u===Xh&&V.forEach(function(k){var g=N.createElement("option");g.innerHTML=K.toEnumLabel(k),g.value=k,K.isEnumEqual(L,k)&&(g.selected=!0),qr(_,g)}),Lr(_,m),_},Pg=j.widget={},Og=function(z,m,l){oc(q+".widget."+z,m,l)};hq(ze,{ms_value:function(o){o.getValue=function(m){var e=this.getItemById(m),J=e.element;return J?J.getValue?J.getValue():J.value:e.selected},o.setValue=function(W,t){var $=this.getItemById(W),T=$.element;T?T.setValue?T.setValue(t):T.value=t:($.selected=t,this.iv())},o.v=function(Z,d){var Y=this;if(2===arguments.length)Y.setValue(Z,d);else{if(!Gb(Z))return Y.getValue(Z);for(var F in Z)Y.setValue(F,Z[F])}return Y}},_46o:function(n){n._icon=H,n._accessType=H,n._valueType=H,n._editable=!1,n._batchEditable=!0,n._align=U,n._nullable=!0,n._emptiable=!1,n.setParent=ej,n.formatValue=function(N){var o=this,B=o._valueType;if(o.getEnumValues())return o.toEnumLabel(N);if(B===Um)return!!N;if(N!=H){if(B===Tj)return y(N);if(Se(N))return yd(N)}return N},n.setEnum=function(D,Y,p,x,M,d){var z=this;D&&D.values&&(x=D.editable,p=D.icons,Y=D.labels,M=D.strict,d=D.maxHeight,D=D.values),Hq(D)&&(D=D._as),Hq(Y)&&(Y=Y._as),Hq(p)&&(p=p._as),z._enumValues=D,z._enumLabels=Y,z._enumIcons=p,z._enumEditable=x,z._enumStrict=M==H?!0:M,z._enumMaxHeight=d,D&&D.length&&Se(D[0])&&(z._valueType=ei),z.fp("enum",!1,!0)
},n.getEnumMaxHeight=function(){return this._enumMaxHeight},n.isEnumEditable=function(){return this._enumEditable},n.getEnumValues=function(){return this._enumValues},n.getEnumLabels=function(){return this._enumLabels},n.getEnumIcons=function(){return this._enumIcons},n.isEnumStrict=function(){return this._enumStrict},n.isEnumEqual=function(U,X){return this._enumStrict?U===X:U==X},n.toEnumLabel=function(E){var r=this,y=r._enumValues,s=r._enumLabels;if(y&&s)for(var t=0;t<y.length;t++)if(r.isEnumEqual(E,y[t]))return s[t];return E},n.toEnumIcon=function(d){var e=this,k=e._enumValues,l=e._enumIcons;if(k&&l)for(var s=0;s<k.length;s++)if(e.isEnumEqual(d,k[s]))return l[s];return x}},_45o:function(H){H._87o=function(O,Y,x,r,v,e){if(O){var C=this,I=C._90I,J=Vb(1);C._columnLineVisible&&(v-=1),C._rowLineVisible&&(e-=1),0>=v||0>=e||(C._90I||(I=C._90I={}),I[Y]||(I[Y]=new yo),gp(J,C.tx()+x,C.ty()+r,v,e),qr(J,O),C._view.insertBefore(J,C._79O),O.onParentAdded&&O.onParentAdded(J),I[Y].add(J))}},H._76o=function(){var z=this,b=z._90I;if(b){for(var A in b)b[A].each(function(n){Mq(n)});delete z._90I}},H._77o=function(c){var O=this;if(O._90I){var E=O._90I[c];E&&(E.each(function(S){Mq(S)}),delete O._90I[c])}}},_47o:function(I){I.getValue=function(w,r){return r.getValue?r.getValue(w,r,this):rn(w,r.getAccessType(),r.getName())},I.setValue=function(U,e,J){if(e.isEmptiable()||""!==J||(J=x),e.isNullable()||J!=H){var Z=this,g=e.getName(),N=e.getAccessType(),X=e.getValueType();X===Tj&&Kf(J)?J=S(J):X===ei&&Kf(J)?J=parseFloat(J):X===Um&&Kf(J)&&(J="true"===J),Z._batchEditable&&e._batchEditable&&Z.isSelected(U)?Z.sm().each(function(U){e.setValue?e.setValue(U,e,J,Z):Pc(U,N,g,J)}):e.setValue?e.setValue(U,e,J,Z):Pc(U,N,g,J)}},I.setCurrentEditor=function(q){this.endEditing(),this._currentEditor=q,this.redraw()},I.isEditing=function(q,j){var I=this,v=I._currentEditor;if(!v)return!1;if(j){var d=v.info;return d?(d.column||d.property)===j&&d.data===q:!1}return!0},I.endEditing=function(){var L=this,c=L._currentEditor,x=L.getDataModel().getHistoryManager();c&&(delete L._currentEditor,c.commitValue&&c.commitValue(c.info),L.redraw(),x&&x.endInteraction())},I.beginEditing=function(u){this.endEditing();var B=this,E=u.column||u.property;if(E.beginEditing)E.beginEditing(u);else{var w=u.data,F=u.value,d=B.getSelectBackground(w),A=E.getEnumValues(),P=E.getSlider(),t=E.getColorPicker();if(P){var J=zl(Pg.Slider,P);return J.setValue(F),J.getView().onblur=function(){B.endEditing()},J.isInstant()&&(J.onValueChanged=function(){B.setValue(w,E,J.getValue())}),Lr(J,u),void 0}if(t||E.getValueType()===Oo){var T=zl(Pg.ColorPicker,t);return T.setValue(F),T.onClosed=function(){B.endEditing()},T.isInstant()&&(T.onValueChanged=function(Q,u){B.setValue(w,E,u)}),Lr(T,u),T.open(),void 0}if(A){if(Pg.ComboBox){var _=new Pg.ComboBox;_.setValue(F),_.setValues(A),_.setLabels(E.getEnumLabels()),_.setIcons(E.getEnumIcons()),_.setEditable(E.isEnumEditable()),_.setStrict(E.isEnumStrict()),_.setMaxHeight(E.getEnumMaxHeight()),_.onClosed=function(){B.endEditing()},Lr(_,u),_.open()}else _f(Xh,u,d,A,E);return}var $=E.getValueType();if($===Um||Bm(F))return B.setValue(w,E,!F),void 0;if(E.getItemEditor()){var Z=Ob(E.getItemEditor()),h=new Z(w,E,B,u),G=h.getView();return G._17Q=h,h.setValue(F),Jo(G),Lr(G,u),h.editBeginning&&h.editBeginning(),void 0}_f("input",u,d,H,E)}}},_44o:function(n){n.init=function(B){var E=this,T=E.th=new wj(B),l=E._view=Vb(1);E.tv=E._tableView=B,qr(l,T.getView()),qr(l,B.getView()),T.mp(function(f){f.property===aq&&E.iv()}),E.iv()},n.getTableView=function(){return this.tv},n.getTableHeader=function(){return this.th},n.getDataModel=function(){return this.tv.dm()},n.getColumnModel=function(){return this.tv.getColumnModel()},n.setColumns=function(D){this.tv.setColumns(D)},n.addColumns=function(v){this.tv.addColumns(v)},n.endEditing=function(){this.tv.endEditing()},n.validateImpl=function(){var J=this,r=J.th,z=bn(r),X={x:0,y:0,width:J.getWidth(),height:z};gp(r,X),X.y=z,X.height=W(0,J.getHeight()-z),gp(J.tv,X)}},ms_vs:function(D){D._41o=function(){return this._29I.height<this._59I},D._43o=function(){var C=this;C._41o()&&(C._58I||(A(function(){C._94O()},Rf),C.iv()),C._58I=new Date)},D._94O=function(){var z=this;if(z._58I){var H=new Date;H.getTime()-z._58I.getTime()>=Rf?(delete z._58I,z.iv()):A(function(){z._94O()},Rf)}},D._93I=function(){var q=this,h=q._27I;if(q._58I||!q._autoHideScrollBar){h||qr(q._79O,h=q._27I=Vb());var B=q._29I,D=B.height,M=q._59I,P=q.getScrollBarSize(),C=B.width-P-2,b=D*(-q.ty()/M),S=D*(D/M),$=h.style;M>D?(Nn>S&&(b=b+S/2-Nn/2,0>b&&(b=0),b+Nn>D&&(b=D-Nn),S=Nn),$.visibility=ue,$.background=q.getScrollBarColor(),$.borderRadius=P/2+sn,gp(h,C,b,P,S)):$.visibility=rr}else h&&(h.style.visibility=rr)}},ms_hs:function(X){X._40o=function(){return this._29I.width<this._91I},X._42o=function(){var E=this;E._40o()&&(E._95O||(A(function(){E._94I()},Rf),E.iv()),E._95O=new Date)},X._94I=function(){var _=this;if(_._95O){var v=new Date;v.getTime()-_._95O.getTime()>=Rf?(delete _._95O,_.iv()):A(function(){_._94I()},Rf)}},X._92I=function(){var I=this,z=I._28I;if(I._95O||!I._autoHideScrollBar){z||qr(I._79O,z=I._28I=Vb());var E=I._29I,J=E.width,X=I._91I,x=I.getScrollBarSize(),h=E.height-x-2,w=J*(-I.tx()/X),n=J*(J/X),o=z.style;X>J?(Nn>n&&(w=w+n/2-Nn/2,0>w&&(w=0),w+Nn>J&&(w=J-Nn),n=Nn),o.visibility=ue,o.background=I.getScrollBarColor(),o.borderRadius=x/2+sn,gp(z,w,h,n,x)):o.visibility=rr}else z&&(z.style.visibility=rr)}}}),$b(Of,rb(16,16,[{type:Un,rect:[1,1,14,14],background:jb},{type:fq,rect:[1,1,14,14],width:1,color:fn},{type:Ad,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),$b(Nq,rb(16,16,{type:fq,rect:[1,1,14,14],width:1,color:fn})),$b(Rd,rb(16,16,[{type:bm,rect:[2,2,12,12],borderWidth:1,borderColor:fn,background:"#FFF"},{type:bm,rect:[4,4,8,8],background:jb}])),$b(od,rb(16,16,{type:bm,rect:[2,2,12,12],borderWidth:1,borderColor:fn})),ze._15Q=function(V){V._29I=he,V._59I=0,V._91I=0,V._5o=function(z){var J=this;J._30I=new yo,J._rows=new yo,J._rowMap={},J._31I=0,J._14I=0,J._view=Vb(1),J._canvas=Lm(J._view),qr(J._view,J._79O=Vb()),J.dm(z?z:new hr)},V.getCheckIcon=function(O){var o=this.sm(),L=o.co(O);return o.sg()?Dp(L?Rd:od):Dp(L?Of:Nq)},V.checkData=function(_){var g=this.sm(),a=g.co(_);g.sg()&&a||(this._32o=1,a?g.rs(_):g.as(_),delete this._32o)},V.getDataAt=function(k){k.target&&(k=this.lp(k));var Z=p(k.y/this._rowHeight),I=this._rows;return 0>Z||Z>=I.size()?H:I.get(Z)},V.onDataDoubleClicked=function(){},V.onDataClicked=function(){},V.adjustTranslateX=function(){return 0},V.adjustTranslateY=function(o){var u=this.getHeight()-this._59I;return u>o&&(o=u),o>0?0:y(o)},V.onPropertyChanged=function(A){var P=this,$=A.property;rq[$]?P.ivm():Yj[$]||P.redraw(),$===cd?P._42o():$===sg&&P._43o()},V.getLabel=function(G){return G.toLabel()},V.getLabelFont=function(){return this._labelFont},V.getLabelColor=function(h){var N=this;if(N.isCheckMode()){if(N._focusData===h)return N._labelSelectColor}else if(N.isSelected(h))return N._labelSelectColor;return N._labelColor},V.getStartRowIndex=function(){return this._31I},V.getEndRowIndex=function(){return this._14I},V.getRowDatas=function(){return this._rows},V.getRowIndex=function(F){return this._rowMap[F._id]},V.getRowSize=function(){return this._rows.size()},V.getViewRect=function(){return ef(this._29I)},V.isVisible=function(g){return this._visibleFunc?this._visibleFunc(g):!0},V.getCurrentSortFunc=function(){return this._sortFunc},V.setDataModel=function(F){var V=this,d=V._dataModel,e=V._3o;d!==F&&(d&&(d.umm(V.handleDataModelChange,V),d.umd(V.handleDataPropertyChange,V),d.umh(V._15o,V),e||d.sm().ums(V._16o,V)),V._dataModel=F,F.mm(V.handleDataModelChange,V),F.md(V.handleDataPropertyChange,V),F.mh(V._15o,V),e?e._21I(F):F.sm().ms(V._16o,V),V.fp("dataModel",d,F))},V.validateModel=function(){var d=this;d._rows.clear(),d._rowMap={},d.buildChildren(d._dataModel._roots);var f=d._rows=d._rows.toList(d.isVisible,d),k=0,M=d.getCurrentSortFunc(),$=f.size();for(M&&f.sort(M);$>k;k++)d._rowMap[f.get(k)._id]=k},V.buildChildren=function(i){var V=this;i.each(function(W){V._rows.add(W),V.buildChildren(W._children)})},V.handleDataModelChange=function(){this.ivm()},V.handleDataPropertyChange=function(L){"parent"===L.property?this.ivm():this.invalidateData(L.data)},V._15o=function(){this.ivm()},V._16o=function(U){U.datas.each(this.invalidateData,this),this.onSelectionChanged(U)},V.onSelectionChanged=function(q){var d=this,C=d.sm();!d.isAutoMakeVisible()||1!==C.size()||"set"!==q.kind&&"append"!==q.kind||d._32o||d.makeVisible(C.ld())},V.makeVisible=function(j){j&&(this._23I=j,this.iv())},V.scrollToIndex=function(k){var o=this,Y=o._29I,m=Y.height,O=o._rowHeight,a=O*k;k>=0&&k<o._rows.size()&&m>0&&(a+O>Y.y+m?o.ty(-a+m-O):a<Y.y&&o.ty(-a))},V.ivm=function(){this.invalidateModel()},V.invalidateModel=function(){var S=this;S._96I||(S._96I=1,S._32I=1,delete S._24I,S.iv())},V.redraw=function(){var d=this;d._32I||(d._32I=1,delete d._24I,d.iv())},V.invalidateData=function(q){var J=this;_?J.redraw():J._32I||(J._24I||(J._24I={}),J._24I[q._id]=q,J.iv())},V.getFocusData=function(){return this._focusData},V.setFocusDataById=function(Y){this.setFocusData(this.dm().getDataById(Y))},V.setFocusData=function(K){var E=this,w=E._focusData;w!==K&&(E._focusData=K,E.fp("focusData",w,K),w&&E.invalidateData(w),K&&(E.invalidateData(K),E.isAutoMakeVisible()&&E.makeVisible(K)))},V.drawRowBackground=function(j,x,z,s,q,o,X){var l=this,G=l.isCheckMode();(x===l._focusData&&G||z&&!G)&&Db(j,s,q,o,X,l.getSelectBackground(x))},V.drawData=function(G,v,W){var n=this,g=n._rowHeight,f=g*W,L=n._29I,U=L.x,O=L.width;G.save(),G.beginPath(),G.rect(U,f,O,g),G.clip(),n._87o(n.drawRow(G,v,n.isSelected(v),U,f,O,g),W,U,f,O,g),G.restore(),n._rowLineVisible&&Db(G,U,f+g-1,O,1,n._rowLineColor)},V._12I=function(j){var W=this,Q=W._31I,e=W._29I,d=e.x,O=e.y,y=e.width,i=e.height;for(j.beginPath(),j.rect(d,O,y,i),j.clip(),j.clearRect(d,O,y,i),W._76o(),W._93db(j);Q<W._14I;Q++)W.drawData(j,W._rows.get(Q),Q);W._92db(j)},V._13I=function(J){for(var A,Q=this,c=Q._rowHeight,h=Q._29I,R=h.x,Y=h.width,S=Q._31I,w=Q._30I;S<Q._14I;S++)A=Q._rows.get(S),Q._24I[A._id]&&w.add({data:A,index:S});w.isEmpty()||(J.beginPath(),w.each(function(F){J.rect(R,F.index*c,Y,c)}),J.clip(),w.each(function(Q){J.clearRect(R,Q.index*c,Y,c)}),w.each(function(f){Q._77o(f.index)}),Q._93db(J),w.each(function(t){Q.drawData(J,t.data,t.index)}),Q._92db(J),w.clear())},V.validateImpl=function(){var D=this,I=D._canvas,c=D.getWidth(),F=D.getHeight(),l=D._rowHeight,S=D._32I;(c!==I.clientWidth||F!==I.clientHeight)&&(Fe(I,c,F),S=1),D._96I&&D.validateModel();var O=D._29I,e={x:-D.tx(),y:-D.ty(),width:c,height:F},J=D._rows.size(),u=Qi(I),h=D._23I;S||Pr(e,O)||(S=1),D._29I=e,D._59I=J*l,D._31I=p(e.y/l),D._14I=v((e.y+e.height)/l),D._31I<0&&(D._31I=0),D._14I>J&&(D._14I=J),D._99I&&S&&D._99I(),pf(u,D.tx(),D.ty(),1),S?D._12I(u):D._24I&&D._13I(u),D._93I(),D._92I(),u.restore(),D._32I=D._24I=D._96I=H,h&&(D.scrollToIndex(D.getRowIndex(h)),delete D._23I),D.tx(D.tx()),D.ty(D.ty())}},ze._48o=function(x){x._rootVisible=!0,x._rootData=H,x._35o=function(){this._expandMap={},this._levelMap={}},x.validateModel=function(){var c=this,P=c._rootData;c._rows.clear(),c._levelMap={},c._rowMap={},c._currentLevel=0,P?c._rootVisible?c.isVisible(P)&&c.buildData(P):c.buildChildren(P):c.buildChildren(),delete c._currentLevel},x.buildData=function(M){var m=this,j=M._id,l=m._rows;m._rowMap[j]=l.size(),l.add(M),m._levelMap[j]=m._currentLevel,m.isExpanded(M)&&(m._currentLevel++,m.buildChildren(M),m._currentLevel--)},x.buildChildren=function(e){var f=this,Z=e?e._children:f._dataModel._roots,c=f.getCurrentSortFunc();c&&f.isChildrenSortable(e)?Z.toList(f.isVisible,f).sort(c).each(f.buildData,f):Z.each(function(L){f.isVisible(L)&&f.buildData(L)})},x.getLevel=function(F){return this._levelMap[F._id]},x.getToggleIcon=function($){var P=this,a=P._loader,o=P._collapseIcon;return a&&!a.isLoaded($)?o:$.hasChildren()?P.isExpanded($)?P._expandIcon:o:H},x.isCheckMode=function(){return this._checkMode!=H},x.isChildrenSortable=function(){return!0},x.handleDataModelChange=function(Q){var A=this;Q.kind===Sq?delete A._expandMap[Q.data._id]:Q.kind===In&&(A._expandMap={}),A.ivm()},x.toggle=function(z){var q=this;q.isExpanded(z)?q.collapse(z):q.expand(z)},x.isExpanded=function(f){return 1===this._expandMap[f._id]},x.expand=function(b){var V=this,x=V._loader;V.isExpanded(b)||(x&&!x.isLoaded(b)&&x.load(b),V._expandMap[b._id]=1,V.ivm(),V.onExpanded(b))},x.onExpanded=function(){},x.collapse=function(l){var R=this;R.isExpanded(l)&&(delete R._expandMap[l._id],R.ivm(),R.onCollapsed(l))},x.onCollapsed=function(){},x.expandAll=function(){var M=this;M._dataModel.each(function(L){L.hasChildren()&&(M._expandMap[L._id]=1)}),M.ivm()},x.collapseAll=function(){this._expandMap={},this.ivm()},x.makeVisible=function(W){if(W){var P=this;if(!P._rootData||W.isDescendantOf(P._rootData)){for(var c=W._parent;c;)P.expand(c),c=c._parent;P._23I=W,P.iv()}}},x.checkData=function(s){var l,v=this,A=v._checkMode,N=v.sm(),g=N.co(s);if(!N.sg()||!g){if(v._32o=1,A===T)g?N.rs(s):N.as(s);else if(A===ak)l=new yo(s),l.addAll(s._children);else if("descendant"===A)l=new yo,Qb(s,l);else if("all"===A&&(l=new yo,Qb(s,l),!g))for(var k=s._parent;k;)l.add(k),k=k._parent;l&&(g?N.rs(l):N.as(l)),delete v._32o}},x._97I=function(x,s,p,r,i,h,d){var A=this,E=A._indent,G=A._levelMap[s._id],Y=A.getIconWidth(s),l=Dp(A.getToggleIcon(s));l?(r+=E*G,Ih(x,l,r+E/2,i+d/2,s,A),r+=E):r+=E*(G+1),A._checkMode&&(Ih(x,A.getCheckIcon(s),r+E/2,i+d/2,s,A),r+=E),A.drawIcon(x,s,r,i,Y,d),A.drawLabel(x,s,r+Y,i,d)}},ze._14Q=function(W){W.getIcon=function(t){return t.getIcon()},W.getIconWidth=function(A){return this.getIcon(A)?this._indent:0},W.drawIcon=function(K,S,p,x,n,I){if(n){var R=this,u=R.getBodyColor(S),U=Dp(R.getIcon(S),u);U&&(I-=R.isRowLineVisible()?1:0,gd(K,U,Cp,p,x,n,I,S,R,u),Jr(K,R.getBorderColor(S),p,x,n,I))}},W.drawLabel=function(I,c,x,v,b){var X=this;Gi(I,X.getLabel(c),X.getLabelFont(c),X.getLabelColor(c),x,v,0,b)}},ze._50o=function(R){R._98I=function(){var b=this,w=b._39o=new hr;b._60I=new yo,w.mm(b._17o,b),w.md(b._18o,b),w.mh(b._19o,b)},R.setColumns=function(R){this._39o.clear(),this.addColumns(R)},R.addColumns=function(M){var g=this._39o;M.forEach(function(G){if(!(G instanceof vl)){var s=Ob(G.className);G=zl(s?s:vl,G)}g.add(G)})},R.onColumnClicked=function(){},R.onCheckColumnClicked=function(){},R._3Q=function(o){for(var q,f=0,T=this._60I,d=T.size();d>f;f++)if(q=T.get(f),q.column===o)return q;return H},R.getColumnAt=function(t){var G=this._4Q(t);return G?G.column:H},R._4Q=function(M){for(var l=this,R=M.target?l.lp(M).x:M.x,P=l._60I,p=0;p<P.size();p++){var r=P.get(p),f=r.startX;if(R>=f&&R<f+r.column.getWidth())return r}return H},R.getToolTip=function(F){var l=this,C=l.getDataAt(F),p=l.getColumnAt(F);return C&&p?p.getToolTip(C,l):H},R.adjustTranslateX=function(T){var U=this.getWidth()-this._91I;return U>T&&(T=U),T>0?0:y(T)},R._99I=function(){var g=this,L=g._29I,h=g._60I;h.clear(),g._91I=0,g._39o._roots.each(function(Z){if(Z.isVisible()){var J=g._91I+Z.getWidth();g._91I<=L.x+L.width&&J>=L.x&&h.add({column:Z,startX:g._91I}),g._91I=J}})},R.drawData=function(p,o,g){var z=this,a=z._rowHeight,H=a*g,y=z.isSelected(o),n=z._29I,$=n.x,d=n.width;z.drawRowBackground(p,o,y,$,H,d,a),z._60I.each(function(Y){var C=Y.column,M=Y.startX,P=C.getWidth();P>0&&!z.isEditing(o,C)&&(p.save(),p.beginPath(),p.rect(M,H,P,a),p.clip(),z._87o(z.drawCell(p,o,y,C,M,H,P,a),g,M,H,P,a),z._columnLineVisible&&Db(p,M+P-1,H,1,a,z._columnLineColor),p.restore())}),z._rowLineVisible&&Db(p,$,H+a-1,d,1,z._rowLineColor)},R.drawCell=function(m,V,y,E,z,p,b,_){var d=this;if(E.drawCell)return E.drawCell(m,V,y,E,z,p,b,_,d);var o=d.getValue(V,E);Uk(m,o,E,d.getLabelFont(V,E,o),d.getLabelColor(V,E,o),z,p,b,_,V,d)},R.getColumnModel=function(){return this._39o},R._17o=function(){this.redraw()},R._18o=function(C){var R=this;C.data===R._sortColumn&&es[C.property]?R.ivm():(R._42o(),R.redraw())},R._19o=function(){this.redraw()},R.getCurrentSortFunc=function(){var c=this,w=c._sortColumn;if(w&&w.isSortable()){var W=w.getSortFunc(),v=ib===w.getSortOrder()?1:-1;return W||(W=ae),function(Y,z){return W.call(c,c.getValue(Y,w),c.getValue(z,w),Y,z)*v}}return c._sortFunc},R.isCellEditable=function(W,Z){return Z.isEditable()&&this.isEditable()},R._37O=function(y,i){if(Ue(i))for(var v=this,J=v.lp(i),b=v._60I,j=v._rowHeight,Z=v._29I,S=Z.x,G=Z.y,C=Z.width,l=Z.height,x=0;x<b.size();x++){var p=b.get(x),w=p.startX,k=p.column,B=k.getWidth();if(k!==v._31o&&k!==v._4o&&v.isCellEditable(y,k)&&J.x>=w&&J.x<w+B){var L={x:w,y:v.getRowIndex(y)*j,width:B,height:j},$={x:L.x+v.tx(),y:L.y+v.ty(),width:L.width,height:L.height},V=0,I=0;return L.x<S?V=L.x-S:L.x+L.width>S+C&&(V=L.x+L.width-S-C),V&&(v.tx(v.tx()-V),$.x-=V),L.y<G?I=L.y-G:L.y+j>G+l&&(I=L.y+j-G-l),I&&(v.ty(v.ty()-I),$.y-=I),v.beginEditing({data:y,column:k,value:v.getValue(y,k),event:i,rect:L,editorRect:$,view:v}),void 0}}}},Pg.BaseItemEditor=function(O,f,q,N){this._data=O,this._column=f,this._master=q,this._editInfo=N},Og("BaseItemEditor",O,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var ac=j.Tab=function(){yi(ac,this)};Ae("Tab",Tk,{ms_ac:["view","closable","disabled"],_icon:H,_closable:!1,_disabled:!1,setParent:ej});var vl=j.Column=function(){yi(vl,this)};Ae("Column",Tk,{_46o:1,ms_ac:["accessType","valueType",ue,us,Ed,wd,"align",Oo,"sortOrder",xg,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:ib,_sortFunc:H,_sortable:!0,setWidth:function(c){16>c&&(c=16);var E=this._width;this._width=c,this.fp(wd,E,c)},getToolTip:function(k,I){return this.formatValue(I.getValue(k,this))}});var tm=j.Property=function(){yi(tm,this)};Ae("Property",Tk,{_46o:1,ms_ac:["accessType","valueType",us,Ed,"categoryName",Oo,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:H,getToolTip:function(U,L,v){var r=this;return L?r.formatValue(v.getValue(U,r)):v.getPropertyName(r)}}),Pg.AccordionView=function(){var k=this;k._20o={},k._21o=new yo,k._10o=H,k._9o=H,k._11o=H,k._view=Vb(),k.iv()},Og("AccordionView",O,{ms_v:1,ms_fire:1,ms_ac:[Hk,Mf,"titleHeight",Vq,ke,"titleBackground","selectWidth",Li,"orientation","separatorColor"],_expandIcon:e.accordionViewExpandIcon,_collapseIcon:e.accordionViewCollapseIcon,_titleHeight:bp,_labelColor:e.accordionViewLabelColor,_labelFont:e.accordionViewLabelFont,_titleBackground:e.accordionViewTitleBackground,_selectBackground:e.accordionViewSelectBackground,_selectWidth:e.accordionViewSelectWidth,_orientation:"v",_separatorColor:e.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(n,N,P,p){var W=this,S=Vb();if(W._20o[n])throw n+" already exists";S.onmousedown=Cg,S.style.cursor=Kp,S.addEventListener(h?Rg:Uo,function(T){Cg(T)},!1),S.addEventListener(h?Zj:xc,function(q){Cg(q),Ue(q)&&(W._10o===n?W.collapse():W.expand(n))},!1),qr(W._view,S),W._20o[n]={content:N,div:S,canvas:Lm(S),icon:p},W._21o.add(n),P&&W.expand(n),W.iv()},remove:function(v){var r=this,_=r._20o[v];_&&(Mq(_.div),delete r._20o[v],r._21o.remove(v),r.iv())},clear:function(){var p=this;p._20o={},p._21o.clear(),p.iv()},isExpanded:function(p){return this._10o===p},expand:function(W){var z=this;z._20o[W]&&z._10o!==W&&(z._10o=W,z.onExpanded(W),z.iv())},onExpanded:function(){},collapse:function(){var Z=this;Z._10o&&(Z.onCollapsed(Z._10o),delete Z._10o,Z.iv())},onCollapsed:function(){},initCanvas:function(K,M,J){Fe(K,M,J);var r=Qi(K);return pf(r,0,0,1),r.clearRect(0,0,M,J),r},drawTitle:function(p,U,E,O,k){var g=this,m=Dp(k.icon),Y=g.isExpanded(U),J=g._titleHeight,T=g._titleBackground,G=g._selectWidth,C=g._separatorColor,s=Dp(Y?g._expandIcon:g._collapseIcon),K=G+4;Db(p,0,0,E,O,T),Y&&G&&Db(p,0,0,G,O,g._selectBackground),(Y||g._21o.get(g._21o.size()-1)!==U)&&Db(p,0,O-1,E,1,C?C:Go(T)),m&&(Ih(p,m,K+Dn(m)/2,J/2),K+=Dn(m)+2),Gi(p,U,g.getLabelFont(U),g.getLabelColor(U),K,0,0,J),s&&Ih(p,s,E-Dn(s)/2-4,J/2)},validateImpl:function(){var Q=this,z=Q._view,T=0,j=0,H=Q.getWidth(),b=Q.getHeight(),A=Q._titleHeight,i=Q._21o.size()*A,f=Q._11o,X=Q._9o;delete Q._11o,delete Q._9o,Q._21o.each(function(X){var q,G,z=Q._20o[X],g=z.content,k=Q._10o===X;Kl(Q)?(gp(z.div,T,0,A,b),q=Q.initCanvas(z.canvas,A,b),Vj(q,0,b),pd(q,-K),Q.drawTitle(q,X,b,A,z),q.restore(),k?(G=W(0,H-i),g&&(Q._11o=g,Q._9o=ie(g),gp(g,T+A,0,G,b)),T+=A+G):T+=A):(gp(z.div,0,j,H,A),q=Q.initCanvas(z.canvas,H,A),Q.drawTitle(q,X,H,A,z),q.restore(),k?(G=W(0,b-i),g&&(Q._11o=g,Q._9o=ie(g),gp(g,0,j+A,H,G)),j+=A+G):j+=A)});var y=Q._9o;f&&f!==Q._11o&&f.endEditing&&f.endEditing(),y&&y!==X&&qr(z,y),X&&X!==y&&Mq(X)}}),Pg.SplitView=function(w,_,f,$){var r=this,u=r._dividerDiv=Vb(),T=r._60O=Lm(),s=r._61O=Lm(),n=T.style,F=s.style;r._view=Vb(1),qr(r._view,u),n.msTouchAction=qp,n.pointerEvents=qp,n.cursor=Kp,F.msTouchAction=qp,F.pointerEvents=qp,F.cursor=Kp,w&&r.setLeftView(w),_&&r.setRightView(_),f&&r.setOrientation(f),$!=H&&r.setPosition($),r.setStatus(Eb),new We(r)},Og("SplitView",O,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:e.splitViewDividerSize,_dividerBackground:e.splitViewDividerBackground,_dragOpacity:e.splitViewDragOpacity,_toggleIcon:e.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(v,k){var Y=this,b=Y._position;isNaN(v)||(k||(Y._82O=0>v?-1:v>1?1:0),Y._position=v,Y.fp(Fm,b,v))},getLeftView:function(){return this._leftView},setLeftView:function(x){var G=this,W=G._leftView,Y=G._view;if(G._leftView!==x){if(W&&W!==G._rightView){var J=ie(W);J.parentNode===Y&&Mq(J)}if(G._leftView=x,x){var z=ie(x);z.parentNode!==Y&&Y.insertBefore(z,G._dividerDiv)}G.fp("leftView",W,x)}},getRightView:function(){return this._rightView},setRightView:function(v){var w=this,Q=w._rightView,g=w._view;if(w._rightView!==v){if(Q&&Q!==w._leftView){var t=ie(Q);t.parentNode===g&&Mq(t)}if(w._rightView=v,v){var H=ie(v);H.parentNode!==g&&g.insertBefore(H,w._dividerDiv)}w.fp("rightView",Q,v)}},validateImpl:function(){var z=this,N=z._draggable,O=z._position,P=z.getWidth(),A=z.getHeight(),d=z._dividerSize,L=z._dividerBackground,S=h?18:8,m=z._dividerDiv,C=z._82O,q=z._60O,T=z._61O,_=z._toggleIcon,k=z._status,c=m.style,f=null,E=h?20:4,g=_.comps[0];d>=S||0===d?z._coverDiv&&(Mq(z._coverDiv),delete z._coverDiv):z._coverDiv||(z._coverDiv=Vb(),Z&&(z._coverDiv.style.background=un),qr(m,z._coverDiv)),z._togglable?q.parentNode||(qr(m,q),qr(m,T)):(Mq(q),Mq(T));var l=z._coverDiv,v=z._leftView,J=z._rightView;if(Kl(z)){if(d>P&&(d=P),k===Eb)if(1===C)var D=O,e=W(0,P-d-D);else-1===C?(e=-O,D=W(0,P-d-e)):(D=y((P-d)*O),e=W(0,P-d-D));else"cl"===k?(D=0,e=W(0,P-d)):"cr"===k&&(e=0,D=W(0,P-d));v&&gp(v,0,0,D,A),J&&gp(J,D+d,0,e,A),gp(m,D,0,d,A),z._22o=D,l&&(gp(l,d/2-S/2,0,S,A),l.style.cursor=N?Jb:""),m.style.cursor=N?Jb:"";var X=m.clientHeight/2,p=m.clientWidth;Fe(q,p,p),gp(q,0,X-p-E,p,p),f=Qi(q),pf(f,0,0,1),g.rotation=-K,Xj(f,_,0,0,p,p),f.restore(),Fe(T,p,p),gp(T,0,X+E,p,p),f=Qi(T),pf(f,0,0,1),g.rotation=K,Xj(f,_,0,0,p,p),f.restore()}else{if(d>A&&(d=A),k===Eb)if(1===C)var I=O,s=W(0,A-d-I);else-1===C?(s=-O,I=W(0,A-d-s)):(I=y((A-d)*O),s=W(0,A-d-I));else"cl"===k?(I=0,s=W(0,A-d)):"cr"===k&&(s=0,I=W(0,A-d));v&&gp(v,0,0,P,I),J&&gp(J,0,I+d,P,s),gp(m,0,I,P,d),z._22o=I,l&&(gp(l,0,d/2-S/2,P,S),l.style.cursor=N?Oi:""),c.cursor=N?Oi:"";var B=m.clientWidth/2,p=m.clientHeight;Fe(q,p,p),gp(q,B-p-E,0,p,p),f=Qi(q),pf(f,0,0,1),g.rotation=0,Xj(f,_,0,0,p,p),f.restore(),Fe(T,p,p),gp(T,B+E,0,p,p),f=Qi(T),pf(f,0,0,1),g.rotation=G,Xj(f,_,0,0,p,p),f.restore()}c.background=L}});var We=function(z){this.sv=z,this.addListeners()};oc(We,O,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(K){var s=this,e=s.sv,x=e._dividerDiv,$=e._60O,f=e._61O,M=e._status,H=K.target;if(H===$)M===Eb?e.setStatus("cl"):"cr"===M&&e.setStatus(Eb);else if(H===f)M===Eb?e.setStatus("cr"):"cl"===M&&e.setStatus(Eb);else if(ve(K)&&(H===x||H===e._coverDiv)&&(Cg(K),e.isDraggable())){s.resizeDiv=Vb();var r=s.resizeDiv.style,h=x.style,b=e.getLeftView(),y=e.getRightView();s._maskViews=[],[b,y].forEach(function(m){m=m.getView?m.getView():m;var g=Vb(),u=g.style;u.left=m.style.left,u.top=m.style.top,u.width=m.offsetWidth+"px",u.height=m.offsetHeight+"px",e.getView().appendChild(g),s._maskViews.push(g)}),r.left=h.left,r.top=h.top,r.width=h.width,r.height=h.height,r.opacity=e.getDragOpacity(),r.background=e.getDividerBackground(),s._85o=s._86o=Kl(e)?Ok(K).x:Ok(K).y,qr(s.getView(),s.resizeDiv),s._clientPoint=Ok(K),ce(s,K)}},handleWindowTouchMove:function(V){if(ve(V)){var I=this,W=I.sv,A=W._dividerSize,Y=I.resizeDiv.style,w=W.getWidth(),r=W.getHeight(),E=W._22o-I._86o;Kl(W)?(I._85o=Ok(V).x,E+=I._85o,E>w-A&&(E=w-A),0>E&&(E=0),Y.left=E+sn):(I._85o=Ok(V).y,E+=I._85o,E>r-A&&(E=r-A),0>E&&(E=0),Y.top=E+sn)}},handleWindowTouchEnd:function(V){var I=this,c=I.sv,Z=c._22o-I._86o+I._85o,P=c._dividerSize,r=Kl(c)?c.getWidth():c.getHeight(),g=c._82O,W=Io(I._clientPoint,Ok(V));W>1&&(c.setStatus(Eb),0>Z&&(Z=0),Z>r-P&&(Z=r-P),r!==P&&(1===g?c.setPosition(Z,1):-1===g?c.setPosition(Z-r+P,1):c.setPosition(Z/(r-P),1))),I._maskViews&&I._maskViews.forEach(function(I){Mq(I)}),Mq(I.resizeDiv),I.resizeDiv=I._85o=I._clientPoint=H},handle_mousedown:function(o){Ue(o)&&this.handle_touchstart(o)},handleWindowMouseMove:function(I){this.handleWindowTouchMove(I)},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)}}),Pg.TabView=function(){var o=this,D=o._view=Vb(1),R=o._91O=Vb(1),J=o._tabModel=new hr,e=J.sm(),p=o.invalidate;o._7o=new yo,o._canvas=Lm(R),qr(D,R),qr(D,o._92O=Vb(1)),e.setSelectionMode(M),e.ms(p,o),J.mm(p,o),J.md(p,o),J.mh(p,o),new $i(o),o.iv()},Og("TabView",O,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Vq,ke,"tabBackground","selectWidth",Li,"moveBackground","insertColor"],_tabPosition:Ol,_tabHeight:bp,_tabGap:e.tabViewTabGap,_labelColor:e.tabViewLabelColor,_labelFont:e.tabViewLabelFont,_tabBackground:e.tabViewTabBackground,_selectWidth:e.tabViewSelectWidth,_selectBackground:e.tabViewSelectBackground,_moveBackground:e.tabViewMoveBackground,_insertColor:e.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(M,A,e){var W=new ac,Z=this._tabModel;return W.setName(M),W.setView(A),Z.add(W),e&&Z.sm().ss(W),W},getLabel:function(N){return N.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(g){this._23o=g,this.iv()},get:function(q){var U=this,y=U._tabModel;if(Se(q))return y._roots.get(q);if(Kf(q)){var f;return y.each(function(V){q===U.getLabel(V)&&(f=V)}),f}return q instanceof ac?q:H},select:function(l){this._tabModel.sm().ss(this.get(l))},remove:function(O){var _=this;if(O=_.get(O)){var b=_._tabModel,s=b._roots.indexOf(O);_._tabModel.remove(O),_._12Q(--s)}},getCurrentTab:function(){return this._8o},hideTabView:function(R,S){S.parentNode===this._92O&&(Aj(S)?(S.style.display=nq,S._tab_=R):Mq(S),Ti())},showTabView:function(X,n){Aj(n)&&(n.style.display="block",n._tab_=X),n.parentNode!==this._92O&&(qr(this._92O,n),Ti())},_24o:function(){var p,c=this,s=c._8o,x=c._9o,z=c._tabModel.sm().ld();z&&(p=ie(z.getView())),p!==x&&(x&&(s.getView().endEditing&&s.getView().endEditing(),c.hideTabView(s,x)),p&&c.showTabView(z,p)),c._8o=z,c._9o=p,s!==z&&c.onTabChanged(s,z)},onTabChanged:function(){},onTabClosed:function(P,j){this._12Q(--j)},_12Q:function(G){var l=this,P=l._tabModel,$=P.size();if($&&!P.sm().ld()){G==H&&(G=0),G>=$&&(G=$-1),0>G&&(G=0);for(var I=G;I>=0;I--){var o=l.get(I);if(!o.isDisabled())return l.select(o),o}for(I=G+1;$>I;I++)if(o=l.get(I),!o.isDisabled())return l.select(o),o}},_9Q:function(t){var z=4,T=Dp(t.getIcon());T&&(z+=Dn(T,t)+4);var V=this.getLabel(t);return V&&(z+=Yb(this.getLabelFont(t),V).width+4),t.isClosable()&&(z+=10),z},_10Q:function(Y,d,y,a,e,B,Q){var x,_=this,r=_._tabPosition,g=y+4,o=_._selectWidth,N=Dp(d.getIcon()),n=d.isDisabled(),C=_.getLabelColor(d),P=_.getLabelFont(d),R=_.getLabel(d),u=_._selectBackground,s=r===U+"-vertical",t=r===X+"-vertical";(s||t)&&(g=a+4),n&&(Y.globalAlpha=Mk),Db(Y,y,a,e,B,Q),d===_._8o&&o&&(r===Ol?Db(Y,y,a+B-o,e,o,u):r===U?Db(Y,y+e-o,a,o,B,u):r===X?Db(Y,y,a,o,B,u):s?Db(Y,y+e-o,a,o,B,u):t?Db(Y,y,a,o,B,u):Db(Y,y,a,e,o,u));var O=e/2;if(s&&(Vj(Y,O,a+B/2),pd(Y,G),Vj(Y,-O,-a-B/2)),N){var D=Kc(N,d),J=Dn(N,d);if(s||t){var F=y+e/2,M=g+D/2;Vj(Y,F,M),pd(Y,K),Vj(Y,-F,-M),Ih(Y,N,y+e/2,g+D/2,d,_),Vj(Y,F,M),pd(Y,-K),Vj(Y,-F,-M),g+=D+4}else Ih(Y,N,g+J/2,a+B/2,d,_),g+=J+4}return s||t?(Vj(Y,e/2,g+e/2),pd(Y,K),Vj(Y,-e/2,-g-e/2),Gi(Y,R,P,C,y,g,B,e),Vj(Y,e/2,g+e/2),pd(Y,-K),Vj(Y,-e/2,-g-e/2)):Gi(Y,R,P,C,g,a,e,B),s&&(Vj(Y,O,a+B/2),pd(Y,-G),Vj(Y,-O,-a-B/2)),d.isClosable()&&(Y.strokeStyle=C,Y.lineWidth=1,Y.beginPath(),t?(Y.moveTo(y+e-10,a+B-4),Y.lineTo(y+e-4,a+B-10),Y.moveTo(y+e-4,a+B-4),Y.lineTo(y+e-10,a+B-10),Y.stroke(),x={x:y+e-12,y:a+B-12,width:12,height:12}):(Y.moveTo(y+e-10,a+4),Y.lineTo(y+e-4,a+10),Y.moveTo(y+e-4,a+4),Y.lineTo(y+e-10,a+10),Y.stroke(),x={x:y+e-12,y:a,width:12,height:12})),n&&(Y.globalAlpha=1),x},validateImpl:function(){var h=this;h._24o();var I,Q=h._canvas,y=h._tabPosition,g=h._91O,V=h._92O,w=h._tabModel,f=h.getWidth(),M=h.getHeight(),P=h._tabHeight,B=h._7o,p=h._tabGap,T=y===Ol,R=y===U,Z=y===Ko,l=y===X,s=y===U+"-vertical",u=y===X+"-vertical",x=h._23o,m=0;if((R||l)&&w._roots.each(function(e){m=W(h._9Q(e),m)}),T?(gp(g,0,0,f,P),I={x:0,y:P,width:f,height:W(0,M-P)}):R?(gp(g,0,0,m,M),I={x:m,y:0,width:W(0,f-m),height:M}):l?(gp(g,f-m,0,m,M),I={x:0,y:0,width:W(0,f-m),height:M}):s?(gp(g,0,0,P,M),I={x:P,y:0,width:W(0,f-P),height:M}):u?(gp(g,f-P,0,P,M),I={x:0,y:0,width:W(0,f-P),height:M}):(gp(g,0,M-P,f,P),I={x:0,y:0,width:f,height:W(0,M-P)}),gp(V,I),s||u){h._9o&&(I.x=0,gp(h._8o.getView(),I)),Fe(Q,P,M);var i=Qi(Q),e=0;if(pf(i,0,h.ty(),1),i.clearRect(0,0,P,M),B.clear(),w._roots.each(function(t){var g,w=h._9Q(t);x&&x.tab===t||(g=h._10Q(i,t,0,e,P,w,h._tabBackground),g&&u&&(g.x=f-12)),B.add({_75o:g,tab:t,startY:e,endY:e+w,height:w}),e+=w+p}),h._23Q=W(0,e-p),x){var q=x.position;h._10Q(i,x.tab,0,x.startY,P,x.height,h._moveBackground),Db(i,0,q,P,1,h._insertColor)}i.restore(),h.ty(h.ty())}else if(R||l){h._9o&&(I.x=0,gp(h._8o.getView(),I)),Fe(Q,m,M);var i=Qi(Q),e=0;if(pf(i,0,h.ty(),1),i.clearRect(0,0,m,M),B.clear(),w._roots.each(function(Q){var G;x&&x.tab===Q||(G=h._10Q(i,Q,0,e,m,P,h._tabBackground),G&&l&&(G.x=f-12)),B.add({_75o:G,tab:Q,startY:e,endY:e+P,height:P}),e+=P+p}),h._23Q=W(0,e-p),x){var q=x.position;h._10Q(i,x.tab,0,x.startY,m,x.height,h._moveBackground),Db(i,0,q,m,1,h._insertColor)}i.restore(),h.ty(h.ty())}else{h._9o&&(I.y=0,gp(h._8o.getView(),I)),Fe(Q,f,P);var i=Qi(Q),D=0;if(pf(i,h.tx(),0,1),i.clearRect(0,0,f,P),B.clear(),w._roots.each(function(T){var H,o=h._9Q(T);x&&x.tab===T||(H=h._10Q(i,T,D,0,o,P,h._tabBackground),H&&Z&&(H.y=M-P)),B.add({_75o:H,tab:T,startX:D,endX:D+o,width:o}),D+=o+p}),h._64I=W(0,D-p),x){var q=x.position;h._10Q(i,x.tab,x.startX,0,x.width,P,h._moveBackground),tp(i,h._insertColor,q,0,P)}i.restore(),h.tx(h.tx())}for(var c=[],H=V.children,j=0;j<H.length;j++){var o=H[j],Y=o._tab_;Y&&!w.contains(Y)&&c.push(o)}c.forEach(function(U){V.removeChild(U)})}});var $i=function(_){this.tv=_,this.addListeners()};oc($i,O,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(S){this.handleScroll(S,10*(S.wheelDelta/40))},handle_DOMMouseScroll:function(K){this.handleScroll(K,10*-K.detail)},handleScroll:function(D,F){Cg(D);var l=this.tv,B=l._tabPosition;!l._40o()||B!==Ol&&B!==Ko||l.tx(this.tv.tx()+F),!l._41o()||B!==U&&B!==X&&B!==U+"-vertical"&&B!==X+"-vertical"||l.ty(this.tv.ty()+F)},_8Q:function(K){var T,y,D=this.tv,$=D._tabPosition,F=D._7o;
if($===Ol||$===Ko){var n=D.lp(K).x;for(T=0;T<F.size();T++)if(y=F.get(T),y.startX<=n&&n<=y.endX)return y}else if($===U||$===X||$===U+"-vertical"||$===X+"-vertical"){var g=D.lp(K).y;for(T=0;T<F.size();T++)if(y=F.get(T),y.startY<=g&&g<=y.endY)return y}return H},isClickable:function(h){var I=this.tv,p=I._tabPosition,W=this._73o=this._8Q(h);return!I._40o()||p!==Ol&&p!==Ko?!I._41o()||p!==U&&p!==X&&p!==U+"-vertical"&&p!==X+"-vertical"?W&&(!W.tab.isDisabled()||I.isMovable()):!0:!0},handle_mousemove:function(R){var v=this;Oe?v._74o=v._8Q(R):v.getView().style.cursor=v.isClickable(R)?Kp:""},handle_mousedown:function(P){this.handle_mousemove(P),this.handle_touchstart(P)},handle_touchstart:function(Z){var K=this,D=K.tv,e=D._tabPosition;Cg(Z),K.isClickable(Z)&&(e===Ol||e===Ko?(K.x=Ok(Z).x,K.lp=D.lp(Z),K.tx=D.tx()):(K.y=Ok(Z).y,K.lp=D.lp(Z),K.ty=D.ty()),ce(K,Z))},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(V){var K,h=this,c=h.tv,y=c._tabPosition,T=h._73o;if(y===Ol||y===Ko){if(K=Ok(V).x-h.x,!h._25o&&!h.moving&&t(K)>2&&(c._40o()&&!Ji(V)?h._25o=1:T&&c.isMovable()&&(h.moving=1)),h._25o)c.tx(h.tx+K);else if(h.moving){var R=h.lp.x+K,g=c._tabGap/2;c._7o.each(function(k){var z=k.endX,h=R-k.startX<z-R;R>=k.startX&&z>=R&&c._7Q({tab:T.tab,startX:T.startX+K,width:T.width,front:h,insertTab:k.tab,position:h?W(0,k.startX-g):P(c._64I,z+g)})})}}else if(K=Ok(V).y-h.y,!h._25o&&!h.moving&&t(K)>2&&(c._41o()&&!Ji(V)?h._25o=1:T&&c.isMovable()&&(h.moving=1)),h._25o)c.ty(h.ty+K);else if(h.moving){var $=h.lp.y+K,g=c._tabGap/2;c._7o.each(function(t){var E=t.endY,y=$-t.startY<E-$;$>=t.startY&&E>=$&&c._7Q({tab:T.tab,startY:T.startY+K,height:T.height,front:y,insertTab:t.tab,position:y?W(0,t.startY-g):P(c._23Q,E+g)})})}},handleWindowMouseUp:function(q){this.handleWindowTouchEnd(q)},handleWindowTouchEnd:function(){var K=this,r=K.tv,l=r._tabPosition,u=r.getTabModel(),h=u._roots,g=K._73o;if(K.moving){var q=r._23o;if(q&&q.insertTab!==q.tab){var D=q.tab,M=h.remove(D),E=h.indexOf(q.insertTab);E>=0&&(q.front||E++,E<=h.size()&&(h.add(D,E),u._38I(D,M,E)))}r._7Q(H),delete K.moving}else if(!K._25o&&g){D=g.tab;var S=K._74o;if(!S||S.tab===D)if(!D.isDisabled()&&ap(g._75o,K.lp)){var i=h.indexOf(D);u.remove(D),r.onTabClosed(D,i)}else D.isDisabled()||r._8o===D||u.sm().ss(D)}K._25o=K._73o=K._74o=l===Ol||l===Ko?K.x=K.lp=K.tx=H:K.y=K.lp=K.ty=H}}),Pg.PropertyView=function(H){var c=this;c._view=Vb(1),c._canvas=Lm(c._view),qr(c._view,c._79O=Vb()),c._rows=new yo,c._28o=new yo,c._26o={},c._26Q={};var O=c._propertyModel=new hr,G=c.ivm;O.mm(G,c),O.md(G,c),O.mh(G,c),c.dm(H?H:new hr),new tg(c)},Og("PropertyView",O,{ms_ac:[Vq,Zn,ke,us,Ed,"categorizable",Oc,xg,gf,Hk,Mf,zb,os,gj,"selectRowIndex",Li,"background",Lp,te,Wn,lq,Pm],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:he,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:$n,_background:e.propertyViewBackground,_expandIcon:e.propertyViewExpandIcon,_collapseIcon:e.propertyViewCollapseIcon,_scrollBarColor:Gm,_scrollBarSize:Hh,_autoHideScrollBar:zc,_selectBackground:e.propertyViewSelectBackground,_rowHeight:id,_rowLineVisible:e.propertyViewRowLineVisible,_rowLineColor:e.propertyViewRowLineColor,_10I:.5,_columnLineVisible:e.propertyViewColumnLineVisible,_columnLineColor:e.propertyViewColumnLineColor,_labelColor:e.propertyViewLabelColor,_labelSelectColor:e.propertyViewLabelSelectColor,_labelFont:e.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(q){0>q&&(q=0),q>1&&(q=1);var H=this,o=H._10I;H._10I=q,H.fp("columnPosition",o,q)},getPropertyName:function(h){return h.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(p,o,N){return N===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(x,G){return G===this._selectRowIndex?this._labelSelectColor:x.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(W){var g=this.getHeight()-this._59I;return g>W&&(W=g),W>0?0:y(W)},isExpanded:function(D){if(!D)return!0;var i=this._26o[D];return i?i.isExpanded:!(this._26Q[D]===!1)},toggle:function(n){var a=this;a.isExpanded(n)?a.collapse(n):a.expand(n)},expandAll:function(){this.validate();for(var b in this._26o)this.expand(b)},expand:function(d){if(d&&d!==nq){var v=this,e=v._26o[d];e&&!e.isExpanded&&(e.isExpanded=!0,v.onExpanded(d),v.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var e in this._26o)this.collapse(e)},collapse:function(H){if(H&&H!==nq){var T=this,A=T._26o[H];A&&A.isExpanded&&(A.isExpanded=!1,T.onCollapsed(H),T.ivm())}},onCollapsed:function(){},getCategoryName:function(Z){if(!this.isCategorizable())return nq;var F=Z.getCategoryName();return F?F:nq},getPropertyModel:function(){return this._propertyModel},setDataModel:function(c){var B=this,e=B._dataModel;e!==c&&(e&&(e.umd(B.handlePropertyChange,B),B._3o||e.sm().ums(B.ivm,B)),B._dataModel=c,c.md(B.handlePropertyChange,B),B._3o?B._3o._21I(c):c.sm().ms(B.ivm,B),B.fp(pn,e,c))},isVisible:function(H){return this._visibleFunc?this._visibleFunc(H):!0},onPropertyChanged:function(v){var S=this,O=v.property;mm[O]?S.ivm():S.iv(),O===sg&&S._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:$f},handlePropertyChange:function(m){this._27o===m.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var B=this;B._96I||(B.setSelectRowIndex(-1),B._96I=1,B.iv())},redraw:function(){this.iv()},validateModel:function(){var c=this,$=c._rows,y=c._28o,r={},F=new yo,J=c._27o;c.updateCurrentData(),J!==c._27o&&c.endEditing(),$.clear(),y.clear(),c.getRawProperties().each(function($){if(c.isVisible($)){F.add($);var P=c.getCategoryName($);r[P]||(y.add(P,P===nq?0:x),r[P]={isExpanded:c.isExpanded(P),properties:new yo})}}),c._sortFunc&&F.sort(c._sortFunc);for(var C in c._26o)c._26Q[C]=c.isExpanded(C);c._26o=r,y.each(function(u){u!==nq&&$.add(u);var b=r[u];b.isExpanded&&F.each(function(w){c.getCategoryName(w)===u&&(b.properties.add(w),$.add({property:w,data:c._27o}))},c)})},validateImpl:function(){var f=this;f._76o(),f._96I&&(f.validateModel(),delete f._96I);var t=f._canvas,Z=f.getWidth(),F=f.getHeight(),N=-f.ty(),B=f._rowHeight,S=f._indent,L=Z-S,k=f._rows,s=k.size(),G=f._9I=S+L*f._10I,M=f._59I=s*B;Fe(t,Z,F),f._29I={x:0,y:N,width:Z,height:F},f._31I=p(N/B),f._14I=v((N+F)/B),f._31I<0&&(f._31I=0),f._14I>s&&(f._14I=s);var w,K=Qi(t),R=f._background;pf(K,0,-N,1),K.beginPath(),K.rect(0,N,Z,F),K.clip(),K.clearRect(0,N,Z,F),f._93db(K),R&&Db(K,0,0,S,M,R);for(var g=f._31I;g<f._14I;g++){var r=k.get(g),N=B*g;if(Kf(r))R&&Db(K,S,N,L,B,R),w=Dp(f.isExpanded(r)?f._expandIcon:f._collapseIcon),w&&gd(K,w,Cp,0,N,S,B),K.save(),K.beginPath(),K.rect(S,N,L,B),K.clip(),f.drawCategoryName(K,r,g,S,N,L,B),K.restore();else{var E=r.property,$=r.data,w=Dp(E.getIcon()),V=f._selectRowIndex===g?f.getSelectBackground():H;if(w&&gd(K,w,Cp,0,N,S,B),V&&Db(K,S,N,L,B,V),K.save(),K.beginPath(),K.rect(S,N,G-S,B),K.clip(),f.drawPropertyName(K,E,g,S,N,G-S,B),K.restore(),!f.isEditing($,E)){var b=G+1,A=Z-G-1;K.save(),K.beginPath(),K.rect(b,N,A,B),K.clip(),f._87o(f.drawPropertyValue(K,E,f.getValue($,E),g,b,N,A,B,$),g,b,N,A,B),K.restore()}}f._rowLineVisible&&Db(K,S,N+B-1,L,1,f._rowLineColor)}f._columnLineVisible&&(Db(K,G,0,1,M,f._columnLineColor),Db(K,Z-1,0,1,M)),f._92db(K),f._93I(),K.restore(),f.ty(f.ty())},drawCategoryName:function(O,B,C,S,s,f,P){Gi(O,B,this.getCategoryFont(B),this.getCategoryColor(B),S,s,f,P)},drawPropertyName:function(s,I,p,N,G,b,u){return I.drawPropertyName?(I.drawPropertyName(s,I,p,N,G,b,u,this),void 0):(Gi(s,this.getPropertyName(I),this.getPropertyFont(I,p),this.getPropertyColor(I,p),N,G,b,u),void 0)},drawPropertyValue:function(i,V,s,S,L,f,P,j,l){return V.drawPropertyValue?V.drawPropertyValue(i,V,s,S,L,f,P,j,l,this):(Uk(i,s,V,this.getLabelFont(V,s,S),this.getLabelColor(V,s,S),L,f,P,j,l,this),void 0)},isPropertyEditable:function(K){return K.isEditable()&&this.isEditable()},setProperties:function(g){this._propertyModel.clear(),this.addProperties(g)},addProperties:function(b){if(b){var U=this._propertyModel;b.forEach(function(v){if(!(v instanceof tm)){var c=Ob(v.className);v=zl(c?c:tm,v)}U.add(v)})}},getRowIndexAt:function(I){var w=this,W=p(w.lp(I).y/w._rowHeight);return W>=0&&W<w._rows.size()?W:-1},getPropertyAt:function(S){var D=this,T=D.getRowIndexAt(S);return T>=0?D._rows.get(T).property:H},getToolTip:function(j){var K=this,b=K.getPropertyAt(j),e=K._27o;return b&&e?b.getToolTip(e,K._9I<K.lp(j).x,K):H}});var tg=function(v){this.pv=v,this.addListeners()};oc(tg,O,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(V){this.getView().style.cursor=V},clear:function(){var q=this;q._62O=q.cp=q.ty=q.p=H,q.setCursor(T)},handle_mousedown:function(C){this.handle_touchstart(C)},handle_touchstart:function(J){var z=this,i=z.pv;Cg(J),i.setFocus(J)&&(Ue(J)?(z.cp=Ok(J),z.ty=i.ty(),z.p=i.getColumnPosition(),z.handle_touchmove(J)):i.setSelectRowIndex(i.getRowIndexAt(J)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(q){this.handle_touchend(q)},handle_touchend:function(l){var B=this;if(B.cp&&!B._62O){var V=B.pv,j=V.lp(l),i=j.x,n=j.y,M=V._indent,S=V.getRowIndexAt(l),s=V._9I;if(S>=0){var p=V._rowHeight,v=p*S,$=V._rows.get(S),h=$.property;if(Kf($))Dp(V.isExpanded($)?V._expandIcon:V._collapseIcon)&&i>=0&&M>=i&&n>=v&&v+p>=n?V.toggle($):Ei(l)&&V.toggle($);else if(i>s&&V.isPropertyEditable(h)){var f={x:s+1,y:v,width:V.getWidth()-s-1,height:p},U={x:f.x+V.tx(),y:f.y+V.ty(),width:f.width,height:f.height},k=0,W=V._29I;f.y<W.y?k=f.y-W.y:f.y+p>W.y+W.height&&(k=f.y+p-W.y-W.height),k&&(V.ty(V.ty()-k),U.y-=k),V.beginEditing({data:$.data,property:h,value:V.getValue($.data,h),event:l,rect:f,editorRect:U,view:V})}}V.setSelectRowIndex(S)}B.clear()},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowTouchMove:function(i){var b=this,T=b.pv,I=b.ty,K=b.cp,f=Ok(i),n=b._62O;if("p"===n)T.setTranslateY(I+f.y-K.y);else if("c"===n){var x=T.getWidth()-T._indent;if(x>16){var C=b.p-(K.x-f.x)/x,p=16/x;p>C&&(C=p),C>1-p&&(C=1-p),T.setColumnPosition(C)}}else"s"===n&&T.setTranslateY(I+(K.y-f.y)*T._59I/T._29I.height)},handle_mousemove:function(b){this.handle_touchmove(b)},handle_touchmove:function(Y){if(!Oe&&Ue(Y)){var R=this,O=R.pv,C=t(O.lp(Y).x-O._9I)<=(h?8:3);R.cp?R._62O||(C?(R._62O="c",ce(R)):t(Ok(Y).y-R.cp.y)>=2&&(R._62O=R.isV(Y)?"s":"p",ce(R))):(C?R.setCursor(Jb):R.setCursor(T),R.isV(Y)&&O._43o())}},isV:function(g){var r=this.pv,e=r._29I;return r._41o()&&e.x+e.width-r.lp(g).x<kr},handle_mousewheel:function(D){this.handleScroll(D,D.wheelDelta/40)},handle_DOMMouseScroll:function(I){2===I.axis&&this.handleScroll(I,-I.detail)},handleScroll:function(N,B){var d=this.pv;Cg(N),d.endEditing(),d.translate(0,B*d.getRowHeight())},handle_keydown:function(J){var N=this.pv,v=N._rows.size(),e=N._selectRowIndex+(uq(J)?-1:1);(uq(J)||Ip(J))&&(0>e&&(e=0),e>=v&&(e=v-1),N.setSelectRowIndex(e))}}),Pg.ListView=function(n){this._5o(n),new xh(this)},Og("ListView",O,{ms_ac:[Vq,Zn,ke,Lp,Oc,te,Wn,xg,gf,zb,os,gj,Ee,Li],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:$n,_rowHeight:id,_rowLineVisible:e.listViewRowLineVisible,_rowLineColor:e.listViewRowLineColor,_scrollBarColor:Gm,_scrollBarSize:Hh,_autoMakeVisible:Nr,_autoHideScrollBar:zc,_selectBackground:e.listViewSelectBackground,_labelColor:e.listViewLabelColor,_labelSelectColor:e.listViewLabelSelectColor,_labelFont:e.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(J){var f=this,r=f._checkMode;f._checkMode=J,f.fp(wg,r,J)},drawRow:function(u,I,m,D,N,c,i){var z=this,t=0,Y=z._indent,L=z.getIconWidth(I);z.drawRowBackground(u,I,m,D,N,c,i),z._checkMode&&(Ih(u,z.getCheckIcon(I),t+Y/2,N+i/2,I,z),t+=Y),z.drawIcon(u,I,t,N,L,i),z.drawLabel(u,I,t+L,N,i)}});var xh=function(x){this.list=x,this.addListeners()};oc(xh,O,{ms_listener:1,getView:function(){return this.list._view},clear:function(o){var c=this;o&&"d"===c._62O&&c.list.handleDragAndDrop(o,"end"),c._62O=c.cp=c.tx=c.ty=H},handle_mousedown:function(H){this.handle_touchstart(H)},handle_touchstart:function(l){var q=this,E=q.list;if(Cg(l),E.setFocus(l))if(q.cp=Ok(l),q.tx=E.tx(),q.ty=E.ty(),Ue(l))q.isV(l)||q.isH(l)||!E.handleDragAndDrop||E.handleDragAndDrop(l,"prepare");else{var H=E.getDataAt(l);H&&q._33o(l,H),q.clear(l)}},handleWindowMouseUp:function(V){this.clear(V)},handleWindowTouchEnd:function(Q){this.clear(Q)},handle_mouseup:function(F){this.handle_touchend(F)},handle_touchend:function(f){var M=this,e=M.list;if(M.cp&&!M._62O){var X=e.getDataAt(f);X&&(e.isCheckMode()?M._34o(f,X):M._33o(f,X),Ei(f)?e.onDataDoubleClicked(X,f):e.onDataClicked(X,f))}M.clear(f)},handleWindowMouseMove:function(u){this.handleWindowTouchMove(u)},handleWindowTouchMove:function(y){var H=this,b=H.list,_=H._62O,N=H.tx,m=H.ty,O=H.cp,P=Ok(y),h=b._29I;"p"===_?b.setTranslate(N+P.x-O.x,m+P.y-O.y):"v"===_?b.ty(m+(O.y-P.y)*b._59I/h.height):"h"===_?b.tx(N+(O.x-P.x)*b._91I/h.width):"d"===_&&b.handleDragAndDrop(y,"between")},handle_mousemove:function(t){this.handle_touchmove(t)},handle_touchmove:function(s){if(!Oe&&Ue(s)){var Z=this,c=Z.list,e=Z.isV(s),t=Z.isH(s);if(Z.cp){if(!Z._62O){if(Io(Ok(s),Z.cp)<2)return;e?Z._62O="v":t?Z._62O="h":c.handleDragAndDrop?(Z._62O="d",c.handleDragAndDrop(s,"begin")):Z._62O="p",ce(Z)}}else e&&c._43o(),t&&c._42o()}},isV:function(I){var J=this.list,B=J._29I;return J._41o()&&B.x+B.width-J.lp(I).x<kr},isH:function(E){var J=this.list,T=J._29I;return J._40o()&&T.y+T.height-J.lp(E).y<kr},handle_mousewheel:function(W){this.handleScroll(W,W.wheelDelta/40,W.wheelDelta!==W.wheelDeltaX)},handle_DOMMouseScroll:function(n){this.handleScroll(n,-n.detail,1)},handleScroll:function(s,_,f){var F=this.list;Cg(s),F.endEditing&&F.endEditing(),f&&F._41o()?F.translate(0,_*F.getRowHeight()):F._40o()&&F.translate(10*_,0)},handle_keydown:function(g){var H,d=this.list,B=d.sm(),b=d._rows,S=b.size();if(bk(g))d.selectAll();else if(Nf(g))d.handleDelete&&d.handleDelete(g);else if(Hi(g))d.isCheckMode()&&(H=d.getFocusData(),H&&d.checkData(H));else if(uq(g)||Ip(g)){var j=d.isCheckMode();if(H=j?d.getFocusData():B.ld()){var X=d.getRowIndex(H);X>=0&&(uq(g)?0!==X&&(H=b.get(X-1),j?d.setFocusData(H):B.ss(H)):X!==S-1&&(H=b.get(X+1),j?d.setFocusData(H):B.ss(H)))}else S>0&&(H=b.get(0),j?d.setFocusData(H):B.ss(H))}},_34o:function($,Y){var T=this.list,Z=T.lp($).x;return Z>=0&&Z<=T._indent?(T.checkData(Y),void 0):(T.setFocusData(Y),void 0)},_33o:function(L,Z){var w=this.list,K=w.sm(),B=K.ld();if(Ji(L))w.isSelected(Z)?K.rs(Z):K.as(Z);else if(tl(L))if(B)for(var a=w.getRowIndex(B),m=w.getRowIndex(Z);a!==m;)a+=m>a?1:-1,K.as(w._rows.get(a));else K.ss(Z);else(Ue(L)||!K.contains(Z))&&K.ss(Z)}}),Pg.TreeView=function(b){var K=this;K._35o(),K._5o(b),new Lo(K)},Og("TreeView",O,{ms_ac:[Vq,Zn,ke,"rootVisible",wg,"rootData",xg,gf,zb,os,gj,Oc,Lp,te,Wn,Hk,Mf,Ee,Li,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:H,_indent:$n,_rowHeight:id,_rowLineVisible:e.treeViewRowLineVisible,_rowLineColor:e.treeViewRowLineColor,_scrollBarColor:Gm,_scrollBarSize:Hh,_autoHideScrollBar:zc,_expandIcon:e.treeViewExpandIcon,_collapseIcon:e.treeViewCollapseIcon,_autoMakeVisible:Nr,_selectBackground:e.treeViewSelectBackground,_labelColor:e.treeViewLabelColor,_labelSelectColor:e.treeViewLabelSelectColor,_labelFont:e.treeViewLabelFont,drawRow:function(h,x,r,I,H,i,W){var j=this;j.drawRowBackground(h,x,r,I,H,i,W),j._97I(h,x,r,0,H,i,W)}});var Lo=function(J){yi(Lo,this,[J])};oc(Lo,xh,{toggle:function(m,V,U,$){var B=this.list,W=B.lp(m).x;if(Dp(B.getToggleIcon(V))){var p=U*$;if(W>=p&&p+U>=W)return B.toggle(V),!0}return Ei(m)?(B.toggle(V),!0):!1},_34o:function(o,$){var D=this.list,F=D.lp(o).x,I=D._levelMap[$._id],x=D._indent,A=x*(I+1);return F>=A&&A+x>=F?(D.checkData($),void 0):(this.toggle(o,$,x,I)||D.setFocusData($),void 0)},_33o:function(j,W){var H=this,z=H.list;H.toggle(j,W,z._indent,z.getLevel(W))||Lo.superClass._33o.call(H,j,W)},handle_keydown:function(e){if(Dg(e)||uf(e)){var b=this.list,d=b._rows,y=b.isCheckMode(),m=b.sm(),Z=y?b.getFocusData():m.ld();Z?Z.hasChildren()&&(Dg(e)?b.collapse(Z):b.expand(Z)):d.size()>0&&(Z=d.get(0),y?b.setFocusData(Z):m.ss(Z))}else Lo.superClass.handle_keydown.call(this,e)}});var oj=Pg.TableView=function(C){this._98I(),this._5o(C),new ub(this)};Og("TableView",O,{ms_ac:[Vq,Zn,ke,"sortMode",us,Ed,Lp,te,Wn,lq,Pm,"sortColumn",xg,gf,zb,os,gj,Ee,Li],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:io,_editable:!0,_batchEditable:!1,_rowHeight:id,_rowLineVisible:e.tableViewRowLineVisible,_rowLineColor:e.tableViewRowLineColor,_columnLineVisible:e.tableViewColumnLineVisible,_columnLineColor:e.tableViewColumnLineColor,_scrollBarColor:Gm,_scrollBarSize:Hh,_autoHideScrollBar:zc,_autoMakeVisible:Nr,_selectBackground:e.tableViewSelectBackground,_labelColor:e.tableViewLabelColor,_labelSelectColor:e.tableViewLabelSelectColor,_labelFont:e.tableViewLabelFont,getCheckColumn:function(){var P=this;if(!P._31o){var Z=P._31o=new vl;Z.setEditable(!0),Z.setWidth(40),Z.getValue=P.getCheckColumValue,Z.drawCell=P.drawCheckColumnCell}return P._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(e){var F=this,b=F._39o,h=F.getCheckColumn();e!==F.isCheckMode()&&(e?b.add(h,0):b.remove(h),F.fp(wg,!e,e))},getCheckColumValue:function(I,C,Y){return Y.isSelected(I)},drawCheckColumnCell:function(f,I,O,L,v,p,u,U,y){Ih(f,y.getCheckIcon(I),v+u/2,p+U/2,I,y)}});var ub=function(R){yi(ub,this,[R])};oc(ub,xh,{_34o:function(z,T){var $=this.list,i=$._31o;if($.isCellEditable(T,i)){var P=$._3Q(i),Z=$.lp(z).x;if(P&&Z>=P.startX&&Z<P.startX+i.getWidth())return $.checkData(T),void 0}$.setFocusData(T),$._37O(T,z)},_33o:function(B,a){ub.superClass._33o.apply(this,arguments),this.list._37O(a,B)}});var mg=Pg.TreeTableView=function(S){var G=this,N=G._4o=new vl;G._35o(),G._98I(),G._5o(S),N.setDisplayName("Name"),N.setEditable(!0),N.setWidth(180),N.drawCell=Ap,N.getValue=bo,G._39o.add(N),new Iq(G)},Ap=function(V,K,r,m,z,E,q,C,w){w._97I(V,K,r,z,E,q,C)},bo=function(x,A,J){return J.getLabel(x)};Og("TreeTableView",O,{ms_ac:[Vq,Zn,ke,"sortMode",us,Ed,Oc,wg,"rootData","rootVisible",xg,gf,"sortColumn",Hk,Mf,zb,os,gj,Ee,Wn,Lp,te,lq,Pm,Li,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:io,_checkMode:H,_editable:!0,_batchEditable:!1,_indent:$n,_rowHeight:id,_rowLineVisible:e.treeTableViewRowLineVisible,_rowLineColor:e.treeTableViewRowLineColor,_columnLineVisible:e.treeTableViewColumnLineVisible,_columnLineColor:e.treeTableViewColumnLineColor,_expandIcon:e.treeTableViewExpandIcon,_collapseIcon:e.treeTableViewCollapseIcon,_scrollBarColor:Gm,_scrollBarSize:Hh,_autoHideScrollBar:zc,_autoMakeVisible:Nr,_selectBackground:e.treeTableViewSelectBackground,_labelColor:e.treeTableViewLabelColor,_labelSelectColor:e.treeTableViewLabelSelectColor,_labelFont:e.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Iq=function(R){yi(Iq,this,[R])};oc(Iq,xh,{_34o:function(j,R){var v=this.list,a=v._4o,c=v._3Q(a),o=v.lp(j).x;if(c){var G=v._indent,w=c.startX+G*v.getLevel(R);if(Dp(v.getToggleIcon(R))&&o>=w&&w+G>=o)return v.toggle(R),void 0;if(v.isCellEditable(R,a)&&(w+=G,o>=w&&w+G>=o))return v.checkData(R),void 0}v.setFocusData(R),v._37O(R,j)},_33o:function(N,b){var R=this.list,X=R.lp(N).x;if(Dp(R.getToggleIcon(b))){var B=R._3Q(R._4o);if(B){var o=R._indent,y=B.startX+o*R.getLevel(b);if(X>=y&&y+o>=X)return R.toggle(b),void 0}}Iq.superClass._33o.apply(this,arguments),R._37O(b,N)}});var wj=Pg.TableHeader=function(D){var h=this,c=h._view=Vb(1),r=h._39o=D.getColumnModel(),s=h.iv;h.tv=h._tableView=D,h._60I=new yo,h._canvas=Lm(c),c.style.background=e.tableHeaderBackground||"",c.style.height=wh+sn,r.mm(s,h),r.md(s,h),r.mh(s,h),D.mp(function(c){ld[c.property]&&h.iv()},h),new ad(h),h.iv()};Og("TableHeader",O,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Vq,ke,Oc,"moveBackground","insertColor",lq,Pm,"resizable","movable"],_checkIcon:Nq,_movable:!0,_resizable:!0,_labelColor:e.tableHeaderLabelColor,_labelFont:e.tableHeaderLabelFont,_columnLineColor:e.tableHeaderColumnLineColor,_columnLineVisible:e.tableHeaderColumnLineVisible,_sortDescIcon:e.tableHeaderSortDescIcon,_sortAscIcon:e.tableHeaderSortAscIcon,_moveBackground:e.tableHeaderMoveBackground,_insertColor:e.tableHeaderInsertColor,_indent:$n,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(N){return N.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(j){return j.getColor()||this._labelColor},getLabelAlign:function(G){return G._align},onPropertyChanged:function(){this.iv()},_5Q:function(t){this._61I=t,this.iv()},getLogicalPoint:function(I){return Em(I,this._canvas,this.tv.tx())},validateImpl:function(){var u=this,Y=u._canvas,Z=u.getWidth(),U=u.getHeight(),c=u.tv,$=u._60I,e=u._61I,M=-c.tx(),l=0;(Z!==Y.clientWidth||U!==Y.clientHeight)&&Fe(Y,Z,U),$.clear(),u._39o._roots.each(function(O){if(O.isVisible()){var a=l+O.getWidth();M+Z>=l&&a>=M&&$.add({column:O,startX:l}),l=a}});var E=Qi(Y);if(pf(E,-M,0,1),E.beginPath(),E.rect(M,0,Z,U),E.clip(),E.clearRect(M,0,Z,U),$.each(function(H){var Y=H.column,z=H.startX,R=Y.getWidth();R>0&&(E.save(),E.beginPath(),E.rect(z,0,R,U),E.clip(),e&&e.column===Y||u.drawColumn(E,Y,z,0,R,U),u._columnLineVisible&&Db(E,z+R-1,0,1,U,u._columnLineColor),E.restore())}),e){var Q=e.column,l=e.startX,i=e.position,w=Q.getWidth();E.save(),E.beginPath(),E.rect(l,0,w,U),E.clip(),E.fillStyle=u._moveBackground,E.fill(),u.drawColumn(E,Q,l,0,w,U),E.restore(),tp(E,u._insertColor,i,0,U)}E.restore()},_6Q:function(M){var K=this.tv;return K._31o===M&&K.sm().getSelectionMode()===B},drawColumn:function(J,v,g,k,b,t){var W=this,H=W.tv,N=Dp(v.getIcon()),V=W.getLabelAlign(v);if(W._6Q(v)){var h=Dp(W._checkIcon);Ih(J,h,g+b/2,k+t/2,v,W)}else{var p=W.getLabel(v),z=W.getLabelFont(v),G=W.getLabelColor(v),E=Yb(z,p).width,e=N?W._indent:0;V===U?(N&&gd(J,N,Cp,g,k,e,t),Gi(J,p,z,G,g+e,k,b,t,U)):V===X?(N&&gd(J,N,Cp,g+b-E-e,k,e,t),Gi(J,p,z,G,g,k,b,t,X)):(N&&gd(J,N,Cp,g+(b-E-e)/2,k,e,t),Gi(J,p,z,G,g+(b-E+e)/2,k,0,t,U))}if(v.isSortable()&&H.getSortColumn()===v&&(N=Dp(v.getSortOrder()===ib?W._sortAscIcon:W._sortDescIcon))){var f=Dn(N,v)/2+2;Ih(J,N,V===X?g+f:g+b-f,k+t/2,v,H)}}});var ad=function(N){var x=this;x.th=N,x.tv=N._tableView,x.addListeners()};oc(ad,O,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(H){this.getView().style.cursor=H},handle_mousemove:function(C){if(!Oe){var $=this;delete $._29o,$.setCursor(T);for(var W=$.th,H=W._60I,F=W.lp(C).x,z=H.size()-1;z>=0;z--){var I=H.get(z),N=I.column,b=I.startX+N.getWidth();if(W.isResizable()&&t(b-F)<=(h?10:3))return $._29o=I,$.setCursor(Jb),void 0;(N.isSortable()||W.isMovable()||N===$.tv.getCheckColumn())&&F>=I.startX&&b>=F&&N.getWidth()>0&&($._29o=I,$.setCursor(Kp))}}},handle_mousedown:function($){this.handle_touchstart($)},handle_touchstart:function(u){var c=this;Cg(u),c.tv.endEditing(),c.handle_mousemove(u),c._29o&&(c.x=Ok(u).x,c.lx=c.th.lp(u).x,c.w=c._29o.column.getWidth(),ce(c,u))},handleWindowMouseMove:function(n){this.handleWindowTouchMove(n)},handleWindowTouchMove:function(K){var A=this,a=A.th,Q=A.getView().style.cursor,B=A._29o,c=Ok(K).x-A.x;if(A.resizing||A.moving||(Q===Jb?A.resizing=1:a.isMovable()&&Q===Kp&&t(c)>2&&(A.moving=1)),A.resizing)B.column.setWidth(A.w+c);else if(A.moving){var L=A.lx+c;a._60I.each(function(r){var y=r.startX,A=y+r.column.getWidth();if(L>=y&&A>=L){var e={column:B.column,startX:B.startX+c,front:A-L>L-y,insertColumn:r.column};e.position=e.front?y:A,a._5Q(e)}})}},_16Q:function(r,l){var d=this,v=d.tv,o=d.th,A=o._checkIcon;if(o._6Q(r)){var M=Dp(A),n=d.lx,R=r.getWidth(),w=Dn(M,r);if(n>=l+R/2-w&&l+R/2+w>=n){o.setCheckIcon(A===Of?Nq:Of);var f=v.sm(),J=v._rows;return A===Of?f.rs(J):f.ss(J),v.onCheckColumnClicked(r),!0}}return!1},handleWindowMouseUp:function(P){this.handleWindowTouchEnd(P)},handleWindowTouchEnd:function(e){var k=this,r=k.tv,c=k.th,z=k._29o;if(k.moving){var P=c._61I;if(P&&P.insertColumn!==P.column){var a=P.column,Y=r.getColumnModel()._roots,J=Y.remove(a),j=Y.indexOf(P.insertColumn);j>=0&&(P.front||j++,j<=Y.size()&&(Y.add(a,j),r.getColumnModel()._38I(a,J,j)))}c._5Q(H),delete k.moving}else if(!k.resizing&&z){a=z.column;var i=c.lp(e).x,t=z.startX,l=!0;if(c.onColumnClicked){var v=c.onColumnClicked(a,e);v===!1&&(l=!1)}if(l&&i>=t&&i<=t+a.getWidth()&&!k._16Q(a,t)){if(a.isSortable()){var S=r.getSortMode(),Z=a.getSortOrder();S===io?r.getSortColumn()===a?(Z===iq&&r.setSortColumn(H),a.setSortOrder(Z===ib?iq:ib)):r.setSortColumn(a):"bistate"===S&&(r.getSortColumn()===a?a.setSortOrder(Z===ib?iq:ib):r.setSortColumn(a))}r.onColumnClicked(a,e)}}k._29o=k.resizing=k.x=k.lx=k.w=H}}),Pg.TablePane=function(W){this.init(new oj(W))},Og("TablePane",O,{ms_v:1,_44o:1}),Pg.TreeTablePane=function(q){this.init(new mg(q))},Og("TreeTablePane",O,{ms_v:1,_44o:1}),Pg.Toolbar=function(T){var H=this,w=H._view=Vb(1),j=w.style;j.background=e.toolbarBackground||"",j.height=bp+sn,H._canvas=Lm(w),H._30o=new yo,H._90I=new yo,H.setItems(T||[]),w.handleGroupSelectedChanged=function(q){if(q.isSelected()){var b=q.getGroupId();null!=b&&H._items.forEach(function(N){var d=N.element;d&&d!==q&&d.setSelected&&d.getGroupId&&d.getGroupId()===b&&d.setSelected(!1)})}},new Tb(H)},Og("Toolbar",O,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[Am,Vq,ke,Zn,Li,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:e.toolbarLabelColor,_labelSelectColor:e.toolbarLabelSelectColor,_labelFont:e.toolbarLabelFont,_selectBackground:e.toolbarSelectBackground,_itemGap:e.toolbarItemGap,_separatorColor:e.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(T){var d=this.getItemInfoAt(T);return d?d.item.toolTip:H},getLabelColor:function(x){return x.selected&&x.type!==Of&&x.type!==Nd?this._labelSelectColor:this._labelColor},onPropertyChanged:function(c){this.iv(),c.property===Am&&this._items.forEach(function(O){pq(O)})},redraw:function(){this.iv()},addItem:function(I,G){var d=this._items;G==H?d.push(I):d.splice(G,0,I),this.fp(Am,H,d)},removeItem:function(B){if(B)for(var Z=this._items,m=0;m<Z.length;m++)B===Z[m]&&(Z.splice(m,1),this.fp(Am,H,Z))},removeItemById:function(h){if(h!=H)for(var i=this._items,k=0;k<i.length;k++)h===i[k].id&&(i.splice(k,1),this.fp(Am,H,i))},getItemById:function(p){if(p!=H)for(var J=this._items,L=0;L<J.length;L++){var f=J[L];if(p===f.id)return f}},getItemInfos:function(){return this._30o},getItemInfoAt:function(z){var o=this,M=0,J=o._30o,l=o.lp(z),y=l.x,j=l.y;if(j>=0&&j<=o.getHeight())for(;M<J.size();M++){var V=J.get(M);if(V.startX<=y&&y<=V.endX)return V}return H},drawItem:function(C,a,h,G,$){if(a.visible===!1)return 0;var S=this,L=a.disabled;L&&(C.globalAlpha=Mk);var O=S.drawItemImpl(C,a,h,G,$),l=S._itemGap;return L&&(C.globalAlpha=1),this._currentItem!==a||"separator"===a||a.unfocusable||Jr(C,S._separatorColor,h-l/2,0,O+l,G),O},drawItemImpl:function(t,G,y,j,E){var Z,u=this,p=u._view,s=u._itemGap,R=j/2,c=G.type,S=G.label,r=u.getLabelFont(G),d=u.getLabelColor(G),N=G.selected,z=Dp(G.icon),H=Dn(z,G),a=0,F=G.element,P=H+(S?Yb(r,S).width:0);if("separator"===G)return tp(t,u._separatorColor,y,j/4,R),1;if(F){z&&Ih(t,z,y+H/2,R),Gi(t,S,r,d,y+H,0,0,j);var W=ie(F);E||u._90I.add(W),W.parentNode!==p&&qr(p,W),F.iv&&F.iv(),F.validate&&F.validate();var J=W.getBoundingClientRect(),h=J.width,Y=W.style;return Jo(W),Y.left=u.tx()+y+P+sn,Y.top=(j-J.height)/2+sn,P+h}return c===Nd?Z=Dp(N?Rd:od):c===Of&&(Z=Dp(N?Of:Nq)),Z?(a=Dn(Z,G),Ih(t,Z,y+a/2,R),y+=a,P+=a):N&&Db(t,y-s/2,0,P+s,j,u.getSelectBackground(G)),z&&Ih(t,z,y+H/2,R),Gi(t,S,r,d,y+H,0,0,j),P},validateImpl:function(){var k=this,K=k._canvas,j=k.getWidth(),t=k.getHeight(),R=k._30o,h=k._items;Fe(K,j,t);var Q=Qi(K),d=k._itemGap,y=d/2;pf(Q,k.tx(),0,1),Q.clearRect(0,0,j,t);var Y=k._90I;k._90I=new yo,R.clear(),h.forEach(function(O){var w=k.drawItem(Q,O,y,t);R.add({item:O,startX:y,endX:y+w,width:w}),w&&(y+=w+d)}),Y.each(function(B){k._90I.contains(B)||Mq(B)}),k._64I=W(0,y),Q.restore(),k._stickToRight?(k._65O=0,Q=Qi(K),y=j-k._64I+d,pf(Q,0,0,1),Q.clearRect(0,0,j,t),R.clear(),h.forEach(function(i){var O=k.drawItem(Q,i,y,t,!0);R.add({item:i,startX:y,endX:y+O,width:O}),O&&(y+=O+d)}),Q.restore()):k.tx(k.tx())},handleClick:function(p){var h=this,j=p.type,K=p.action,S=p.groupId,w=p.selected;p.disabled||(S!=H?w||(p.selected=!0,this._items.forEach(function(q){q.groupId===S&&p!==q&&(q.selected=!1)}),K&&p.action(p,h)):j===Of||"toggle"===j?(p.selected=!w,K&&p.action(p,h)):K&&p.action(p,h)),Ti(),h.iv()}});var Tb=function(g){this.tb=g,this.addListeners()};oc(Tb,O,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(u){this.handleScroll(u,10*(u.wheelDelta/40))},handle_DOMMouseScroll:function(T){this.handleScroll(T,10*-T.detail)},handleScroll:function(T,$){Cg(T);var f=this.tb;f.isScrollable()&&!f._stickToRight&&(f.tx(f.tx()+$),Uc())},handle_mousemove:function(R){var T=this;Oe?T.info2=T.tb.getItemInfoAt(R):T.setItem(R)},handle_mouseout:function(J){var O=this;J.target===O.getView()?O.tb.setCurrentItem(H):O.handle_mousemove(J)},handle_mousedown:function(p){this.handle_mousemove(p),this.handle_touchstart(p)},handle_touchstart:function(f){var v=this,c=v.tb,Y=f.target;(Y===v.getView()||Y===c._canvas)&&(Cg(f),c.setFocus(f)&&(this.setItem(f),(c.isScrollable()||v.info&&!v.info.item.disabled)&&(v.x=Ok(f).x,v.tx=c.tx(),ce(v,f))))},handleWindowMouseMove:function(b){this.handleWindowTouchMove(b)},handleWindowTouchMove:function(b){var D=this,$=D.tb;if(!$._stickToRight){var A=Ok(b).x-D.x;!D._25o&&t(A)>2&&$.isScrollable()&&(D._25o=1),D._25o&&$.tx(D.tx+A)}},handleWindowMouseUp:function(X){this.handleWindowTouchEnd(X)},handleWindowTouchEnd:function(){var B=this,y=B.tb,b=B.info,j=B.info2;if(!B._25o&&b){var F=b.item;j&&j.item!==F||y.handleClick(F)}B._25o=B.x=B.tx=B.info2=H,B.setItem()},setItem:function(m){var T=this,s=T.tb,i=T.info=m?s.getItemInfoAt(m):H;s.setCurrentItem(i?i.item:H)}}),Pg.BorderPane=function(){this._view=Vb(1),this.iv()},Og("BorderPane",O,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(D,T){this._12o("leftView",D),T!=H&&this.setLeftWidth(T)},getRightView:function(){return this._rightView},setRightView:function(N,q){this._12o("rightView",N),q!=H&&this.setRightWidth(q)},getTopView:function(){return this._topView},setTopView:function(F,w){this._12o("topView",F),w!=H&&this.setTopHeight(w)},getBottomView:function(){return this._bottomView},setBottomView:function(s,O){this._12o("bottomView",s),O!=H&&this.setBottomHeight(O)},getCenterView:function(){return this._centerView},setCenterView:function(u){this._12o("centerView",u)},_12o:function(o,I){var j=this,L="_"+o,l=j._view,e=j[L];e!==I&&(e&&(e.getView?Mq(e.getView()):Mq(e)),j[L]=I,I&&(I.getView?qr(l,I.getView(),1):qr(l,I,1)),j.fp(o,e,I))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var I=this,B=I._topView,J=I._bottomView,Y=I._leftView,d=I._rightView,i=I._centerView,S=I.getWidth(),e=I.getHeight(),U=0,G=0,y=S,N=e,M=0,f=0,Q=0,O=0;B&&(M=I._topHeight==H?bn(B):I._topHeight,G=M),J&&(f=I._bottomHeight==H?bn(J):I._bottomHeight,N=e-f),Y&&(Q=I._leftWidth==H?_q(Y):I._leftWidth,U=Q),d&&(O=I._rightWidth==H?_q(d):I._rightWidth,y=S-O);
var V=W(0,y-U),D=W(0,N-G);B&&gp(B,0,0,S,M),J&&gp(J,0,N,S,f),Y&&gp(Y,0,G,Q,D),d&&gp(d,y,G,O,D),i&&gp(i,U,G,V,D)}})}}(this,Object);