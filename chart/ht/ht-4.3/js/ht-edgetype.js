!function(v){"use strict";var P="ht",S=v[P],E=Math,r=E.max,t=E.min,U=E.abs,D=E.atan2,x=E.cos,l=E.sin,g=E.ceil,W=S.Default,H=W.getInternal(),Q=S.List,s=H.Mat,i=H.getNodeRect,u=H.intersectionLineRect,V=W.getDistance,K=W.setEdgeType,b="left",d="right",k="top",I="bottom",p="edge.type",j="edge.gap",m="edge.center",X="edge.extend",A=function(m,q){return i(m,q).width},y=function(P,j){return i(P,j).height},q=function(q,N){var m=H.getPosition(N.s("edge.source.position"),i(q,N._40I));return m.x+=N.s("edge.source.offset.x"),m.y+=N.s("edge.source.offset.y"),m},F=function(P,j){var l=H.getPosition(j.s("edge.target.position"),i(P,j._41I));return l.x+=j.s("edge.target.offset.x"),l.y+=j.s("edge.target.offset.y"),l},J=function(r,o){var D=r.s(p),d=r.getEdgeGroup();if(d){var $=0;if(d.eachSiblingEdge(function(X){o.isVisible(X)&&X.s(p)==D&&$++}),$>1)return r.s(j)*($-1)/2}return 0},N=function(P,Q){var Z=P.s(p),I=P.isLooped();if(!P.getEdgeGroup())return I?P.s(j):0;var l,K=0,d=0,g=0;return P.getEdgeGroup().getSiblings().each(function(G){G.each(function(H){if(H._40I===P._40I&&H.s(p)==Z&&Q.isVisible(H)){var y=H.s(j);l?(d+=g/2+y/2,g=y):(l=H,g=y),H===P&&(K=d)}})}),I?d-K+g:K-d/2},C=function(v,B){var J=v.size(),A=B.s("edge.corner.radius");if(0===A)return{points:v,segments:new Q([1,J])};if(0>A)return{points:v};var e,H=new Q,P=new Q,i=v.get(0);H.add(i),P.add(1);for(var U=1;J>U;U++)if(J>U+1){var G=v.get(U),I=v.get(U+1),W=i.x,k=i.y,T=G.x,y=G.y,p=y-k,b=T-W,N=D(p,b);e=t(.99*V(i,G),A),H.add({x:T-e*x(N),y:y-e*l(N)}),H.add(G),W=G.x,k=G.y,T=I.x,y=I.y,p=y-k,b=T-W,N=D(p,b),e=t(.99*V(G,I),A),i={x:W+e*x(N),y:k+e*l(N)},H.add(i),P.addAll([2,3])}else H.add(v.get(U)),P.add(2);return{points:H,segments:P}};H.addMethod(S.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),K("boundary",function(r,o,b,m){m||(o=-o);var a,c=q(b,r),Y=F(b,r),y=i(b,r._40I),S=i(b,r._41I),W=new s(D(Y.y-c.y,Y.x-c.x)),t=V(c,Y),P=c.x,v=c.y;return a=W.tf(0,o),c={x:a.x+P,y:a.y+v},a=W.tf(t,o),Y={x:a.x+P,y:a.y+v},a=u(c,Y,y),a&&(c={x:a[0],y:a[1]}),a=u(c,Y,S),a&&(Y={x:a[0],y:a[1]}),{points:new Q([c,Y])}}),K("ripple",function(J,O,E,x){x||(O=-O);var Z=q(E,J),o=F(E,J),j=V(Z,o),K=t(J.s("edge.offset"),j/2),C=J.s("edge.ripple.size"),c=J.s("edge.ripple.length"),b=J.s("edge.ripple.both"),H=J.s(m),i=J.s("edge.ripple.elevation"),M=new Q,G=J.s("edge.ripple.straight")?null:new Q,U=new s(D(o.y-Z.y,o.x-Z.x));x||(i=-i),j-=2*K,c>0&&(C=g(j/c));var Y=j/C;G&&G.add(1);for(var r=0;C>r;r++)G&&G.add(3),0===r?M.add({x:K+Y*r,y:H?0:O}):M.add({x:K+Y*r,y:O}),M.add({x:K+Y*r+Y/2,y:i+O}),b&&(i=-i);for(M.add({x:K+j,y:H?0:O}),r=0;r<M.size();r++){var k=U.tf(M.get(r));k.x+=Z.x,k.y+=Z.y,M.set(r,k)}return{points:M,segments:G}}),K("h.v",function(P,o,H){o=N(P,H);var x=new Q,J=P.s(m),T=q(H,P),b=T.x,X=T.y,i=F(H,P),v=i.x,s=i.y,w=0,M=0,R=v-b,I=s-X;return J||(w=A(H,P._40I)/2,M=y(H,P._41I)/2),R>=0&&0>=I?(x.add({x:b+w,y:X+o}),x.add({x:v+o,y:X+o}),x.add({x:v+o,y:s+M})):0>=R&&I>=0?(x.add({x:b-w,y:X+o}),x.add({x:v+o,y:X+o}),x.add({x:v+o,y:s-M})):R>=0&&I>=0?(x.add({x:b+w,y:X+o}),x.add({x:v-o,y:X+o}),x.add({x:v-o,y:s-M})):(x.add({x:b-w,y:X+o}),x.add({x:v-o,y:X+o}),x.add({x:v-o,y:s+M})),C(x,P)}),K("v.h",function(b,k,v){k=N(b,v);var o=new Q,p=b.s(m),r=q(v,b),_=r.x,T=r.y,I=F(v,b),n=I.x,O=I.y,W=0,e=0,w=n-_,i=O-T;return p||(W=A(v,b._41I)/2,e=y(v,b._40I)/2),w>=0&&0>=i?(o.add({x:_+k,y:T-e}),o.add({x:_+k,y:O+k}),o.add({x:n-W,y:O+k})):0>=w&&i>=0?(o.add({x:_+k,y:T+e}),o.add({x:_+k,y:O+k}),o.add({x:n+W,y:O+k})):w>=0&&i>=0?(o.add({x:_-k,y:T+e}),o.add({x:_-k,y:O+k}),o.add({x:n-W,y:O+k})):(o.add({x:_-k,y:T-e}),o.add({x:_-k,y:O+k}),o.add({x:n+W,y:O+k})),C(o,b)}),K("ortho",function(h,J,E){var Y=new Q,I=h.s(m),u=h.s("edge.ortho"),L=h._40I,V=h._41I,R=q(E,h),G=R.x,i=R.y,p=F(E,h),O=p.x,n=p.y,s=O-G,a=n-i,N=I?0:A(E,L)/2,P=I?0:y(E,L)/2,Z=I?0:A(E,V)/2,k=I?0:y(E,V)/2,B=(s-(N+Z)*(s>0?1:-1))*u,w=(a-(P+k)*(a>0?1:-1))*u;return U(s)<U(a)?s>=0&&0>=a?(Y.add({x:G+J,y:i-P}),Y.add({x:G+J,y:i+w+J-P}),Y.add({x:O+J,y:i+w+J-P}),Y.add({x:O+J,y:n+k})):0>=s&&a>=0?(Y.add({x:G+J,y:i+P}),Y.add({x:G+J,y:i+w+J+P}),Y.add({x:O+J,y:i+w+J+P}),Y.add({x:O+J,y:n-k})):s>=0&&a>=0?(Y.add({x:G+J,y:i+P}),Y.add({x:G+J,y:i+w-J+P}),Y.add({x:O+J,y:i+w-J+P}),Y.add({x:O+J,y:n-k})):(Y.add({x:G+J,y:i-P}),Y.add({x:G+J,y:i+w-J-P}),Y.add({x:O+J,y:i+w-J-P}),Y.add({x:O+J,y:n+k})):s>=0&&0>=a?(Y.add({x:G+N,y:i+J}),Y.add({x:G+B+J+N,y:i+J}),Y.add({x:G+B+J+N,y:n+J}),Y.add({x:O-Z,y:n+J})):0>=s&&a>=0?(Y.add({x:G-N,y:i+J}),Y.add({x:G+B+J-N,y:i+J}),Y.add({x:G+B+J-N,y:n+J}),Y.add({x:O+Z,y:n+J})):s>=0&&a>=0?(Y.add({x:G+N,y:i+J}),Y.add({x:G+B-J+N,y:i+J}),Y.add({x:G+B-J+N,y:n+J}),Y.add({x:O-Z,y:n+J})):(Y.add({x:G-N,y:i+J}),Y.add({x:G+B-J-N,y:i+J}),Y.add({x:G+B-J-N,y:n+J}),Y.add({x:O+Z,y:n+J})),C(Y,h)}),K("flex",function(s,d,_){var n=new Q,G=s.s("edge.flex")+J(s,_),B=s.s(m),$=s._40I,X=s._41I,g=q(_,s),b=g.x,t=g.y,K=F(_,s),o=K.x,h=K.y,L=o-b,W=h-t,l=B?0:A(_,$)/2,k=B?0:y(_,$)/2,I=B?0:A(_,X)/2,r=B?0:y(_,X)/2,i=L>0?G:-G,E=W>0?G:-G;return U(L)<U(W)?L>=0&&0>=W?(n.add({x:b+d,y:t-k}),n.add({x:b+d,y:t+E+d-k}),n.add({x:o+d,y:h-E+d+r}),n.add({x:o+d,y:h+r})):0>=L&&W>=0?(n.add({x:b+d,y:t+k}),n.add({x:b+d,y:t+E+d+k}),n.add({x:o+d,y:h-E+d-r}),n.add({x:o+d,y:h-r})):L>=0&&W>=0?(n.add({x:b+d,y:t+k}),n.add({x:b+d,y:t+E-d+k}),n.add({x:o+d,y:h-E-d-r}),n.add({x:o+d,y:h-r})):(n.add({x:b+d,y:t-k}),n.add({x:b+d,y:t+E-d-k}),n.add({x:o+d,y:h-E-d+r}),n.add({x:o+d,y:h+r})):L>=0&&0>=W?(n.add({x:b+l,y:t+d}),n.add({x:b+i+d+l,y:t+d}),n.add({x:o-i+d-I,y:h+d}),n.add({x:o-I,y:h+d})):0>=L&&W>=0?(n.add({x:b-l,y:t+d}),n.add({x:b+i+d-l,y:t+d}),n.add({x:o-i+d+I,y:h+d}),n.add({x:o+I,y:h+d})):L>=0&&W>=0?(n.add({x:b+l,y:t+d}),n.add({x:b+i-d+l,y:t+d}),n.add({x:o-i-d-I,y:h+d}),n.add({x:o-I,y:h+d})):(n.add({x:b-l,y:t+d}),n.add({x:b+i-d-l,y:t+d}),n.add({x:o-i-d+I,y:h+d}),n.add({x:o+I,y:h+d})),C(n,s)}),K("extend.east",function(i,I,V){var w=new Q,o=i.s(X)+J(i,V),c=i.s(m),P=q(V,i),v=P.x+(c?0:A(V,i._40I)/2),s=P.y,d=F(V,i),Y=d.x+(c?0:A(V,i._41I)/2),E=d.y,u=r(v,Y)+o;return s>E?(w.add({x:v,y:s+I}),w.add({x:u+I,y:s+I}),w.add({x:u+I,y:E-I}),w.add({x:Y,y:E-I})):(w.add({x:v,y:s-I}),w.add({x:u+I,y:s-I}),w.add({x:u+I,y:E+I}),w.add({x:Y,y:E+I})),C(w,i)}),K("extend.west",function(e,Z,H){var L=new Q,U=e.s(X)+J(e,H),d=e.s(m),R=q(H,e),O=R.x-(d?0:A(H,e._40I)/2),r=R.y,k=F(H,e),o=k.x-(d?0:A(H,e._41I)/2),I=k.y,a=t(O,o)-U;return r>I?(L.add({x:O,y:r+Z}),L.add({x:a-Z,y:r+Z}),L.add({x:a-Z,y:I-Z}),L.add({x:o,y:I-Z})):(L.add({x:O,y:r-Z}),L.add({x:a-Z,y:r-Z}),L.add({x:a-Z,y:I+Z}),L.add({x:o,y:I+Z})),C(L,e)}),K("extend.north",function(v,o,u){var j=new Q,d=v.s(X)+J(v,u),f=v.s(m),H=q(u,v),$=H.x,G=H.y-(f?0:y(u,v._40I)/2),B=F(u,v),r=B.x,K=B.y-(f?0:y(u,v._41I)/2),R=t(G,K)-d;return $>r?(j.add({y:G,x:$+o}),j.add({y:R-o,x:$+o}),j.add({y:R-o,x:r-o}),j.add({y:K,x:r-o})):(j.add({y:G,x:$-o}),j.add({y:R-o,x:$-o}),j.add({y:R-o,x:r+o}),j.add({y:K,x:r+o})),C(j,v)}),K("extend.south",function(l,c,t){var j=new Q,I=l.s(X)+J(l,t),g=l.s(m),k=q(t,l),H=k.x,E=k.y+(g?0:y(t,l._40I)/2),L=F(t,l),O=L.x,z=L.y+(g?0:y(t,l._41I)/2),$=r(E,z)+I;return H>O?(j.add({y:E,x:H+c}),j.add({y:$+c,x:H+c}),j.add({y:$+c,x:O-c}),j.add({y:z,x:O-c})):(j.add({y:E,x:H-c}),j.add({y:$+c,x:H-c}),j.add({y:$+c,x:O+c}),j.add({y:z,x:O+c})),C(j,l)});var e=function(S,F,D,P,e){if(P.sort(function(Y,M){var N=Y.getSourceAgent()===F?Y.getTargetAgent():Y.getSourceAgent(),K=M.getSourceAgent()===F?M.getTargetAgent():M.getSourceAgent(),x=N.p(),n=K.p();if(D===b||D===d){if(x.y>n.y)return 1;if(x.y<n.y)return-1}else{if(x.x>n.x)return 1;if(x.x<n.x)return-1}return W.sortFunc(Y.getId(),M.getId())}),e){for(var o,J,z,A=S.getSourceAgent(),x=S.getTargetAgent(),u=0;u<P.size();u++){var K=P.get(u);K.getSourceAgent()===A&&K.getTargetAgent()===x||K.getTargetAgent()===A&&K.getSourceAgent()===x?(J||(J=new Q),J.add(K,0)):J?(z||(z=new Q),z.add(K)):(o||(o=new Q),o.add(K))}P.clear(),o&&P.addAll(o),J&&P.addAll(J),z&&P.addAll(z)}var n=P.indexOf(S),y=P.size(),V=S.s(j);return{side:D,index:n,size:y,offset:-V*(y-1)/2+V*n}},G=function(f,X,n,K,D){var I=X.s(p);return e(X,n,K,n.getAgentEdges().toList(function(q){return f.isVisible(q)&&q.s(p)===I}),D)},a=function(i,y){var H=i.getSourceAgent()===y?i.getTargetAgent():i.getSourceAgent(),f=y.p(),O=H.p(),J=O.x-f.x,$=O.y-f.y;return J>0&&U($)<=J?d:0>J&&U($)<=-J?b:$>0&&U(J)<=$?I:k},w=function(B,Q,$){var m=Q.s(p),h=a(Q,$);return e(Q,$,h,$.getAgentEdges().toList(function(G){return B.isVisible(G)&&G.s(p)===m&&a(G,$)===h}))},T=function(K,j){var p=K.getSourceAgent()===j,A=p?K.getTargetAgent():K.getSourceAgent(),G=j.p(),J=A.p();return p?G.y>J.y?k:I:G.x<J.x?d:b},M=function(h,j,k){var Q=j.s(p),U=T(j,k);return e(j,k,U,k.getAgentEdges().toList(function(l){return h.isVisible(l)&&l.s(p)===Q&&T(l,k)===U}),U===d||U===I)},n=function(L,u){var x=L.getSourceAgent()===u,V=x?L.getTargetAgent():L.getSourceAgent(),M=u.p(),C=V.p();return x?M.x<C.x?d:b:M.y>C.y?k:I},c=function(w,V,L){var G=V.s(p),q=n(V,L);return e(V,L,q,L.getAgentEdges().toList(function(l){return w.isVisible(l)&&l.s(p)===G&&n(l,L)===q}),q===d||q===I)},o=function(v,f,N){var c=v.getSourceAgent(),F=v.getTargetAgent(),E=c.getId()>F.getId(),n=E?F:c,$=E?c:F,Y=n.p(),R=$.p(),P=N(f,v,n),H=N(f,v,$),p=v.s(m),O=p?0:A(f,n)/2,z=p?0:A(f,$)/2,t=p?0:y(f,n)/2,Z=p?0:y(f,$)/2,X=P.offset,G=H.offset,g=P.side,S=H.side,o=new Q;return g===k?(o.add({x:Y.x+X,y:Y.y-t}),o.add({x:Y.x+X,y:R.y+G}),S===b?o.add({x:R.x-z,y:R.y+G}):o.add({x:R.x+z,y:R.y+G})):g===I?(o.add({x:Y.x+X,y:Y.y+t}),o.add({x:Y.x+X,y:R.y+G}),S===b?o.add({x:R.x-z,y:R.y+G}):o.add({x:R.x+z,y:R.y+G})):g===b?(o.add({x:Y.x-O,y:Y.y+X}),o.add({x:R.x+G,y:Y.y+X}),S===I?o.add({x:R.x+G,y:R.y+Z}):o.add({x:R.x+G,y:R.y-Z})):g===d&&(o.add({x:Y.x+O,y:Y.y+X}),o.add({x:R.x+G,y:Y.y+X}),S===I?o.add({x:R.x+G,y:R.y+Z}):o.add({x:R.x+G,y:R.y-Z})),E&&o.reverse(),C(o,v)};K("ortho2",function(j,g,L){var N,o,v=j.s(m),Y=j.s("edge.ortho"),U=j.getSourceAgent(),G=j.getTargetAgent(),$=U.getId()>G.getId(),n=$?G:U,T=$?U:G,f=n.p(),H=T.p(),D=w(L,j,n),X=w(L,j,T),F=v?0:A(L,n)/2,M=v?0:y(L,n)/2,E=v?0:A(L,T)/2,O=v?0:y(L,T)/2,S=new Q,e=D.offset,u=X.offset,q=D.side;return q===d?(N=H.y>f.y?-e:e,o=f.x+F+(H.x-E-f.x-F)*Y,S.add({x:f.x+F,y:f.y+e}),S.add({x:o+N,y:f.y+e}),S.add({x:o+N,y:H.y+u}),S.add({x:H.x-E,y:H.y+u})):q===b?(N=H.y>f.y?-e:e,o=f.x-F-(f.x-F-H.x-E)*Y,S.add({x:f.x-F,y:f.y+e}),S.add({x:o-N,y:f.y+e}),S.add({x:o-N,y:H.y+u}),S.add({x:H.x+E,y:H.y+u})):q===I?(N=H.x>f.x?-e:e,o=f.y+M+(H.y-O-f.y-M)*Y,S.add({x:f.x+e,y:f.y+M}),S.add({x:f.x+e,y:o+N}),S.add({x:H.x+u,y:o+N}),S.add({x:H.x+u,y:H.y-O})):q===k&&(N=H.x>f.x?-e:e,o=f.y-M-(f.y-M-H.y-O)*Y,S.add({x:f.x+e,y:f.y-M}),S.add({x:f.x+e,y:o-N}),S.add({x:H.x+u,y:o-N}),S.add({x:H.x+u,y:H.y+O})),$&&S.reverse(),C(S,j)},!0),K("flex2",function(r,T,p){var F,S=r.getSourceAgent(),n=r.getTargetAgent(),B=S.getId()>n.getId(),i=B?n:S,t=B?S:n,Z=i.p(),W=t.p(),P=w(p,r,i),s=w(p,r,t),N=r.s(m),e=r.s("edge.flex")+(P.size-1)/2*r.s(j),_=N?0:A(p,i)/2,u=N?0:y(p,i)/2,X=N?0:A(p,t)/2,D=N?0:y(p,t)/2,E=new Q,x=P.offset,h=s.offset,O=P.side;return O===d?(F=W.y>Z.y?-x:x,E.add({x:Z.x+_,y:Z.y+x}),E.add({x:Z.x+_+e+F,y:Z.y+x}),E.add({x:W.x-X-e+F,y:W.y+h}),E.add({x:W.x-X,y:W.y+h})):O===b?(F=W.y>Z.y?-x:x,E.add({x:Z.x-_,y:Z.y+x}),E.add({x:Z.x-_-e-F,y:Z.y+x}),E.add({x:W.x+X+e-F,y:W.y+h}),E.add({x:W.x+X,y:W.y+h})):O===I?(F=W.x>Z.x?-x:x,E.add({x:Z.x+x,y:Z.y+u}),E.add({x:Z.x+x,y:Z.y+u+e+F}),E.add({x:W.x+h,y:W.y-D-e+F}),E.add({x:W.x+h,y:W.y-D})):O===k&&(F=W.x>Z.x?-x:x,E.add({x:Z.x+x,y:Z.y-u}),E.add({x:Z.x+x,y:Z.y-u-e-F}),E.add({x:W.x+h,y:W.y+D+e-F}),E.add({x:W.x+h,y:W.y+D})),B&&E.reverse(),C(E,r)},!0),K("extend.north2",function(A,v,P){var o=A.getSourceAgent(),E=A.getTargetAgent(),W=o.getId()>E.getId(),T=W?E:o,$=W?o:E,I=T.p(),w=$.p(),B=G(P,A,T,k),_=G(P,A,$,k,!0),i=A.s(m),s=i?0:y(P,T)/2,e=i?0:y(P,$)/2,c=B.offset,Y=_.offset,r=A.s(X)+(B.size-1)/2*A.s(j),p=t(I.y-s,w.y-e)-r+(I.x<w.x?c:-c),U=new Q;return U.add({x:I.x+c,y:I.y-s}),U.add({x:I.x+c,y:p}),U.add({x:w.x+Y,y:p}),U.add({x:w.x+Y,y:w.y-e}),W&&U.reverse(),C(U,A)},!0),K("extend.south2",function(v,R,b){var p=v.getSourceAgent(),M=v.getTargetAgent(),W=p.getId()>M.getId(),s=W?M:p,u=W?p:M,K=s.p(),o=u.p(),P=G(b,v,s,I),H=G(b,v,u,I,!0),i=v.s(m),Z=i?0:y(b,s)/2,h=i?0:y(b,u)/2,g=P.offset,V=H.offset,x=v.s(X)+(P.size-1)/2*v.s(j),$=r(K.y+Z,o.y+h)+x+(K.x>o.x?g:-g),d=new Q;return d.add({x:K.x+g,y:K.y+Z}),d.add({x:K.x+g,y:$}),d.add({x:o.x+V,y:$}),d.add({x:o.x+V,y:o.y+h}),W&&d.reverse(),C(d,v)},!0),K("extend.west2",function(V,a,K){var e=V.getSourceAgent(),M=V.getTargetAgent(),w=e.getId()>M.getId(),W=w?M:e,J=w?e:M,i=W.p(),p=J.p(),$=G(K,V,W,k),_=G(K,V,J,k,!0),b=V.s(m),I=b?0:A(K,W)/2,q=b?0:A(K,J)/2,E=$.offset,L=_.offset,u=V.s(X)+($.size-1)/2*V.s(j),y=t(i.x-I,p.x-q)-u+(i.y<p.y?E:-E),f=new Q;return f.add({x:i.x-I,y:i.y+E}),f.add({x:y,y:i.y+E}),f.add({x:y,y:p.y+L}),f.add({x:p.x-q,y:p.y+L}),w&&f.reverse(),C(f,V)},!0),K("extend.east2",function(l,O,K){var u=l.getSourceAgent(),U=l.getTargetAgent(),g=u.getId()>U.getId(),P=g?U:u,f=g?u:U,I=P.p(),R=f.p(),c=G(K,l,P,k),d=G(K,l,f,k,!0),M=l.s(m),b=M?0:A(K,P)/2,V=M?0:A(K,f)/2,v=c.offset,x=d.offset,F=l.s(X)+(c.size-1)/2*l.s(j),N=r(I.x+b,R.x+V)+F+(I.y>R.y?v:-v),L=new Q;return L.add({x:I.x+b,y:I.y+v}),L.add({x:N,y:I.y+v}),L.add({x:N,y:R.y+x}),L.add({x:R.x+V,y:R.y+x}),g&&L.reverse(),C(L,l)},!0),K("v.h2",function(k,l,W){return o(k,W,M)},!0),K("h.v2",function(C,j,k){return o(C,k,c)},!0)}(this,Object);