!function(C){"use strict";var W="ht",v=C[W],r=v.Default,q=Math,H=(q.PI,q.sin,q.cos,q.atan2,q.sqrt,q.max),x=q.floor,E=(q.round,q.ceil),Y=v.Shape,f=(v.Edge,v.List),u=v.Style,L=v.graph,m=r.getInternal(),J=m.ui(),j=null,Q="prototype",k=C.clearInterval,S=C.setInterval,p=function(s){var v=s.data,q=this.dm();if(v&&"add"===s.kind){var E=q.$1c,H=v instanceof Y?"shape.":"edge.";E&&v.s(H+"dash.flow")&&E.indexOf(v)<0&&E.push(v)}"clear"===s.kind&&(q.$1c=[])},P=function(k){var A=k.property,S=k.data,u=k.newValue,a=this.dm().$1c,v=S instanceof Y?"s:shape.dash.flow":"s:edge.dash.flow";if(a&&A===v)if(u)a.indexOf(S)<0&&a.push(S);else for(var N=a.length,x=0;N>x;x++)if(a[x]===S){a.splice(x,1);break}},t=L.GraphView[Q],M=J.EdgeUI[Q],d=J.ShapeUI[Q],_=d._80o,F=M._80o,y=v.DataModel[Q],O=y.prepareRemove,B=t.setDataModel;u["edge.dash.flow.step"]==j&&(u["edge.dash.flow.step"]=3),u["shape.dash.flow.step"]==j&&(u["shape.dash.flow.step"]=3),y.prepareRemove=function(x){O.call(this,x);var K=x._dataModel,s=K.$1c;if(s)for(var q=s.length,g=0;q>g;g++)if(s[g]===x){s.splice(g,1);break}},t.setDataModel=function(J){var L=this,Z=L._dataModel;if(Z!==J){Z&&(Z.umm(p,L),Z.umd(P,L),Z.$1c=[]),J.mm(p,L),J.md(P,L);var S=J.$1c=[];J.each(function(O){var L=O instanceof Y?"shape.":"edge.";O.s(L+"dash.flow")&&S.indexOf(O)<0&&S.push(O)}),B.call(L,J)}},t.setDashFlowInterval=function(W){var x=this,s=x.$2c;x.$2c=W,x.fp("dashFlowInterval",s,W),x.$3c!=j&&(k(x.$3c),delete x.$3c,x.enableDashFlow(W))},t.getDashFlowInterval=function(){return this.$2c},t.$4c=function(){var Z,u,v,_=this,Y=_.tx(),L=_.ty(),O=_._zoom,T=_.getWidth(),d=_.getHeight(),N={x:-Y/O,y:-L/O,width:T/O,height:d/O},J=_.dm().$1c,e=_._56I,P=new f;if(J.forEach(function(p){e[p.getId()]&&(Z=_.getDataUI(p),Z&&(v=Z._79o(),v&&P.add(v)))}),0!==P.size()&&(P.each(function(P){r.intersectsRect(N,P)&&(u=r.unionRect(u,P))}),u&&(u&&(r.grow(u,H(1,1/O)),u.x=x(u.x*O)/O,u.y=x(u.y*O)/O,u.width=E(u.width*O)/O,u.height=E(u.height*O)/O,u=r.intersection(N,u)),u))){var W=_._canvas.getContext("2d");W.save(),W.lineCap=r.lineCap,W.lineJoin=r.lineJoin,m.translateAndScale(W,Y,L,O),W.beginPath(),W.rect(u.x,u.y,u.width,u.height),W.clip(),W.clearRect(u.x,u.y,u.width,u.height),_.$5c(W,u),W.restore()}},t.$5c=function(d,J){var K,x,U=this;U._93db(d),U.each(function(n){U._56I[n._id]&&(K=U.getDataUI(n),K&&(x=K._79o(),(!J||r.intersectsRect(J,x))&&(K.$7c=!0,K._42(d),delete K.$7c)))}),U._92db(d)},t.enableDashFlow=function(A){var O=this;O.$3c==j&&(O.$3c=S(function(){O.$4c()},A||O.$2c||50))},t.disableDashFlow=function(){var v=this;k(v.$3c),delete v.$3c};var Z=function(){var o=this,u=o._data,O=u instanceof Y?"shape.":"edge.",S=u.s(O+"dash.pattern"),a=u.s(O+"dash.flow.reverse");if(S&&u.s(O+"dash")&&u.s(O+"dash.flow")&&o.$7c){var N=o.s(O+"dash.offset")||0,K=u.s(O+"dash.flow.step"),t=u.getStyleMap(),I=0;S.forEach(function(x){I+=x}),a&&(K=-K),N-=K,N%=I,t||(u._styleMap=t={}),t[O+"dash.offset"]=N}};M._80o=function(A){F.call(this,A),Z.call(this)},d._80o=function(F){_.call(this,F),Z.call(this)}}(this,Object);