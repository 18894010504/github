!function(A,w,H){"use strict";var f="px",y="0",s="innerHTML",N="className",$=ht.Default,M=ht.Color,k=ht.Node,h="position",q="top",K="left",x=$.animate,t=$.getInternal(),Z="width",y="0",e="none",F="max-height",O="font",L="background",E="border-box",g="user-select",B="box-sizing",o="overflow",r=$.isTouchable,t=$.getInternal(),P=M.titleIconBackground,U=$.scrollBarInteractiveSize,u=/msie 9/.test(A.navigator?A.navigator.userAgent.toLowerCase():""),Y=null,d=function(){return document},p=function(S){return d().createElement(S)},I=function(){return p("div")},C=function(){var g=I(),C=g.style;return C.msTouchAction=e,C.cursor="default",r&&C.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",Y),C.position="absolute",C.left=y,C.top=y,g},G=function(){return p("canvas")},T=function(){return document.body},n=function(p,$,Z){p.style.setProperty($,Z,Y)},l=function(u,U){u.style.removeProperty(U)},b=function(C,t,y){$.def(ht.widget[C],t,y)},W=function(g,d){g.appendChild(d)},J=function(K,m){K.removeChild(m)},Q=function(h,M,$,n){h.addEventListener(M,$,!!n)};t.addMethod($,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:P,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:P}]},paletteTitleLabelColor:$.labelSelectColor,paletteTitleLabelFont:$.labelFont,paletteContentLabelFont:$.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:$.widgetTitleHeight,paletteTitleBackground:M.titleBackground,paletteTitleHoverBackground:M.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:H,paletteItemHoverBorderColor:M.highlight,paletteItemSelectBackground:M.highlight},!0);var j=".palette-item:hover{border: 1px solid "+$.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+$.paletteTitleHoverBackground+" !important}",i=document.createElement("style");r||(i.styleSheet?i.styleSheet.cssText=j:i.appendChild(d().createTextNode(j))),d().getElementsByTagName("head")[0].appendChild(i);var a=function(V){var S=this;S.$22h=V,S.addListeners()};$.def(a,w,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var c=this;c.$36h&&T().removeChild(c.$36h),c.$23h=c.$24h=c.$25h=c.$35h=c.$36h=Y},handle_touchstart:function(x){for(var S,m=this,Q=m.$22h,e=x.target,Y=Q.sm(),h=Q.dm(),o="palette-header",H="palette-item",R=!1,_=!1;e&&(e[N]||"").indexOf(o)<0&&(e[N]||"").indexOf(H)<0;)e=e.parentNode;if(e&&e[N].indexOf(o)>=0?_=!0:e&&e[N].indexOf(H)>=0&&(R=!0),$.isLeftButton(x))if(m.$27h(x))m.$24h=$.getClientPoint(x),m.$25h=Q.ty();else if(_){$.preventDefault(x),S=e.$11h;var f=h.getDataById(S);f.isExpanded()?f.setExpanded(!1):f.setExpanded(!0)}else if(R){S=e.$11h;var g=h.getDataById(S);Y.ss(g),Q.handleDragAndDrop&&($.preventDefault(x),g.s("draggable")&&(Q.handleDragAndDrop(x,"prepare"),m.$35h=0))}else $.preventDefault(x),m.$24h=$.getClientPoint(x),m.$25h=Q.ty();else m.$26h(x)},handle_mousedown:function(e){this.handle_touchstart(e)},handle_mousewheel:function(h){this.handleScroll(h,h.wheelDelta/40,h.wheelDelta!==h.wheelDeltaX)},handle_DOMMouseScroll:function(u){this.handleScroll(u,-u.detail,1)},handleScroll:function(_,B,O){var Q=this.$22h;$.preventDefault(_),O&&Q._41o()&&Q.ty(Q.ty()+20*B)},handle_mouseup:function(D){this.handle_touchend(D)},handle_touchend:function(V){var K=this;K.$37h(V),K.$26h(V)},handleWindowMouseUp:function(v){this.handleWindowTouchEnd(v)},handleWindowTouchEnd:function(q){var v=this;v.$37h(q),v.$26h(q)},$37h:function(R){var U=this,C=U.$22h;2===U.$35h&&(U.$35h=3,C.handleDragAndDrop(R,"end"))},handleWindowMouseMove:function(S){this.handleWindowTouchMove(S)},handleWindowTouchMove:function(e){var a=this,y=a.$22h,Z=a.$23h,E=a.$24h,h=a.$25h,c=$.getClientPoint(e),k=y._29I,d=a.$36h;if(1===a.$35h||2===a.$35h){if(a.$35h=2,y.handleDragAndDrop(e,"between"),r){var I=e.touches[0];e=I?I:e.changedTouches[0]}d.style.left=e.pageX-parseInt(d.width)/2+f,d.style.top=e.pageY-parseInt(d.height)/2+f}else"p"===Z?y.ty(h+c.y-E.y):"v"===Z&&y.ty(h+(E.y-c.y)/k.height*y._59I)},handle_mousemove:function(T){this.handle_touchmove(T)},handle_touchmove:function(V){if(!$.isDragging()&&$.isLeftButton(V)){var F=this,z=F.$22h,k=F.$27h(V);if(F.$24h){if(!F.$23h){if($.getDistance($.getClientPoint(V),F.$24h)<2)return;F.$23h=k?"v":"p",$.startDragging(F)}}else if(k)z._43o();else if(0===F.$35h){if(F.$35h=1,z.handleDragAndDrop(V,"begin"),r){var Z=V.touches[0];V=Z?Z:V.changedTouches[0]}var g=F.$36h=new Image,W=z.$10h[z.sm().ld().getId()].querySelector(".image-box"),e=parseInt(W.style.width),Y=parseInt(W.style.height);g.draggable=!1,g.src=W.toDataURL(),g.width=e,g.height=Y,g.style.position="absolute",g.style.left=V.pageX-e/2+f,g.style.top=V.pageY-Y/2+f,T().appendChild(g),$.startDragging(F)}}},$27h:function($){var T=this.$22h,X=T.getView(),J=X.getBoundingClientRect(),L=T._29I,c=$.clientX-J.left+X.scrollLeft;return T._41o()&&L.x+L.width-c<U}}),ht.widget.Palette=function(K){var m=this,M=m._view=I();m.$9h={},m.$10h={},m.$4h={},m._29I={x:0,y:0,width:0,height:0},m._59I=0,m.dm(K?K:new ht.DataModel),M[N]="ht-widget-palette",m.$29h=new a(m),n(M,L,$.paletteContentBackground),n(M,o,"auto"),n(M,B,E),n(M,"-moz-"+B,E),n(M,"-webkit-"+g,e),n(M,"-moz-"+g,e),n(M,"-ms-"+g,e),n(M,g,e),n(M,"position","absolute"),n(M,"overflow","hidden"),W(M,m._79O=C()),Q(M,"dragstart",function(d){d.dataTransfer.setData("Text","nodeid:"+d.target.$11h),d.dataTransfer.effectAllowed="all",m.$29h.$26h()})},b("Palette",w,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:$.autoHideScrollBar,_scrollBarSize:$.scrollBarSize,_scrollBarColor:$.scrollBarColor,getViewRect:function(){return this._29I},ty:function(u){return u?(this.setTranslateY(u),void 0):this.getTranslateY()},setTranslateY:function(B){if(this.$32h==Y){var p=this,v=p.$33h(B),c=p.$30h;p.$30h=v,p.fp("translateY",c,v)}},getTranslateY:function(){return this.$30h},setLayout:function(w){var l,D,W=this,i=W._layout;W._layout=w,"smallicons"===w?l=D=20:"iconsonly"===w?l=D=50:(l=70,D=50),W.setItemImageWidth(l),W.setItemImageHeight(D),W.setItemImagePadding(4),W.fp("layout",i,w)},$20h:function(){var o=16;return r&&(o*=1.2),o},$19h:function(){return $.paletteTitleHeight},$18h:function(){var x=$.paletteSeparatorWidth,_=$.paletteTitleBackground,Z=$.paletteSeparatorColor||$.brighter(_);return x+f+" solid "+Z},$17h:function(i){n(i,"cursor","pointer"),n(i,"display","inline-block"),n(i,"margin-right",(r?8:4)+f),n(i,"vertical-align",q)},$1h:function(k){var S=this,Q=I(),_=I(),U=p("span");Q[N]="palette-header",n(Q,h,"relative"),n(Q,L,$.paletteTitleBackground),n(Q,"color",$.paletteTitleLabelColor),n(Q,q,y),n(Q,B,E),n(Q,"-moz-"+B,E),n(Q,"padding","0 5px 0 0"),n(Q,"border-top",S.$18h()),n(Q,Z,"100%"),n(Q,"cursor","pointer"),n(Q,"white-space","nowrap"),n(Q,o,"hidden"),n(Q,O,$.paletteTitleLabelFont),n(Q,"line-height",S.$19h()+f),Q.$11h=k.getId();var r=G(),M=S.$19h(),i=S.$20h();return S.$17h(r),t.setCanvas(r,i,M),W(Q,r),r[N]="palette-toggle-icon-"+k.getId(),_[N]="palette-content",n(_,"max-height",0+f),n(_,O,$.paletteContentLabelFont),n(_,o,"hidden"),_.$11h=k.getId(),S.$9h[k.getId()]=_,U[s]=k.getName(),n(U,O,$.paletteTitleLabelFont),W(Q,r),W(Q,U),[Q,_]},$2h:function(k){var l=this,H=l._layout,v=u&&k.s("draggable")?p("a"):I(),M=G(),w=I(),m=k.getName()||"",r=k.s("title")||k.getToolTip()||m,D=l._itemMargin;M[N]="image-box";var J=l.getItemImageWidth(),z=l.getItemImageHeight();return t.setCanvas(M,J,z),W(v,M),w[s]=m,w[N]="label-box","iconsonly"!==H&&W(v,w),v[N]="palette-item",n(v,"vertical-align",q),n(v,"cursor","pointer"),n(v,"border-radius",5+f),n(v,"border","1px solid transparent"),n(v,"text-align","center"),n(v,"display","inline-block"),n(v,"margin-left",D+f),n(v,"margin-top",D+f),n(v,"color",$.paletteContentLabelColor),"smallicons"===H?(n(M,"vertical-align","middle"),n(v,"margin-left",2+f),n(v,"margin-top",2+f),n(v,"padding",2+f),n(v,"text-align",K),n(w,"display","inline-block"),n(w,"min-width",l.$21h+l._itemMargin+f)):"largeicons"===H&&(n(w,"max-width",J+f),n(w,"overflow","hidden")),v.$11h=k.getId(),r&&(v.title=r),k.s("draggable")&&!l.handleDragAndDrop&&(u?(v.href="#",n(v,"text-decoration",e)):v.draggable="true"),v},$16h:function(D,E,y,k){var g=t.initContext(D);t.translateAndScale(g,0,0,1),g.clearRect(0,0,y,y);var j=(y-k)/2;$.drawStretchImage(g,$.getImage(E),"fill",0,j,k,k),g.restore()},$15h:function(k){var m=this,i=k.getId(),d=m._view.querySelector(".palette-toggle-icon-"+i),g=k.isExpanded()?$.paletteCollapseIcon:$.paletteExpandIcon;if(d&&g){var u=m.$19h(),a=m.$20h();m.$16h(d,g,u,a)}},$14h:function(b){var l=this,s=b.getId(),A=l.$10h[s].querySelector(".image-box"),O=b.getImage(),R=b.s("image.stretch");if(A&&O){var c=t.initContext(A),v=l.getItemImagePadding();v="smallicons"===l._layout?v/2:v;var d=l.getItemImageWidth()-2*v,V=l.getItemImageHeight()-2*v;t.translateAndScale(c,0,0,1),c.clearRect(0,0,d,V),$.drawStretchImage(c,$.getImage(O),R,v,v,d,V),c.restore()}},validateImpl:function(){var M,h,i,X=this,m=X.$9h,A=X._layout,N=X.$10h,P=X.$4h,S=X._view,_=X.dm();if(X.$13h&&(delete X.$13h,P={},_.each(function(W){P[W.getId()]=W})),"smallicons"===A)for(var U in P){var e=P[U];if(e instanceof k){var l=e.getName()||"",E=$.getTextSize($.paletteContentLabelFont,l).width;X.$21h!=Y&&X.$21h>E||(X.$21h=E)}}for(var U in P){i=P[U];var I,b;if(_.contains(i)){if(i instanceof ht.Group){var n,L=X.$1h(i),u=N[i.getId()];u&&(n=u.nextSibling,J(S,n),J(S,u)),h=_.getSiblings(i).indexOf(i);var o=S.children[2*h]||X._79O;S.insertBefore(L[0],o),S.insertBefore(n||L[1],o),N[i.getId()]=L[0],M=m[i.getId()]=n||L[1],b=i.$12h;var j=i.s("promptText");b||(i.$12h=p("div"),i.$12h[s]=j||"",b=i.$12h),0===i.getChildren().size()?M.contains(b)||W(M,b):M.contains(b)&&J(M,b)}else if(I=i.getParent()){var K=X.$2h(i),c=N[i.getId()];M=m[I.getId()],c&&J(c.parentNode,c),h=_.getSiblings(i).indexOf(i);var D=M.children[h];D?M.insertBefore(K,D):W(M,K),N[i.getId()]=K,X.$14h(i)}}else{var R=N[i.getId()],t=R.parentNode;if(i instanceof ht.Group){var d=R.nextSibling;J(S,R),J(S,d),delete m[i.getId()]}else J(t,R),0===t.children.length&&(I=_.getDataById(t.$11h),b=I.$12h,b&&!t.contains(b)&&W(t,b));delete N[i.getId()]}}X.$4h={};var B=function(){var g=X._59I,r=0;X.$32h!=Y&&(clearInterval(X.$32h),r=0,delete X.$32h),X.$32h=setInterval(function(){X.$31h(),g===X._59I?(r++,r>=2&&(clearInterval(X.$32h),delete X.$32h)):(r=0,g=X._59I)},30)};for(var q in m)if(M=m[q],i=_.getDataById(m[q].$11h),X.$15h(i),i.isExpanded()){if(M.style.maxHeight===0+f){var z=M.scrollHeight+X._itemMargin+f;x(M).duration(200).set(F,z).set("padding-bottom",X._itemMargin+f).end(function(){return function(){B()}}(z))}else M.style.maxHeight=M.scrollHeight+f;M.style.paddingBottom=X._itemMargin+f}else M.style.maxHeight!==0+f&&x(M).duration(200).set(F,y).set("padding-bottom",y).end(function(){return function(){B()}}(M));X.$28h(),X.$31h()},$31h:function(){for(var P=this,E=P._view,T=0,N=E.children,r=0;r<N.length;r++){var u=N[r];u.className&&u.className.indexOf("palette-")>=0&&(T+=u.offsetHeight)}P._59I=T,P.$30h=P.$33h(P.ty());var e=P.ty();E.scrollTop=-e,P._29I={x:0,y:-e,width:E.clientWidth,height:E.clientHeight},n(P._79O,q,-e+f),P._93I()},$33h:function(_){var m=this,O=m._29I.height-m._59I;return O>_&&(_=O),_>0?0:Math.round(_)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(V){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(V.property)<0&&this.redraw(),"translateY"===V.property&&(this.iv(),this._43o())},findDataByName:function(k){for(var u=this.dm().getDatas(),i=0;i<u.size();i++){var L=u.get(i);if(L.getName()===k)return L}},setDataModel:function(r){var d=this,V=d._dataModel,k=d._3o;V!==r&&(V&&(V.umm(d.$6h,d),V.umd(d.$8h,d),V.umh(d.$7h,d),k||V.sm().ums(d.$28h,d)),d._dataModel=r,r.mm(d.$6h,d),r.md(d.$8h,d),r.mh(d.$7h,d),k?k._21I(r):r.sm().ms(d.$28h,d),d.sm().setSelectionMode("single"),d.fp("dataModel",V,r))},$6h:function(E){var R=this,V=R._view,v=E.data,Z=R.$4h;"add"===E.kind?Z[v.getId()]=v:"remove"===E.kind?Z[v.getId()]=v:"clear"===E.kind&&(R.$10h={},R.$9h={},R.$4h={},V[s]=""),R.iv()},$7h:function(b){var M=this,Q=b.data;M.$4h[Q.getId()]=Q,M.iv()},$8h:function(d){var v=this,o=d.data,f=d.property;"expanded"===f?v.iv():(v.$4h[o.getId()]=o,v.iv())},$28h:function(){var B,k=this,t=k.sm(),W="palette-item",d=t.ld();this.dm().each(function(V){B=k.$10h[V.getId()],B&&B[N].indexOf(W)>=0&&(V===d?n(B,L,$.paletteItemSelectBackground):l(B,L))})}})}(this,Object);